(self.miniJsonp=self.miniJsonp||[]).push([[592],{37764:function(e,t,r){var n;n=(e,t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,R,C)=>(()=>{var P={757:(e,t,r)=>{e.exports=r(666)},439:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,a,c,u;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),c=a[t]),void 0===c)c=a[t]=r,++e._eventsCount;else if("function"==typeof c?c=a[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=i(e))>0&&c.length>o&&!c.warned){c.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=c.length,u=d,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=d.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):_(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)n(i,this,t);else{var u=i.length,d=_(i,u);for(r=0;r<u;++r)n(d[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,l(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,l(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,c;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){c=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new D(n||[]);return a._invoke=function(e,t,r){var n=l;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=d(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function h(){}function O(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=O.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=d(e[o],e,a);if("throw"!==i.type){var u=i.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(l).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=d(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=g.constructor=O,O.constructor=h,h.displayName=i(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},327:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},171:(e,t,r)=>{var n=r(217),o=r(327);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var s=0;s<16;++s)t[a+s]=c[s];return t||o(c)}},241:e=>{"use strict";e.exports=T},782:e=>{"use strict";e.exports=p},830:e=>{"use strict";e.exports=f},292:e=>{"use strict";e.exports=_},423:e=>{"use strict";e.exports=a},209:e=>{"use strict";e.exports=g},411:e=>{"use strict";e.exports=b},123:e=>{"use strict";e.exports=C},770:e=>{"use strict";e.exports=R},914:e=>{"use strict";e.exports=y},674:e=>{"use strict";e.exports=o},378:e=>{"use strict";e.exports=i},464:e=>{"use strict";e.exports=u},428:e=>{"use strict";e.exports=c},661:e=>{"use strict";e.exports=d},444:e=>{"use strict";e.exports=s},598:e=>{"use strict";e.exports=n},550:e=>{"use strict";e.exports=O},383:t=>{"use strict";t.exports=e},252:e=>{"use strict";e.exports=l},655:e=>{"use strict";e.exports=m},944:e=>{"use strict";e.exports=S},975:e=>{"use strict";e.exports=h},947:e=>{"use strict";e.exports=v},855:e=>{"use strict";e.exports=t},672:e=>{"use strict";e.exports=r},455:e=>{"use strict";e.exports=E}},D={};function I(e){var t=D[e];if(void 0!==t)return t.exports;var r=D[e]={exports:{}};return P[e](r,r.exports,I),r.exports}I.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return I.d(t,{a:t}),t},I.d=(e,t)=>{for(var r in t)I.o(t,r)&&!I.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},I.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),I.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var A={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}I.r(A),I.d(A,{$tracker:()=>_m,BadRequest:()=>Ue,Blacklist:()=>Be,CancelOrderWarning:()=>Ke,ChatbotProvider:()=>SO,CustomError:()=>Ve,EventBus:()=>fT,ExceptionName:()=>yt,FileReaderError:()=>Je,Forbidden:()=>Fe,HTTPError:()=>Ze,InternalServerError:()=>Ge,Limiting:()=>qe,LiveReportPoint:()=>dt,LiveSecretKey:()=>pt,MarkName:()=>gt,NoLiveKeyMap:()=>Tt,NoLiveReportPoint:()=>lt,NoLiveSecretKey:()=>ft,NotFound:()=>Le,ReportComponent:()=>bt,ReportPoint:()=>Mt,TemporyError:()=>$e,Unauthoried:()=>Me,UnprocessableEntity:()=>je,UntrustedNetwork:()=>We,UnverifiedPhoneNumber:()=>ze,Webview:()=>Qe,addMediaFile:()=>zS,addOnDealItemDetailCleaner:()=>Bu,addOnDealRuleCleaner:()=>Qu,agentConversationEntitiesSelector:()=>or,agentConversationSchema:()=>S,allMessageIdsSelector:()=>Qf,allProductsSearchStatusSelector:()=>pv,allProductsSelector:()=>Tv,authorizedShopsCountSelector:()=>Wn,autoTranslation:()=>w_,batchRemoveDraft:()=>EE,batchUpdateRecord:()=>Cr,blockUserRequested:()=>to,bundleDealItemDetailCleaner:()=>qu,bundleDealRuleCleaner:()=>Wu,cancelReasonsSelector:()=>rv,captchaSignatureSelector:()=>bn,captchaVisibleSelector:()=>gn,changeConversationStatusRequested:()=>si,changeConversationStatusRequestedSaga:()=>Wd,chatbotImageSelector:()=>Xh,chatbotIntentsReportRequest:()=>TO,chatbotReducer:()=>zO,checkUserPermissionRequested:()=>$a,checkUserPermissionSucceeded:()=>Za,clearApiCache:()=>fe,clearMediaFile:()=>XS,clearReportRequested:()=>Rv,closeChatbotMediaPreview:()=>vO,closeMediaPreviewModalRequested:()=>ch,closeModal:()=>Br,collectAsyncTask:()=>Gt,collectChatbotReportTask:()=>Om,collectComponentTask:()=>jt,collectLoadTask:()=>Lt,configTrackerUser:()=>im,contactsEntitiesSelector:()=>_r,contactsSchema:()=>h,conversationBeenDeletedSelector:()=>Ns,conversationDirectionSelector:()=>rs,conversationEntitiesSelector:()=>nr,conversationHttpStatusSelector:()=>ts,conversationIdsSelector:()=>Kc,conversationLastMessageSelector:()=>Yf,conversationOperateRequested:()=>ui,conversationReducer:()=>tp,conversationSchema:()=>s,conversationsLengthLevelSelector:()=>Er,conversationsSelector:()=>ns,converstionSyncUpdatesSaga:()=>Ol,copySucceedFeedback:()=>Wp,csSocket:()=>bT,csSocketConnectedSelector:()=>BS,csSocketLoginedSelector:()=>VS,curConvsMessageSelector:()=>l_,curMessagesRelatedSelector:()=>Hf,curTabFocusedSelector:()=>jn,currentAllMessageShortcutsSelector:()=>C_,currentBuyerIdSelector:()=>_s,currentBuyerOffersSelector:()=>sE,currentBuyerOrdersSelector:()=>sv,currentBuyerSelector:()=>Cs,currentBuyerShopIdSelector:()=>Ps,currentBuyerShopSelector:()=>ap,currentConversationAutoTranslationSelectors:()=>Ts,currentConversationBuyerIdSelectors:()=>Os,currentConversationCanReadSelector:()=>es,currentConversationIdSelector:()=>Zc,currentConversationMaxOptionHideTimeSelectors:()=>ms,currentConversationSelector:()=>fs,currentConversationShopIdSelectors:()=>hs,currentConversationShopRegionSelectors:()=>Ss,currentConversationShopSelectors:()=>Es,currentConversationStatusSelectors:()=>vs,currentConversationToNameSelector:()=>xs,currentConversationTranslationAccessSelector:()=>As,currentDraftSelector:()=>gE,currentFaqHistorySeletor:()=>Nf,currentFaqSessionInfoSelector:()=>Zh,currentFetchResultSelector:()=>vv,currentGroupIdSelector:()=>g_,currentGroupTypeSelector:()=>v_,currentOfferPaginationSelector:()=>cE,currentOffersFetchResultSelector:()=>aE,currentOrderFetchResultSelector:()=>av,currentPendingOffersCountSelector:()=>js,currentPreviewMediaIdSelector:()=>nh,currentShopIdSelector:()=>Rs,currentUserDistributionStatusSelector:()=>Mn,currentUserIdSelector:()=>_n,currentUserRoleSelector:()=>Un,currentUserSelector:()=>Pn,currentUserShopIdSelector:()=>xn,currentUserShopSelector:()=>kn,defaultPagination:()=>Gp,degradeConversationIdsSelector:()=>is,deleteConfigDurationSelector:()=>Tn,deleteConfigSelector:()=>mn,deleteConversationRequested:()=>Vs,deleteConversationSucceeded:()=>Bs,deleteMediaFile:()=>JS,deleteRecord:()=>Rr,distributionAccountStatusSelector:()=>U_,draftHashSelector:()=>TE,draftReducer:()=>vE,entitiesSelector:()=>tr,entityReducer:()=>xr,entryPointSelector:()=>Xf,failedMessageIdsSelector:()=>Wf,fakeConversationSucceeded:()=>Qs,faqHistoryHashSelector:()=>Af,faqHistoryMessagesSelector:()=>o_,faqHistoryhttpStatusSelector:()=>If,faqIdSelector:()=>wf,faqSessionInfoSelector:()=>$h,feedStoryEntitiesSelector:()=>lr,feedStorySchema:()=>f,feedbackRequested:()=>WE,feedbackSelector:()=>GS,feedbackSucceeded:()=>KE,fetch:()=>it,fetchConversationsRequested:()=>qs,fetchConversationsRequestedSaga:()=>Ad,fetchConversationsSucceeded:()=>Ws,fetchDegradeConversationsDetail:()=>ii,fetchDegradeConversationsDetailSaga:()=>wd,fetchFaqSessionSucceed:()=>mO,fetchMessagePreview:()=>Dd,fetchSettings:()=>Q_,fetchSettingsRequested:()=>j_,fetchSettingsStatusSelector:()=>dh,fetchShopAuth:()=>Np,fetchShopAuthRequested:()=>ip,fetchShopDetailInfo:()=>fp,fetchShopSettings:()=>Ch,fetchShopTranslationSettings:()=>mh,fetchShopsByIds:()=>wp,fetchShopsRequested:()=>sp,fetchUserOrderDetail:()=>ia,fetchUserOrderDetailRequested:()=>zo,fetchUserOrderDetailSucceeded:()=>Jo,fetchedShopIdsSelector:()=>np,filterSelector:()=>ds,filteredConversationsSelector:()=>ls,flashSaleItemDetailCleaner:()=>Ku,forceLogoutRequested:()=>Na,formatOffer:()=>Bh,formatSinglePrice:()=>Gu,generatePersist:()=>lT,getChatbotSdk:()=>_O,getConversation:()=>gs,getConversationDetailRequested:()=>Ys,getConversationFakingMessages:()=>e_,getConversationIds:()=>iT,getConversationPendingOffersCountSelector:()=>Gs,getConversationShopId:()=>bs,getConversationShopRegion:()=>Fs,getConversations:()=>ys,getConvsMessagesRelatedSelector:()=>Vf,getDraft:()=>mE,getGuide:()=>So,getGuideFailed:()=>_o,getGuideRequested:()=>po,getGuideSucceeded:()=>fo,getMessageSelector:()=>Gf,getMessagesSelector:()=>Ff,getPendingOffersCountRequested:()=>gi,getRouterPath:()=>te,getShopUnreadCountByIds:()=>Ap,getToastInformation:()=>Qp,getTranslation:()=>Xt,handle401ErrorRequested:()=>rt,handleChatbotUrl:()=>vm,handleChatbotUrlKey:()=>mm,handleConnect:()=>xE,handleLoginSucceededLogic:()=>ja,handleOrderForApi:()=>Rm,handleUnreadCountChangeAction:()=>an,handledOrderForRender:()=>ym,hasDeletePermissionSelector:()=>vn,hasMoreLatestMessageSelector:()=>zf,hasMoreOlderMessageSelector:()=>Kf,hasReplyPermissionSelector:()=>On,hasVideoPermissionSelector:()=>hn,heartbeat:()=>$,history:()=>ee,inScrollToMessageSelector:()=>h_,initMDAPSdk:()=>Vt,inlocationSelector:()=>Xc,isCBSellerSelector:()=>An,isCSSocketShared:()=>gT,isError:()=>et,isMainPageSelector:()=>Ln,isNavigateToUnreadMessageSelector:()=>Us,isScChatSelector:()=>Bn,isShared:()=>z,isSubAccountSelector:()=>In,itemDetailCleaner:()=>Hu,itemListDetailCleaner:()=>Vu,keywordSelector:()=>us,legacyMessageShortcutsCountSelector:()=>k_,listsHashSelector:()=>ws,loadingSelector:()=>fn,localeSelector:()=>Dn,locationMessage:()=>fi,login:()=>Ga,loginCSSocket:()=>yT,loginRequested:()=>Da,loginSocket:()=>X,loginSucceeded:()=>Ia,loginSuccessSelector:()=>Yn,logout:()=>Fc,logoutHandler:()=>Gc,logoutRequested:()=>Aa,logoutSucceeded:()=>wa,markMessagesRequested:()=>$s,markMessagesRequestedSaga:()=>Hd,markMessagesSucceeded:()=>Zs,mdapConfig:()=>wt,mediaListSelector:()=>WS,mediaMapSelector:()=>qS,mediaMessagesSelector:()=>a_,mediaPreviewModalReducer:()=>ih,mediaPreviewerReducer:()=>ZS,memoize:()=>Am,messageEntitiesSelector:()=>ar,messageFillStatusMapSelector:()=>Bf,messageHasNextSelector:()=>Jf,messageHttpStatusSelector:()=>xf,messageOffersSelector:()=>d_,messageSchema:()=>c,messageShortcutGroupContentSelector:()=>T_,messageShortcutGroupEntitiesSelector:()=>dr,messageShortcutGroupHttpStatusSelector:()=>m_,messageShortcutGroupSelector:()=>O_,messageShortcutsSchema:()=>_,messageShortcutsSelector:()=>b_,messageShortcutsStatusSelector:()=>x_,messageSourceIdsSelector:()=>u_,messageSourceSelector:()=>i_,messageTimeStyleSelector:()=>N_,messagesLengthLevelSelector:()=>Sr,messagesRelatedMapSelector:()=>kf,messagesSelector:()=>Zf,missedReadNoticeCountSelector:()=>Jc,modalReducer:()=>Yr,modalSelector:()=>Mr,muteConversationRequested:()=>mi,myShopSelector:()=>op,navigateToUnreadMessageIdSelector:()=>Ms,networkJudge:()=>vT,networkStatusSelector:()=>Sn,newMessageFlagSelector:()=>Rn,newbieSelector:()=>En,normalize:()=>T,noticesCountSelector:()=>HS,offerCleaner:()=>Xu,offerDetailCleaner:()=>Ju,offerHttpStatusSelector:()=>eE,offerSchema:()=>d,offerSelector:()=>nE,offersSelector:()=>tE,offlineMessagesSelector:()=>Uf,openedMenuSelector:()=>Vn,orderEntitiesSelector:()=>sr,orderHttpStatusSelector:()=>nv,orderSchema:()=>i,orderSelector:()=>tv,personalMessageShortcutsSelector:()=>y_,pinConversationRequested:()=>ti,previewMediasSelector:()=>c_,productCleaner:()=>Im,productEntitiesSelector:()=>ir,productSchema:()=>u,productSelector:()=>iv,productsSelector:()=>uv,rateCardEntitiesSelector:()=>pr,rateCardSelector:()=>p_,rateCardsSchema:()=>E,readMessage:()=>ua,readRequestIdsSelector:()=>zc,reconnectFlagSelector:()=>FS,redirectConversationRequested:()=>Xv,reduxReset:()=>iE,relatedOfferIdsSelector:()=>rE,removeAllDraft:()=>_E,removeSingleDraft:()=>fE,replyToMessageIdSelector:()=>__,replyToMessageSelector:()=>S_,reportApiTime:()=>Bt,reportArraySelector:()=>mv,reportReducer:()=>Uv,reportRequested:()=>yv,resendMessagePayloadSelector:()=>yn,resetConversationRequested:()=>ai,resetNavigateToUnreadMessageId:()=>vi,resetSearchParams:()=>ri,resultsSelector:()=>Ds,reverseMessagesSelector:()=>t_,saveDraft:()=>SE,scrollToMessageIdSelector:()=>E_,searchConversationHttpStatusSelector:()=>Is,searchConversationsRequested:()=>wl,searchConversationsSucceeded:()=>Nl,searchMoreResults:()=>di,searchShopsRequested:()=>pp,selectHydrated:()=>m,selectVideoInfoByKey:()=>Lf,selectVideoInfoKeyByVid:()=>jf,sellerRecommendGroupsFetchStatusSelector:()=>Ov,sellerRecommendGroupsSelector:()=>Ev,sellerRecommendProductFetchStatusSelector:()=>hv,sellerRecommendProductsSelector:()=>fv,sendingMessageIdsSelector:()=>qf,setChatSource:()=>na,setConversationBeenDeleted:()=>Ti,setCurrentConversationCanRead:()=>ni,setNavigateToUnreadMessage:()=>hi,setNavigateToUnreadMessageId:()=>Oi,setTextBoxHeight:()=>Lc,setToastInformation:()=>Kp,setToastInformationSaga:()=>ef,settingsFetchStatusSelector:()=>A_,settingsNeedForceUpdateSelectors:()=>D_,settingsReducer:()=>$_,settingsSelector:()=>P_,settingsStatusSelector:()=>I_,shopAccessSelector:()=>ks,shopReducer:()=>Vp,shopSchema:()=>p,shopSelector:()=>rp,shopService:()=>H,shopStatisticsMapSelector:()=>wn,shopStatisticsSelector:()=>Nn,shopTranslationSettingsSelector:()=>uh,shoppingCartItemDetailCleaner:()=>zu,shopsEntitiesSelector:()=>fr,shopsUnreadConversationCountSelector:()=>Qr,shouldPersistItem:()=>pT,showAutoHangupModalSelector:()=>Kn,showCartReminder:()=>Wh,showChatWindowSelector:()=>Hn,showChatbotImage:()=>OO,showConversationDetailSelector:()=>Fn,showConversationRequested:()=>oi,showConversationSucceeded:()=>ci,showEntrySelector:()=>qn,showFaqHistory:()=>Kh,showFeedStory:()=>qh,showMediaPreviewModalRequested:()=>ah,showMediaPreviewModalSelector:()=>rh,showModal:()=>Vr,showOffer:()=>Yh,showOrder:()=>Vh,showProduct:()=>Hh,showSearchedConversationRequested:()=>pi,showShop:()=>Sp,showUser:()=>uc,showUserRequested:()=>ic,showVoucher:()=>Qh,showWarningMessageIdsSelector:()=>r_,socket:()=>J,socketReducer:()=>jS,socketSuccessSelector:()=>Qn,sortedConversationsSelector:()=>ps,stickerEntitiesSelector:()=>cr,stickerSchema:()=>l,systemRecommendProductFetchStatusSelector:()=>Sv,systemRecommendProductsSelector:()=>_v,takeEveryWithCancel:()=>nT,teamMessageShortcutsSelector:()=>R_,textBoxHeightSelector:()=>Gn,timerHandler:()=>Av,toBottomHasConflictSelector:()=>$f,toMessageIdSelector:()=>f_,toastReducer:()=>lf,toastSelector:()=>Bp,totalUnreadConversationsCountSelector:()=>qr,translatePreferenceReducer:()=>Ih,unreadCountActions:()=>Wr,unreadCountReducer:()=>pn,unreadMessageIdsSelector:()=>s_,unreadMessagesSelector:()=>n_,updateCSSocketStatus:()=>CS,updateCaptchaSignature:()=>Ac,updateCaptchaSignatureSaga:()=>Nc,updateCaptchaSignatureSucceeded:()=>wc,updateCaptchaVisible:()=>Ic,updateChatEntryStatus:()=>ca,updateChatWindowStatus:()=>$o,updateChatWindowStatusSaga:()=>la,updateChatWindowStatusSucceeded:()=>Zo,updateChatbotFrom:()=>EO,updateConversationDetailStatus:()=>ea,updateConversationDetailStatusSaga:()=>pa,updateConversationDetailStatusSucceeded:()=>ta,updateConversationFilter:()=>Xs,updateConversationListsHash:()=>nt,updateConversationTimestamp:()=>Js,updateCurTabFocused:()=>hc,updateCurTabFocusedSaga:()=>vc,updateCurTabFocusedSucceeded:()=>Oc,updateDelPermission:()=>ec,updateEntities:()=>br,updateFetchConversationsDirection:()=>zs,updateFetchStatus:()=>bh,updateFetchedShopIds:()=>up,updateGuide:()=>Io,updateGuideRequested:()=>Co,updateGuideSucceeded:()=>Po,updateIsMainPage:()=>Sc,updateLocationMode:()=>_i,updateLoginSuccessStatus:()=>oa,updateNetworkStatus:()=>Ko,updateNoticesCount:()=>ES,updateOpenedMenu:()=>ra,updateOrReplaceAction:()=>sT,updateReadRequestData:()=>ei,updateReconnectFlag:()=>GE,updateRecord:()=>yr,updateSearchParams:()=>xl,updateSettingPreferenceStatus:()=>yh,updateShopFilter:()=>dp,updateShopTranslationSettings:()=>gh,updateShopTranslationSettingsRecord:()=>Rh,updateShowAutoHangupModal:()=>Xo,updateSocketSuccessStatus:()=>aa,updateStatusSelector:()=>lh,updateTimeNowSelector:()=>$c,updateTotalUnreadConversationsCount:()=>rn,updateUnreadCount:()=>tn,updateUser:()=>sa,updateUserRequested:()=>Wo,updateVoucherStatus:()=>sd,userEntitiesSelector:()=>rr,userReducer:()=>Wc,userSchema:()=>a,userSelector:()=>Cn,videoMapSelector:()=>Mf,visitShopSellerCenterRequested:()=>lp,voucherCleaner:()=>cd,voucherEntitiesSelector:()=>ur,voucherHttpStatusSelector:()=>XO,voucherSelector:()=>ZO,vouchersSchema:()=>O,vouchersSelector:()=>$O,watchBlock:()=>ao,watchCSChatChannel:()=>IS,watchCSChatReconnect:()=>AS,watchCaptcha:()=>xc,watchChannel:()=>OS,watchChatbotSagas:()=>JO,watchCheck:()=>rc,watchConversationSagas:()=>Zl,watchFeedback:()=>JE,watchGuides:()=>ho,watchLogin:()=>Fa,watchReportSagas:()=>kv,watchSearch:()=>Ul,watchSettingsSagas:()=>X_,watchShopSagas:()=>Fp,watchShow:()=>dc,watchSocketSagas:()=>LS,watchTab:()=>Tc,watchToastSagas:()=>df,watchTranslationSagas:()=>Ah,watchTranslationSettings:()=>Dh,watchUncontrolledSagas:()=>tT,watchUnreadSagas:()=>ln,watchUpdate:()=>fa,watchUpdateGuides:()=>Ao,watchUserSagas:()=>Qc});var t=I(383);function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var o=function(e,r,o){return new t.schema.Entity(e,n({},r),n({},o))},a=o("users"),c=o("messages"),s=o("conversations"),i=o("orders"),u=o("products"),d=o("offers"),l=o("stickers"),p=o("shops"),f=o("feedStories"),_=o("messageShortcuts"),E=o("rateCards"),S=o("agentConversations"),h=o("contacts",{},{idAttribute:"account_id"}),O=o("vouchers"),v={users:a,messages:c,conversations:s,orders:i,offers:d,products:u,stickers:l,shops:p,feedStories:f,messageShortcuts:_,rateCards:E,agentConversations:S,contacts:h,vouchers:O};const T=function(e,r){var n=v[e]||o(e);return r instanceof Array?(0,t.normalize)(r,[n]):(0,t.normalize)(r,n)};var m=function(e,r,n){try{var o=v[e];return r instanceof Array?(0,t.denormalize)(r,[o],n.entityReducer):null==r?void 0:(0,t.denormalize)(r,o,n.entityReducer)}catch(e){return}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=I(855);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function P(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){P(a,n,o,c,s,"next",e)}function s(e){P(a,n,o,c,s,"throw",e)}c(void 0)}))}}var w=I(757),N=I.n(w),x=I(672),k=I(598),U=I.n(k);function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t,r){return t&&L(e.prototype,t),r&&L(e,r),e}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?G(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H=new(function(){function t(){M(this,t),this.shopsMap={}}var r;return j(t,[{key:"updateShopMap",value:function(e){this.shopsMap=F(F({},this.shopsMap),e)}},{key:"getRegion",value:(r=D(N().mark((function t(r,n){var o,a,c,s;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}if(a=null===(o=this.shopsMap[n])||void 0===o?void 0:o.country){t.next=8;break}return t.next=5,it({resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 5:return c=t.sent,this.updateShopMap(e({},c.id,c)),t.abrupt("return",c.country);case 8:return t.abrupt("return",a);case 11:if(s=(0,R.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(s)&&!r){t.next=14;break}return t.abrupt("return","GLOBAL");case 14:return t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}());"live"!==(0,R.getRuntimeServer)()&&(window.shopService=H);var V,B=I(674),Y=I.n(B);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Q(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var W=(0,R.checkIsScChat)();V=W?"scminichat":"pmminichat";var K=new(Y())({shouldShared:W,name:"".concat((0,R.getRuntimeRegion)(),"_").concat((0,R.getRuntimeServer)(),"_seller-push-ws")}),z=K.isShared,J=K.socket;J.dispatch||(J.dispatch=function(){return{}});var X=function(e){return z?J.emit("login",q(q({},e),{},{app_id:V}),!0):new Promise((function(t){J.emit("login",q(q({},e),{},{app_id:V}),(function(e){return t(JSON.parse(e))}))}))},$=function(e){var t=e.noticesCount,r=e.readMissedCount,n=e.csSocketLogined,o=e.csSocketConnected,a={app_id:V,noticesCount:t,readMissedCount:r,csSocketLogined:n,csSocketConnected:o},c="".concat(V,"|").concat(t,"|").concat(r,"|").concat(n,"|").concat(o);return z?J.heartbeat({emitEvent:"heartbeat",args:a,pollingTime:6e4,remedyTime:9e4,separator:"|"}):J.emit("heartbeat",c)},Z=I(423),ee=(0,I(428).createBrowserHistory)({basename:"/chateasy"}),te=function(){var e=ee.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},re=((0,R.getRuntimeRegion)()||"").toUpperCase(),ne="live"===(0,R.getRuntimeServer)(),oe=(0,Z.createFetchUtils)({locale:re,isLiveEnv:ne,onSecuritySdkError:function(e){return console.log("[onSecuritySdkError]",e)}}),ae=oe.initSecuritySdk,ce=oe.post;function se(e,t){return ie.apply(this,arguments)}function ie(){return(ie=D(N().mark((function e(t,r){var n,o,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.headers,o=r.body,e.next=3,ce(t,JSON.parse(o),{headers:n,antiFraudConfig:{deviceFingerPrint:{dataFormatter:function(e){return{re_policy:{dfp_access_f:e}}}},apiProtection:{signatureLevel:1}}});case 3:return a=e.sent,e.abrupt("return",a.__raw);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ae({history:ee});var de=I(444),le=I.n(de);window.__CHANGE_FETCH__||(window.fetch=le(),window.__CHANGE_FETCH__=!0);var pe="CHAT_API",fe=function(){window.caches&&window.caches.delete(pe)};function _e(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=D(N().mark((function e(t,r){var n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),c=o.get("force_update"),s=o.get("_ts"),i=r.method&&"get"===r.method.toLowerCase(),u="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),d="&force_update=".concat(String(c)),l=t.replace(u,"").replace(d,"").replace(s||"",""),!(i&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(pe);case 13:return p=e.sent,e.next=16,p.match(l);case 16:if(f=e.sent,_=Date.now(),!f){e.next=25;break}if(!(_<Number(f.headers.get("cache-expires")))||c){e.next=23;break}return e.abrupt("return",f);case 23:return e.next=25,p.delete(l);case 25:return e.next=27,window.fetch(t,r);case 27:if(E=e.sent,S=E.clone(),200!==E.status){e.next=41;break}return h=ue(E.headers.entries()),O={},v=Number(o.get("cache_expires"))||3600,T=_+1e3*v,e.next=36,E.blob();case 36:m=e.sent,h.forEach((function(e){O[e[0]]=e[1]})),O["cache-expires"]=T,g=new Response(m,{headers:new Headers(O)});try{p.put(l,g)}catch(e){window.caches.delete(pe)}case 41:return e.abrupt("return",S);case 44:return e.abrupt("return",window.fetch(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",window.fetch(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var Se,he,Oe,ve=I(378),Te=I.n(ve),me=I(464),ge=I.n(me);!function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(Oe||(Oe={}));var be=(e(Se={},Oe.ONE,"70c74f4e-dcda-483e-826b-19dd2c42e799"),e(Se,Oe.TWO,"29ffec18-c614-4645-8f1c-686e22d2e26a"),e(Se,Oe.THREE,"04229e76-1ba3-4ac9-8a4e-68d46a3881a2"),e(Se,Oe.FOUR,"a3769a87-35cf-45e9-a5a7-2b4016c52e92"),Se),ye=(e(he={},Oe.ONE,"396c15ad-6d3e-4018-98be-cef58cb45cd0"),e(he,Oe.TWO,"607c871d-b766-4c6f-ba89-b6c6ca32b156"),e(he,Oe.THREE,"42990074-9a73-4459-b749-f3110d222a72"),e(he,Oe.FOUR,"5702b6f3-62a3-44d2-abe8-fece100a8bf4"),he);function Re(e,t){var r=t.url,n=t.method,o=t.token,a=t.ctoken,c=t.extra,s=function(e){return"live"===(0,R.getRuntimeServer)()?ye[e]:be[e]}(e);switch(e){case 1:return function(e,t,r){if(r){var n=r.plat,o=r.fromID,a=r.reqID,c=r.toID,s=r.timestamp,i=r.type,u=r.strinput,d="key=".concat(t,"&plat=").concat(n,"&ver=v1.2&fromID=").concat(o,"&reqID=").concat(a,"&toID=").concat(c,"&timestamp=").concat(s,"&type=").concat(i,"&strinput=").concat(u);return ge()(d).toString()}return Te()(e+t).toString()}(r,s,c);case 2:return function(e,t,r){return Te()(e+t+r).toString()}(r,s,n);case 3:return function(e,t,r){return Te()(e+t+r).toString()}(r,s,o);case 4:return function(e,t,r){return Te()(e+t+r).toString()}(r,s,a);default:return""}}var Ce=function(e){var t=e.url,r=e.method,n=e.token,o=e.ctoken,a=void 0===o?"":o,c=e.version,s=e.fromID,i=e.payload,u=void 0===i?"{}":i,d=e.timestamp,l=JSON.parse(u),p=l.to_id,f=l.request_id,_=l.type,E=l.content,S=void 0===E?{}:E;return{url:t,method:r,token:n,ctoken:a,extra:{plat:c,fromID:s,reqID:f,toID:p,timestamp:d,type:_,strinput:"text"===_&&S.text?S.text:""}}};function Pe(e,t){return Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pe(e,t)}function De(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?Ie(e):t}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function xe(e,t,r){return xe=Ne()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Pe(o,r.prototype),o},xe.apply(null,arguments)}function ke(e){var t="function"==typeof Map?new Map:void 0;return ke=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return xe(e,arguments,we(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pe(n,e)},ke(e)}var Ue=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).name=n.constructor.name,n.message=e,n}return j(r,[{key:"handler",value:function(){}}]),r}(ke(Error)),Me=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n){var o;return M(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return j(r,[{key:"handler",value:function(){(0,R.removeItem)("mini-session"),R.LS.removeItem("mini-session")}}]),r}(ke(Error));const Le=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(ke(Error));var je=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n){var o;return M(this,r),(o=t.call(this,e)).name=o.constructor.name,o.errors=n,o}return r}(ke(Error)),Ge=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n.handler=n.handler.bind(Ie(n)),n}return j(r,[{key:"handler",value:function(){}}]),r}(ke(Error)),Fe=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n){var o;return M(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return j(r,[{key:"handler",value:function(){}}]),r}(ke(Error)),He=I(439).t,Ve=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n.handler=n.handler.bind(Ie(n)),n}return j(r,[{key:"handler",value:function(){var e="";switch(this.error.error_code){case"unauthorized_for_shop":e="forward.error.unauthorized_for_shop";break;case"target_subaccount_unauthorized_for_shop":e="forward.error.target_subaccount_unauthorized_for_shop";break;case"target_group_unauthorized_for_shop":e="forward.error.target_group_unauthorized_for_shop";break;case"conversation_not_belong_to_you":e="forward.error.conversation_not_belong_to_you";break;case"conversation_not_dispatch":e="forward.error.conversation_not_dispatch";break;case"cannot_move_conversation_to_yourself":e="forward.error.cannot_move_conversation_to_yourself";break;case"target_subaccount_not_online":e="forward.error.target_subaccount_not_online";break;case"subaccount_conversation_not_found":e="forward.error.subaccount_conversation_not_found";break;case"conversation_closed":e="forward.error.conversation_closed";break;case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title"}return{show:!0,type:"fail",message:He(e)}}}]),r}(ke(Error)),Be=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n,o){var a;return M(this,r),(a=t.call(this,e)).name=a.constructor.name,a}return r}(ke(Error)),Ye=I(439).t,Qe=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n}return j(r,[{key:"handler",value:function(){var e;switch(this.error.error_code){case"send_rating_card_too_frequently":e="conversation_detail.message_list.rating_card_duplicate";break;case"rating_card_rated":case"rating_card_expired":e="rate_card.submit.fail";break;default:e="common.server_error.warning_tips"}return{message:Ye(e),show:!0,type:"fail"}}}]),r}(ke(Error)),qe=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(ke(Error)),We=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e.message)).name=n.constructor.name,n.message=e.message,n}return r}(ke(Error)),Ke=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(ke(Error));const ze=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n,o){var a;return M(this,r),(a=t.call(this,e)).name=a.constructor.name,a.errors=n,a.data=o,a}return r}(ke(Error)),Je=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n.message=e,n}return r}(ke(Error));var Xe,$e=function(e){De(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).message=e,n}return r}(ke(Error)),Ze=function(e){switch(e){case 400:return Ue;case 401:return Me;case 403:return Fe;case 404:return Le;case 422:return je;case 429:return qe;case 451:return We;case 452:return $e;case 491:return Ve;case 492:return Be;case 493:return Qe;case 494:return Ke;case 495:return ze;case 500:return Ge;default:return Error}},et=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")},tt=I(252);!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH"}(Xe||(Xe={}));var rt=(0,tt.createActions)(e({},Xe.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,nt=(0,tt.createActions)(e({},Xe.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash;function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ot(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct=(0,R.checkIsScChat)(),st=(0,R.getRuntimeVersion)();function it(e){return ut.apply(this,arguments)}function ut(){return ut=D(N().mark((function t(r){var n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,P,I,A,w,k,M,L,j,G,F,V,B,Y;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.shared,o=void 0!==n&&n,a=r.url,c=r.ssl,s=void 0===c||c,i=r.server,u=r.subServer,d=r.version,l=void 0===d?"v1.2":d,p=r.parent,f=r.parentId,_=r.resource,E=r.id,S=r.suffix,h=r.method,O=void 0===h?"GET":h,v=r.credentials,T=void 0===v?"include":v,m=r.extension,g=r.params,b=void 0===g?{}:g,P=r.payload,I=r.headers,A=void 0===I?{}:I,w=r.namespace,k=void 0===w?"mini":w,M=r.cleaner,L=void 0===M?function(e){return e}:M,j="mini-session",G="mini-session",F=function(){return!!z&&x.store.getState().userReducer.isMainPage},V=function(){if("sc"===S)return E;if("auth"===_)return f;if(b.shop_id)return b.shop_id;if(P)try{return JSON.parse(P).shop_id}catch(e){}},B=function(){var t=D(N().mark((function t(r){var n,c,d,h,v,g,D,I,w,M,j,G,B,Y,Q,q,W,K,z,X,$,Z,ee,te,re,ne,oe,ae,ce,ie,ue,de,le,pe,fe;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=U().get("CTOKEN"),d=(c=r||{}).token,h=c.version,v=c.user,g=(v=void 0===v?{}:v).id,D=v.type,I=0,w=0,M=0,Y="",Q={},t.next=11,H.getRegion("subaccount"===D,V());case 11:if(q=t.sent,W=d&&"include"===T||!i?{Authorization:"Bearer ".concat(d),"x-shop-region":q}:{},!i&&(i=(0,R.getApiServer)()),a?G=a:(K=[s?"https:/":"http:/",i,u,l,k,p,f,_,E,S].filter(Boolean).join("/"),z=m?"".concat(K,".").concat(m):K,(X=r&&r.user&&r.user.uid)&&(b._uid=X),st&&(b._v=st),n&&(b.csrf_token=n),b._api_source=ct?"sc":"pcmall",B=Object.entries(b).filter((function(e){var t=y(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=y(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),G=[z,B].filter(Boolean).join("?"),$=[k,p,f,_,E,S].filter(Boolean).join("/"),Z=m?"/".concat($,".").concat(m):"/".concat($),Q._uid=X||"",Q._v=st||"",ee=Object.entries(Q).map((function(e){var t=y(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),Y=[Z,ee].join("?")),t.prev=15,!(void 0!==E&&parseInt(E)<=0&&!G.includes("message_shortcuts/group")||void 0!==f&&parseInt(f)<=0)){t.next=19;break}throw new Error;case 19:return te={},re=Date.now(),(ne="POST"===O&&"messages"===_&&!S)&&(oe=Ce({url:Y,method:O,version:st,token:W.Authorization||"",fromID:g,payload:P,timestamp:re}),te={ts:re,"x-v":h||"","x-s":Re(h,oe)}),ae={method:O,credentials:T,headers:at(at(at({},W),te),A),body:P},ce=ne?se:_e,t.next=28,ce(G,ae);case 28:ie=t.sent,I=ie.status,t.t0=I,t.next=204===t.t0?33:404===t.t0?35:452===t.t0?37:500===t.t0?39:502===t.t0?41:43;break;case 33:return ue=null,t.abrupt("break",47);case 35:return ue={message:"Resource not found"},t.abrupt("break",47);case 37:return ue={message:"Tempory Error"},t.abrupt("break",47);case 39:return ue={message:"Internal server error"},t.abrupt("break",47);case 41:return ue={message:"Bad Gateway"},t.abrupt("break",47);case 43:return 200===I&&(w=parseInt(ie.headers.get("total")),M=parseInt(ie.headers.get("per-page"))),t.next=46,ie.json();case 46:ue=t.sent;case 47:if([200,204].includes(I)&&"report_upload"===_&&P&&(de=JSON.parse(P),le=de.vid,performance.mark("REPORT_UPLOAD_".concat(le))),200!==I){t.next=53;break}return pe=ue instanceof Array?e({total:w,perPage:M},_,ue.map((function(e){return L(e,ct)}))):L(ue,ct),o&&F()&&J.dispatch(R.CustomShareEvent.SHARE_API_DATA,at({type:R.ShareDataType.UNREAD},"object"===C(pe)?pe:{res:pe})),ne&&P&&(j=JSON.parse(P).request_id,(0,R.setItem)(j,re)),t.abrupt("return",pe);case 53:if(204!==I){t.next=55;break}return t.abrupt("return",null);case 55:if(!et(I)){t.next=69;break}if([400,404].includes(I),![429,451,491,493].includes(I)){t.next=62;break}throw new(Ze(I))(ue);case 62:if(401!==I){t.next=66;break}x.store.dispatch(rt({resource:_})),t.next=69;break;case 66:throw(fe=new(Ze(I))(ue.message,ue.errors||ue.error_code||ue.errcode,ue.data))&&400===I&&(fe._type_="client"),fe;case 69:t.next=75;break;case 71:throw t.prev=71,t.t1=t.catch(15),I||(t.t1.offlineError=!0),t.t1;case 75:case"end":return t.stop()}}),t,null,[[15,71]])})));return function(e){return t.apply(this,arguments)}}(),!o||F()){t.next=8;break}return t.abrupt("return");case 8:Y=null;try{Y=R.LS.getItem(G,!0)}catch(e){Y=null}if(Y){t.next=14;break}return t.next=13,(0,R.getItem)(j);case 13:Y=t.sent;case 14:return t.abrupt("return",B(Y));case 15:case"end":return t.stop()}}),t)}))),ut.apply(this,arguments)}var dt,lt,pt,ft,_t=function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);var r=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)},Et=I(782),St=I(830),ht=I.n(St),Ot=I(292),vt=I.n(Ot),Tt={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"};dt={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",CHATWS_SOCKET_FAILED:"9034ae776ecbdc29ec67fb0edf78011f"},lt={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",CHATWS_SOCKET_FAILED:"f729b9774aef5b67bfd37afc711bdd3f"},pt="b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127",ft="2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280";var mt,gt={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE"},bt={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},yt={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error"};function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Rt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.__CHANGE_FETCH__||(window.fetch=le(),window.__CHANGE_FETCH__=!0);var Pt,Dt,It,At,wt=function(e){mt=e},Nt=!1,xt=location.host.includes("shopee.cn"),kt=(0,R.checkIsScChat)(),Ut=[],Mt="live"===(0,R.getRuntimeServer)()?dt:lt,Lt=function(){try{var e=performance.getEntriesByName(gt.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(gt.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(gt.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(gt.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(gt.APP_RENDERING,"mark")[0].startTime;Ut.push({id:Mt.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:Mt.LOAD_STATIC,duration:Math.floor(t-e)},{id:Mt.APP_PREPARE,duration:Math.floor(r-t)},{id:Mt.LOGIN_API,duration:Math.floor(n-r)},{id:Mt.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},jt=function(e,t){try{var r=null,n=performance.getEntriesByName(gt.APP_RENDERING,"mark")[0].startTime;switch(e){case bt.WELCOME_PAGE:r=performance.getEntriesByName(gt.RENDER_WELCOME_PAGE,"mark")[0].startTime,Ut.push({id:Mt.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case bt.MESSAGE_LIST:r=performance.getEntriesByName(gt.RENDER_MESSAGE_LIST,"mark")[0].startTime,Ut.push({id:Mt.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case bt.CONVERSATION_LIST:r=performance.getEntriesByName(gt.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Ut.push({id:Mt.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Ut.push(t),_t(Ft,{timeout:2e3})}catch(e){}},Gt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ut.push({id:e,duration:t,extra:r}),_t(Ft,{timeout:2e3})};function Ft(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Ut.length;){var t=Ut.shift(),r=t.id,n=t.duration,o=t.extra;r&&Bt(r,n,o),"live"!==(0,R.getRuntimeServer)()&&Tt[r]&&console.log("|-- 上报阶段: ",Tt[r],", 耗时为: ".concat(n))}Ut.length&&_t(Ft,{timeout:2e3})}var Ht,Vt=function(){if(!Nt){var e=(0,R.getRuntimeServer)(),t="live"===e,r=(0,R.getRuntimeRegion)(),n=(0,R.getRuntimeVersion)();Pt=new Et.MdapSdk({app_name:"minichat",secret_key:t?pt:ft,environment:e,region:r,app_version:n,sample:t?.2:1}),Dt=new(ht())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages"]}),It=new(vt())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),At=new Et.CustomPlugin({}),Pt.use(Dt),Pt.use(It),Pt.use(At),Nt=!0}};function Bt(e,t,r){Nt||Vt();var n={point_id:e,data:{userType:mt,localOrCn:void 0!==Ht?Ht:Ht=xt&&"CN"!==(0,R.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:kt?"seller":"pcmall"}};t&&(n=Ct(Ct({},n),{},{duration:t})),r&&(n.data=Ct(Ct({},n.data),r)),At.sendData(n)}var Yt,Qt=I(455),qt=I.n(Qt),Wt=I(944),Kt=N().mark(Xt),zt=[];Yt=[202,215];var Jt=function(e,t){var r=Yt.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,R.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return le()(o).then(function(){var e=D(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function Xt(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.locale,r="live"===(0,R.getRuntimeServer)()||"live-test"===(0,R.getRuntimeServer)(),n=new(qt())({name:"webchat"}),o={},s.next=6,n.create({locale:t,env:r?"live":"non-live",translation:{resources:zt,collections:Yt}});case 6:if(a=s.sent,o=a.translation,!(0,R.checkEmptyObject)(o)){s.next=15;break}return c=[],Yt.concat(zt).forEach((function(e){c.push(Jt(e,t))})),s.next=13,(0,Wt.all)(c);case 13:s.sent.forEach((function(e){Object.assign(o,e)}));case 15:return s.abrupt("return",o);case 16:case"end":return s.stop()}}),Kt)}var $t,Zt=I(975),er=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},tr=function(e){return e.entityReducer},rr=(0,Zt.createSelector)(tr,(function(e){return e.users})),nr=(0,Zt.createSelector)(tr,(function(e){return e.conversations})),or=(0,Zt.createSelector)(tr,(function(e){return e.agentConversations})),ar=(0,Zt.createSelector)(tr,(function(e){return function(e){return(0,R.checkEmptyObject)(e)?{}:e}(e.messages)})),cr=(0,Zt.createSelector)(tr,(function(e){return e.stickers})),sr=(0,Zt.createSelector)(tr,(function(e){return e.orders})),ir=(0,Zt.createSelector)(tr,(function(e){return e.products})),ur=(0,Zt.createSelector)(tr,(function(e){return e.vouchers})),dr=(0,Zt.createSelector)(tr,(function(e){return e.messageShortcutsGroups})),lr=(0,Zt.createSelector)(tr,(function(e){return e.feedStories})),pr=(0,Zt.createSelector)(tr,(function(e){return e.rateCards})),fr=(0,Zt.createSelector)(tr,(function(e){return e.shops})),_r=(0,Zt.createSelector)(tr,(function(e){return e.contacts})),Er=(0,Zt.createSelector)(nr,or,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return er(r)})),Sr=(0,Zt.createSelector)(ar,(function(e){return er(Object.keys(e).length)}));function hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?hr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}($t||($t={}));const vr=e({},$t.UPDATE_ENTITIES,(function(t,r){var n=r.payload.entities;return Object.entries(n).reduce((function(t,r){var n=y(r,2),o=n[0],a=n[1];return"persist"!==o?("shops"===o&&H.updateShopMap(a),Or(Or({},t),{},e({},o,Or(Or({},t[o]),a)))):Or(Or({},t),{},e({},o,a))}),t)}));var Tr,mr,gr=(0,tt.createActions)((e(Tr={},$t.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),e(Tr,$t.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),e(Tr,$t.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),e(Tr,$t.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),Tr)),br=gr.updateEntities,yr=gr.updateRecord,Rr=gr.deleteRecord,Cr=gr.batchUpdateRecord;function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Pr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Ir=(e(mr={},$t.UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=n.record;return Dr(Dr({},t),{},e({},o,Dr(Dr({},t[o]),{},e({},a,Dr(Dr({},t[o][a]),c)))))})),e(mr,$t.DELETE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=t[o];return delete c[a],Dr(Dr({},t),{},e({},o,c))})),e(mr,$t.BATCH_UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.records,c=n.checkProp,s=Dr({},t[o]);return Object.keys(a).forEach((function(e){(!c||c&&a[e][c]>s[e][c])&&(s[e]=Dr(Dr({},s[e]),a[e]))})),Dr(Dr({},t),{},e({},o,s))})),mr);function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ar(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Nr,xr=(0,tt.handleActions)(wr(wr({},vr),Ir),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},persist:null,vouchers:{},messageShortcuts:{}});!function(e){e.SHOW_MODAL="SHOW_MODAL",e.CLOSE_MODAL="CLOSE_MODAL"}(Nr||(Nr={}));var kr,Ur,Mr=(0,Zt.createSelector)((function(e){return e.modalReducer.show}),(function(e){return e.modalReducer.type}),(function(e,t){return{show:e,type:t}}));function Lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Lr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gr,Fr,Hr=(0,tt.createActions)((e(kr={},Nr.SHOW_MODAL,(function(e){var t=e.type,r=e.title,n=void 0===r?"":r,o=e.content,a=e.actions,c=void 0===a?{}:a,s=e.additions;return{type:t,title:n,content:o,actions:c,additions:void 0===s?{}:s}})),e(kr,Nr.CLOSE_MODAL,(function(){return{}})),kr)),Vr=Hr.showModal,Br=Hr.closeModal,Yr=(0,tt.handleActions)((e(Ur={},Nr.SHOW_MODAL,(function(e,t){var r=t.payload,n=r.type,o=r.title;return{show:!0,type:n,content:r.content,title:o,actions:r.actions,additions:r.additions}})),e(Ur,Nr.CLOSE_MODAL,(function(e){return jr(jr({},e),{},{show:!1})})),Ur),{show:!1,type:"",title:"",content:"",actions:{},additions:{}}),Qr=function(e){return e.unreadCountReducer.shopsUnreadConversationCount},qr=function(e){return e.unreadCountReducer.totalUnreadConversationsCount},Wr={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",RESTART_CONVERSATION:"restartConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"};function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Kr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_UNREAD_COUNT="UPDATE_UNREAD_COUNT",e.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT="UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_SINGLE_SHOP_UNREAD_COUNT="UPDATE_SINGLE_SHOP_UNREAD_COUNT",e.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT="UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_REGION_UNREAD_COUNT="UPDATE_REGION_UNREAD_COUNT"}(Gr||(Gr={}));var Jr=N().mark(nn),Xr=N().mark(on),$r=N().mark(an),Zr=N().mark(cn),en=(0,tt.createActions)((e(Fr={},Gr.UPDATE_UNREAD_COUNT,(function(e){return{type:e.type,conversation:e.conversation,messageQueueUpdate:e.messageQueueUpdate,shopId:e.shopId,shopIds:e.shopIds,source:e.source,count:e.count}})),e(Fr,Gr.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e){return{count:e.count}})),e(Fr,Gr.UPDATE_SINGLE_SHOP_UNREAD_COUNT,(function(e){return{shopId:e.shopId,num:e.num,action:e.action}})),e(Fr,Gr.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT,(function(e){return{shopUnreadCounts:e.shopUnreadCounts}})),Fr)),tn=en.updateUnreadCount,rn=en.updateTotalUnreadConversationsCount;function nn(e,t){return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Wt.put)(yr({name:"conversations",id:e,record:{unread_count:t}}));case 2:case"end":return r.stop()}}),Jr)}function on(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.source,s.prev=1,r=t===R.UnreadSource.PRELOAD,n=t?{_s:t}:{},s.next=6,(0,Wt.call)(it,{shared:!r,parent:"conversation",resource:"unread-count",params:n});case 6:return o=s.sent,a=o.total_unread_count,s.next=10,(0,Wt.put)(rn({count:a}));case 10:return s.next=12,(0,Wt.select)(Bn);case 12:c=s.sent,r&&_m({operation:R.TrackerOperation.IMPRESSION,trackerName:"impressionChatIcon",data:{ctx_url:window.location.href,has_unread_convo:!!a,unread_convo_cnt:a},page:c?"seller_center_chat":"minichat_page"}),s.next=18;break;case 16:s.prev=16,s.t0=s.catch(1);case 18:case"end":return s.stop()}}),Xr,null,[[1,16]])}function an(e){var t,r,n,o,a,c,s,i,u,d,l,p;return N().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,r=t.type,n=t.conversation,o=void 0===n?{}:n,t.shopId,t.shopIds,a=t.messageQueueUpdate,c=t.source,s=t.count,i=o.id,u=o.unread_count,o.shop_id,f.next=4,(0,Wt.select)(qr);case 4:d=f.sent,f.t0=r,f.next=f.t0===Wr.FORWARD_CONVERSATION||f.t0===Wr.CLOSE_CONVERSATION||f.t0===Wr.DELETE_CONVERSATION||f.t0===Wr.UPDATE_CONVERSATION?8:f.t0===Wr.CLEAR_CONVERSATION_COUNT||f.t0===Wr.MARK_AS_READ?14:f.t0===Wr.ACTIVE_CONVERSATION?20:f.t0===Wr.MARK_AS_UNREAD?23:f.t0===Wr.RECEIVE_UNREADABLE_MESSAGE?28:f.t0===Wr.RESTART_CONVERSATION||f.t0===Wr.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT?34:f.t0===Wr.MESSAGE_QUEUE_UPDATE?37:f.t0===Wr.MASS_READ?41:f.t0===Wr.MASS_UNREAD?44:f.t0===Wr.MASS_CLOSE?47:50;break;case 8:if(0===u){f.next=13;break}return f.next=11,(0,Wt.put)(rn({count:d-1}));case 11:return f.next=13,(0,Wt.call)(nn,i,0);case 13:case 19:case 22:case 27:case 33:case 36:case 40:case 43:case 46:case 49:case 50:return f.abrupt("break",51);case 14:if(!(u>0)){f.next=19;break}return f.next=17,(0,Wt.put)(rn({count:d-1}));case 17:return f.next=19,(0,Wt.call)(nn,i,0);case 20:return f.next=22,(0,Wt.put)(rn({count:d+1}));case 23:return f.next=25,(0,Wt.put)(rn({count:d+1}));case 25:return f.next=27,(0,Wt.call)(nn,i,u+1);case 28:if(0!==u){f.next=31;break}return f.next=31,(0,Wt.put)(rn({count:d+1}));case 31:return f.next=33,(0,Wt.call)(nn,i,u+1);case 34:return f.next=36,(0,Wt.call)(on,{source:c});case 37:return p=(l=a).totalIncrease,l.shopsIncrease,f.next=40,(0,Wt.put)(rn({count:d+p}));case 41:return f.next=43,(0,Wt.put)(rn({count:d-s}));case 44:return f.next=46,(0,Wt.put)(rn({count:d+s}));case 47:return f.next=49,(0,Wt.put)(rn({count:d-s}));case 51:case"end":return f.stop()}}),$r)}function cn(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(tn,an);case 2:case"end":return e.stop()}}),Zr)}en.updateSingleShopUnreadCount,en.updateShopsUnreadConversationsCount;const sn=e({},Gr.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e,t){var r=t.payload.count;return zr(zr({},e),{},{totalUnreadConversationsCount:r<0?0:r})}));function un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var dn,ln=[cn],pn=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?un(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},sn),{totalUnreadConversationsCount:0}),fn=function(e){return e.userReducer.loading},_n=function(e){return e.userReducer.currentUserId},En=function(e){return e.userReducer.newbie},Sn=function(e){return e.userReducer.networkStatus},hn=function(e){return e.userReducer.hasVideoPermission},On=function(e){return e.userReducer.hasReplyPermission},vn=function(e){return e.userReducer.hasDeletePermission},Tn=function(e){return e.userReducer.deleteConfigDuration},mn=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},gn=function(e){return e.userReducer.captchaVisible},bn=function(e){return e.userReducer.captchaSignature},yn=function(e){return e.userReducer.resendMessagePayload},Rn=function(e){return e.userReducer.newMessageFlag},Cn=function(e){return(0,Zt.createSelector)(tr,(function(r){return(0,t.denormalize)(e,a,{users:r})}))},Pn=(0,Zt.createSelector)(rr,_n,(function(e,r){return(0,t.denormalize)(r,a,{users:e})||{}})),Dn=(0,Zt.createSelector)(Pn,(function(e){return e&&e.locale})),In=(0,Zt.createSelector)(Pn,(function(e){return!(0,R.checkEmptyObject)(e)&&e.type===R.AccountType.SUBACCOUNT})),An=(0,Zt.createSelector)(Pn,(function(e){return!(0,R.checkEmptyObject)(e)&&e.is_cb})),wn=function(e){return e.userReducer.shopStatisticsMap},Nn=function(e,t){return(0,Zt.createSelector)(wn,(function(r){return r["".concat(e,"-").concat(t)]||{}}))},xn=(0,Zt.createSelector)(Pn,In,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t?void 0:e.shop_id})),kn=(0,Zt.createSelector)(Pn,In,fr,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return r?void 0:(0,t.denormalize)(e.shop_id,p,{shops:n})||{}})),Un=(0,Zt.createSelector)(Pn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.role||""})),Mn=(0,Zt.createSelector)(Pn,(function(e){return e&&e.distribution_status||""})),Ln=function(e){return e.userReducer.isMainPage},jn=function(e){return e.userReducer.curTabFocused},Gn=function(e){return e.userReducer.textBoxHeight},Fn=function(e){return e.userReducer.showConversationDetail},Hn=function(e){return e.userReducer.showChatWindow},Vn=function(e){return e.userReducer.openedMenu},Bn=function(e){return e.userReducer.isScChat},Yn=function(e){return e.userReducer.loginSuccess},Qn=function(e){return e.userReducer.socketSuccess},qn=function(e){return e.userReducer.showEntry},Wn=(0,Zt.createSelector)(Pn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.authorizedShopsCount||0})),Kn=function(e){return e.userReducer.showAutoHangupModal};!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_REQUESTED="CHECK_USER_PERMISSION_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.SEND_FEEDBACK_REQUESTED="SEND_FEEDBACK_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED="UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED="UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED",e.UPDATE_OPENED_MENU="UPDATE_OPENED_MENU",e.SET_CHAT_SOURCE="SET_CHAT_SOURCE",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_SOCKET_SUCCESS_STATUS="UPDATE_SOCKET_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.GET_FEEDBACK_CLASSIFICATION_REQUESTED="GET_FEEDBACK_CLASSIFICATION_REQUESTED",e.GET_CLASSIFICATION_SUCCEED="GET_CLASSIFICATION_SUCCEED",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL"}(dn||(dn={}));var zn,Jn,Xn=I(439).t,$n=N().mark(oo),Zn=N().mark(ao),eo=(0,tt.createActions)(e({},dn.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))),to=eo.blockUserRequested,ro=function(e){return{type:"CONFIRM_MODAL",title:{key:"conversation_detail.workstation.block_fail_modal.title",vars:{username:e}},actions:{confirm:{label:{key:"common.confirm"}}}}},no=function(e,t,r){return{toast:{show:!0,type:e?"fail":"warn",message:e?Xn("common.server_error.warning_tips"):Xn("conversation_detail.".concat(t?"blocked":"unblocked"),{username:r})}}};function oo(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.buyerName,n=t.buyerId,o=t.block,a=t.shopId,c=t.conversationId,i.prev=1,s=o?"PUT":"DELETE",i.next=5,(0,Wt.call)(it,{method:s,parent:"user",resource:"blocks",id:n,params:{shop_id:a}});case 5:return i.next=7,(0,Wt.put)(Kp(no(!1,o,r)));case 7:return i.next=9,(0,Wt.put)(yr({name:"users",id:n,record:{is_blocked:o}}));case 9:return i.next=11,(0,Wt.put)(yr({name:"conversations",id:c,record:{is_blocked:o}}));case 11:case 18:i.next=22;break;case 13:if(i.prev=13,i.t0=i.catch(1),!(i.t0 instanceof Ve&&o&&i.t0.handler().message)){i.next=20;break}return i.next=18,(0,Wt.put)(Vr(ro(r)));case 20:return i.next=22,(0,Wt.put)(Kp(no(!0)));case 22:case"end":return i.stop()}}),$n,null,[[1,13]])}function ao(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(to,oo);case 2:case"end":return e.stop()}}),Zn)}function co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function so(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?co(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var io=N().mark(So),uo=N().mark(ho),lo=(0,tt.createActions)((e(zn={},dn.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),e(zn,dn.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),e(zn,dn.GET_GUIDE_FAILED,(function(){return{}})),zn)),po=lo.getGuideRequested,fo=lo.getGuideSucceeded,_o=lo.getGuideFailed,Eo="newbie-completed-info";function So(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.userId,n=t.version,c.prev=1,c.next=4,(0,R.getItem)(Eo);case 4:if(c.sent!=="".concat(r,"-").concat(n)){c.next=7;break}return c.abrupt("return",[]);case 7:return c.next=9,(0,Wt.call)(it,{resource:"newbie",suffix:"uncompleted"});case 9:return o=c.sent,a=o.newbie,c.next=13,(0,Wt.put)(fo({newbie:a}));case 13:if(!(a.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){c.next=17;break}return c.next=17,(0,R.setItem)(Eo,"".concat(r,"-").concat(n));case 17:return c.abrupt("return",a);case 20:return c.prev=20,c.t0=c.catch(1),c.next=24,(0,Wt.put)(_o());case 24:return c.abrupt("return",[]);case 25:case"end":return c.stop()}}),io,null,[[1,20]])}function ho(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(po,So);case 2:case"end":return e.stop()}}),uo)}const Oo=(e(Jn={},dn.GET_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return so(so({},e),{},{newbie:r})})),e(Jn,dn.GET_GUIDE_FAILED,(function(e){return so(so({},e),{},{newbie:[]})})),Jn);var vo;function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?To(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var go=N().mark(Io),bo=N().mark(Ao);function yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ro=(0,tt.createActions)((e(vo={},dn.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),e(vo,dn.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),vo)),Co=Ro.updateGuideRequested,Po=Ro.updateGuideSucceeded;function Do(e,t){var r,n=ue(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return yo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,c=a.children.findIndex((function(e){return e.id===t}));if(-1!==c){a.children.splice(c,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function Io(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.newbieId,o.next=3,(0,Wt.select)(En);case 3:return r=o.sent,n=Do(r,t),o.next=7,(0,Wt.put)(Po({newbie:n}));case 7:return o.prev=7,o.next=10,(0,Wt.call)(it,{method:"PUT",resource:"newbie",id:t});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),go,null,[[7,12]])}function Ao(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Co,Io);case 2:case"end":return e.stop()}}),bo)}const wo=e({},dn.UPDATE_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return mo(mo({},e),{},{newbie:r})}));var No,xo,ko=I(550),Uo=I.n(ko),Mo=I(947),Lo=I.n(Mo);function jo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Go(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fo=N().mark(sa),Ho=N().mark(ia),Vo=N().mark(ua),Bo=N().mark(la),Yo=N().mark(pa),Qo=N().mark(fa),qo=(0,tt.createActions)((e(No={},dn.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),e(No,dn.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),e(No,dn.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),e(No,dn.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),e(No,dn.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),e(No,dn.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(No,dn.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(No,dn.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){var t=e.shouldShowConversationDetail,r=e.needMark;return{shouldShowConversationDetail:t,needMark:void 0!==r&&r}})),e(No,dn.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e){return{shouldShowConversationDetail:e.shouldShowConversationDetail}})),e(No,dn.UPDATE_OPENED_MENU,(function(e){return{openedMenu:e}})),e(No,dn.SET_CHAT_SOURCE,(function(e){return{isScChat:e.isScChat}})),e(No,dn.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),e(No,dn.UPDATE_SOCKET_SUCCESS_STATUS,(function(e){return{socketSuccess:e.socketSuccess}})),e(No,dn.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),No)),Wo=qo.updateUserRequested,Ko=qo.updateNetworkStatus,zo=qo.fetchUserOrderDetailRequested,Jo=qo.fetchUserOrderDetailSucceeded,Xo=qo.updateShowAutoHangupModal,$o=qo.updateChatWindowStatus,Zo=qo.updateChatWindowStatusSucceeded,ea=qo.updateConversationDetailStatus,ta=qo.updateConversationDetailStatusSucceeded,ra=qo.updateOpenedMenu,na=qo.setChatSource,oa=qo.updateLoginSuccessStatus,aa=qo.updateSocketSuccessStatus,ca=qo.updateChatEntryStatus;function sa(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.status,r.prev=1,r.next=4,(0,Wt.call)(it,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:t})});case 4:if(!(0,R.checkIsScChat)()||"working"!==t){r.next=9;break}return r.next=9,(0,Wt.put)(yv({event_time:(Date.parse(new Date+"")/1e3).toString(),url:window.location.href}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,(0,Wt.put)(Kp({error:r.t0}));case 15:case"end":return r.stop()}}),Fo,null,[[1,11]])}function ia(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,a.prev=1,a.next=4,(0,Wt.call)(it,{parent:"users",parentId:r,resource:"get_user_shop_statistics_info",params:{shop_id:n}});case 4:return o=a.sent,a.next=7,(0,Wt.put)(Jo({userId:r,shopId:n,data:o}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),Ho,null,[[1,9]])}function ua(){var e,t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Wt.select)(fs);case 2:if(!(e=a.sent)){a.next=8;break}if(t=e.status,r=e.id,n=e.unread_count,o=e.latest_message_id,!("closed"!==t&&n>0)){a.next=8;break}return a.next=8,(0,Wt.put)($s({conversationId:r,isRead:!0,latestMessageId:o}));case 8:case"end":return a.stop()}}),Vo)}var da=!0;function la(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.shouldShowWindow,r.next=3,(0,Wt.put)(Zo({shouldShowWindow:t}));case 3:if(!t){r.next=15;break}return window.CsChat&&window.CsChat.minimizeCsChatWindow&&window.CsChat.minimizeCsChatWindow(),r.next=7,(0,Wt.call)(ua);case 7:if(!da){r.next=13;break}return r.next=10,(0,Wt.spawn)(Q_);case 10:return r.next=12,(0,Wt.call)(Ad,{payload:{direction:"reset"}});case 12:da=!1;case 13:return r.next=15,Uo().call(Lo().handleNewConversationMessageQueue());case 15:case"end":return r.stop()}}),Bo)}function pa(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowConversationDetail,n=t.needMark,o.next=3,(0,Wt.put)(ta({shouldShowConversationDetail:r}));case 3:if(!n||!r){o.next=6;break}return o.next=6,(0,Wt.call)(ua);case 6:case"end":return o.stop()}}),Yo)}function fa(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Wo,sa);case 2:return e.next=4,(0,Wt.takeEvery)(zo,ia);case 4:return e.next=6,(0,Wt.takeEvery)($o,la);case 6:return e.next=8,(0,Wt.takeEvery)(ea,pa);case 8:case"end":return e.stop()}}),Qo)}const _a=(e(xo={},dn.UPDATE_NETWORK_STATUS,(function(e,t){var r=t.payload.networkStatus;return Go(Go({},e),{},{networkStatus:r})})),e(xo,dn.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(t,r){var n=r.payload,o=n.userId,a=n.shopId,c=n.data,s="".concat(o,"-").concat(a),i=t.shopStatisticsMap;return Go(Go({},t),{},{shopStatisticsMap:Go(Go({},i),{},e({},s,c))})})),e(xo,dn.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e,t){var r=t.payload.showAutoHangupModal;return Go(Go({},e),{},{showAutoHangupModal:r})})),e(xo,dn.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowWindow;return Go(Go({},e),{},{showChatWindow:r})})),e(xo,dn.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowConversationDetail;return Go(Go({},e),{},{showConversationDetail:r})})),e(xo,dn.UPDATE_OPENED_MENU,(function(e,t){var r=t.payload.openedMenu;return Go(Go({},e),{},{openedMenu:r})})),e(xo,dn.SET_CHAT_SOURCE,(function(e,t){var r=t.payload.isScChat;return Go(Go({},e),{},{isScChat:r})})),e(xo,dn.UPDATE_LOGIN_SUCCESS_STATUS,(function(e,t){var r=t.payload.loginSuccess;return Go(Go({},e),{},{loginSuccess:r})})),e(xo,dn.UPDATE_SOCKET_SUCCESS_STATUS,(function(e,t){var r=t.payload.socketSuccess;return Go(Go({},e),{},{socketSuccess:r})})),e(xo,dn.UPDATE_CHAT_ENTRY_STATUS,(function(e,t){var r=t.payload.showEntry;return Go(Go({},e),{},{showEntry:r})})),xo);var Ea,Sa,ha=I(171),Oa=I.n(ha);function va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ta(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?va(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ma,ga=N().mark(xa),ba=N().mark(Ua),ya=N().mark(ja),Ra=N().mark(Ga),Ca=N().mark(Fa);ma=(0,R.checkIsScChat)();var Pa=(0,tt.createActions)((e(Ea={},dn.LOGIN_REQUESTED,(function(){return{}})),e(Ea,dn.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),e(Ea,dn.LOGOUT_REQUESTED,(function(){return{}})),e(Ea,dn.LOGOUT_SUCCEEDED,(function(){return{}})),e(Ea,dn.FORCE_LOGOUT_REQUESTED,(function(){return{}})),Ea)),Da=Pa.loginRequested,Ia=Pa.loginSucceeded,Aa=Pa.logoutRequested,wa=Pa.logoutSucceeded,Na=Pa.forceLogoutRequested;function xa(e){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Wt.call)(R.getItem,e);case 2:if(t.sent){t.next=6;break}return t.next=6,(0,Wt.call)(R.setItem,e,Oa()());case 6:case"end":return t.stop()}}),ga)}var ka=function(e){return e instanceof Ge?"InternalServerError":e instanceof Fe?"Forbidden":e instanceof Me?"Unauthoried":"Other"};function Ua(){var e,t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,R.getTranslationLocale)((0,R.getRuntimeLocale)()),r.next=3,(0,Wt.call)(Xt,{locale:e});case 3:return t=r.sent,r.next=6,(0,Wt.call)(R.changeLanguage,e,t);case 6:case"end":return r.stop()}}),ba)}var Ma=N().mark((function e(t){var r,n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,R.getTranslationLocale)(t),e.prev=1,e.next=4,(0,Wt.call)(Xt,{locale:n});case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,(0,Wt.call)(Xt,{locale:(0,R.getTranslationLocale)((0,R.getRuntimeLocale)())});case 11:r=e.sent;case 12:return e.next=14,(0,Wt.call)(R.changeLanguage,n,r);case 14:return e.next=16,(0,Wt.call)(R.updateTimeLocale,(0,R.getServiceLocale)(t));case 16:case"end":return e.stop()}}),e,null,[[1,7]])})),La=N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.call)(Ua);case 2:return e.next=4,(0,Wt.put)(ca({showEntry:!0}));case 4:return e.next=6,(0,Wt.put)(oa({loginSuccess:!1}));case 6:Gt(Mt.LOGIN_FAILED,0,{type:ka(t)});case 7:case"end":return e.stop()}}),e)}));function ja(e,t){var r,n,o,a,c,s,i,u,d,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,r=t.godToken,n=e.user,o=e.is_ccu_grey,a=n.id,c=n.type,s=n.locale,i=n.distribution_status,u=c===R.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||u&&"working"===i&&(window.__WEBCHAT_LOGIN__=!0),p.next=8,(0,Wt.call)(Ma,s||"en");case 8:return performance.mark("APP_RENDERING"),Lt(),wt(c),im(n),p.next=14,(0,Wt.put)(Ko({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){x.store.dispatch(Ko({networkStatus:"online"}))})),window.addEventListener("offline",(function(){x.store.dispatch(Ko({networkStatus:"offline"}))})),p.next=18,(0,Wt.put)(oa({loginSuccess:!0}));case 18:return p.next=20,(0,Wt.put)(ca({showEntry:!0}));case 20:return d=T("users",n),l=d.entities,p.next=23,(0,Wt.put)(br({entities:l}));case 23:return!r&&J.connect(),ma&&J.dispatch(R.CustomShareEvent.CALC_CONNECTIONS),p.next=27,(0,Wt.put)(Ia({currentUserId:a}));case 27:return u||!r&&!o&&bT.connect(),p.next=30,(0,Wt.put)($a());case 30:return p.next=32,(0,Wt.spawn)(xa,"device_id");case 32:if(u){p.next=35;break}return p.next=35,(0,Wt.call)(Ch,mh({shopId:n.shop_id}));case 35:p.next=41;break;case 37:return p.prev=37,p.t0=p.catch(0),p.next=41,(0,Wt.call)(La,p.t0);case 41:return p.prev=41,p.finish(41);case 43:case"end":return p.stop()}}),ya,null,[[0,37,41,43]])}function Ga(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,performance.mark("APP_PREPARED"),e="",(t={method:"POST",subServer:"coreapi",resource:"login"}).params={source:ma?"sc":"pcmall"},((0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)())&&(t.parent="cbsc"),n.next=8,(0,Wt.call)(it,t);case 8:return r=n.sent,performance.mark("LOGIN_API_RESPONSED"),n.next=12,(0,R.setItem)("mini-session",r);case 12:return R.LS.setItem("mini-session",JSON.stringify(r)),n.abrupt("return",{session:r,params:{godToken:e}});case 16:return n.prev=16,n.t0=n.catch(0),n.next=20,(0,Wt.call)(La,n.t0);case 20:return n.prev=20,n.finish(20);case 22:case"end":return n.stop()}}),Ra,null,[[0,16,20,22]])}function Fa(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeLatest)(Da,Ga);case 2:return e.next=4,(0,Wt.takeLatest)(Aa,Fc);case 4:return e.next=6,(0,Wt.takeLatest)(Na,Gc);case 6:case"end":return e.stop()}}),Ca)}const Ha=(e(Sa={},dn.LOGIN_SUCCEEDED,(function(e,t){var r=t.payload.currentUserId;return Ta(Ta({},e),{},{currentUserId:r})})),e(Sa,dn.LOGOUT_SUCCEEDED,(function(e){return Ta(Ta({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),Sa);var Va,Ba,Ya,Qa=I(241),qa=I.n(Qa),Wa=N().mark(tc),Ka=N().mark(rc);function za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ja(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?za(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Ya=(0,R.checkIsScChat)();var Xa=(0,tt.createActions)((e(Va={},dn.CHECK_USER_PERMISSION_REQUESTED,(function(){return{}})),e(Va,dn.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),e(Va,dn.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),Va)),$a=Xa.checkUserPermissionRequested,Za=Xa.checkUserPermissionSucceeded,ec=Xa.updateDelPermission;function tc(){var e,t,r,n,o,a,c,s,i,u;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return e={hasVideoPermission:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0},d.prev=1,d.next=4,(0,Wt.call)(it,{subServer:"coreapi",parent:"user",resource:"global_config"});case 4:return t=d.sent,d.next=7,(0,Wt.select)(Pn);case 7:r=d.sent,n=r.id,o=r.type,a=r.country,e.hasVideoPermission=t.video,e.hasReplyPermission=t.reply,"seller"===o&&(c=t.delete_msg||{},e.deleteConfigVersion=c.config_version,s=(c.region_config||[]).find((function(e){return e.region===a})),s&&s.duration&&(e.hasDeletePermission=!0,e.deleteConfigDuration=s.duration)),i=null,u="live"===(0,R.getRuntimeServer)(),(t.privacy&&Ya||!u)&&(i=new(qa())({projectId:"983743070955270818",env:"live",uid:n})),u||(window.CreateNewFullStorySdk=function(){return[n,i]},window.GetNecessaryInfo=function(){return{user:r}}),d.next=20;break;case 18:d.prev=18,d.t0=d.catch(1);case 20:return d.next=22,(0,Wt.put)(Za(Ja({},e)));case 22:case"end":return d.stop()}}),Wa,null,[[1,18]])}function rc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)($a,tc);case 2:case"end":return e.stop()}}),Ka)}const nc=(e(Ba={},dn.CHECK_USER_PERMISSION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.hasVideoPermission,o=r.hasReplyPermission,a=r.hasDeletePermission,c=r.deleteConfigDuration,s=r.deleteConfigVersion;return Ja(Ja({},e),{},{hasVideoPermission:n,hasReplyPermission:o,hasDeletePermission:a,deleteConfigDuration:c,deleteConfigVersion:s})})),e(Ba,dn.UPDATE_DEL_PERMISSION,(function(e,t){var r=t.payload,n=r.hasDeletePermission,o=r.deleteConfigDuration,a=r.deleteConfigVersion;return Ja(Ja({},e),{},{hasDeletePermission:n,deleteConfigDuration:o,deleteConfigVersion:a})})),Ba);var oc,ac,cc=N().mark(uc),sc=N().mark(dc),ic=(0,tt.createActions)(e({},dn.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function uc(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.buyerShopId,i.prev=1,i.next=4,(0,Wt.call)(it,{resource:"users",id:r,params:{shop_id:n,need_cache:1,cache_expires:1800}});case 4:a=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),a={id:r,shop_id:o};case 10:return c=T("users",a),s=c.entities,i.next=13,(0,Wt.put)(br({entities:s}));case 13:return i.next=15,(0,Wt.put)(zo({userId:r,shopId:n}));case 15:case"end":return i.stop()}}),cc,null,[[1,7]])}function dc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(ic,uc);case 2:case"end":return e.stop()}}),sc)}function lc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fc=N().mark(vc),_c=N().mark(Tc),Ec=(0,tt.createActions)((e(oc={},dn.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),e(oc,dn.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),e(oc,dn.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{focused:e.focused}})),oc)),Sc=Ec.updateIsMainPage,hc=Ec.updateCurTabFocused,Oc=Ec.updateCurTabFocusedSucceeded;function vc(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.focused)){r.next=5;break}return J.dispatch(R.CustomShareEvent.TAB_FOCUSED),r.next=5,(0,Wt.put)(Sc({isMainPage:!0}));case 5:return r.next=7,(0,Wt.put)(Oc({focused:t}));case 7:case"end":return r.stop()}}),fc)}function Tc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(hc,vc);case 2:case"end":return e.stop()}}),_c)}const mc=(e(ac={},dn.UPDATE_IS_MAIN_PAGE,(function(e,t){var r=t.payload.isMainPage;return pc(pc({},e),{},{isMainPage:r})})),e(ac,dn.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e,t){var r=t.payload.focused;return pc(pc({},e),{},{curTabFocused:r})})),ac);var gc,bc;function yc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?yc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Cc=N().mark(Nc),Pc=N().mark(xc),Dc=(0,tt.createActions)((e(gc={},dn.UPDATE_CAPTCHA_VISIBLE,(function(e){return{visible:e.visible,resendMessagePayload:e.resendMessagePayload}})),e(gc,dn.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),e(gc,dn.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),gc)),Ic=Dc.updateCaptchaVisible,Ac=Dc.updateCaptchaSignature,wc=Dc.updateCaptchaSignatureSucceeded;function Nc(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=e.payload.signature)){a.next=12;break}return a.next=4,(0,Wt.select)(yn);case 4:if(!(r=a.sent)){a.next=12;break}return a.next=8,(0,Wt.select)(Gf(r.messageId));case 8:return n=a.sent,o={message:n,conversationId:r.conversationId},a.next=12,Uo().put(Lo().resendMessageRequested({payload:o}));case 12:return a.next=14,(0,Wt.put)(wc({signature:t}));case 14:case"end":return a.stop()}}),Cc)}function xc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Ac,Nc);case 2:case"end":return e.stop()}}),Pc)}const kc=(e(bc={},dn.UPDATE_CAPTCHA_VISIBLE,(function(e,t){var r=t.payload,n=r.visible,o=r.resendMessagePayload;return Rc(Rc({},e),{},{captchaVisible:n,resendMessagePayload:o})})),e(bc,dn.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e,t){var r=t.payload.signature;return Rc(Rc({},e),{},{captchaSignature:r})})),bc);function Uc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Uc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Lc=(0,tt.createActions)(e({},dn.SET_TEXT_BOX_HEIGHT,(function(e){return e}))).setTextBoxHeight;const jc=e({},dn.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return Mc(Mc({},e),{},{textBoxHeight:r})}));var Gc=N().mark((function e(){var t=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(t.length>0&&void 0!==t[0])||t[0])&&J.close(),e.next=4,(0,Wt.put)(wa());case 4:return e.next=6,(0,Wt.put)(iE());case 6:(0,R.removeItem)("mini-session"),(0,R.removeItem)("mini-sc_redirect");case 8:case"end":return e.stop()}}),e)})),Fc=N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={server:(0,R.getSCApiServer)(),namespace:"",resource:"logout",suffixSlash:!0,params:{SPC_CDS:U().get("SPC_CDS"),SPC_CDS_VER:2}},(0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",e.next=5,(0,Wt.call)(it,t);case 5:return document.location.replace("https://".concat((0,R.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){x.store.dispatch(Ko({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){x.store.dispatch(Ko({networkStatus:"offline"}))})),fe(),e.next=11,(0,Wt.call)(Gc);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.handler?(0,Wt.call)(e.t0.handler):console.error("[Logout Failed] ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}));function Hc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Hc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bc,Yc,Qc=[ao,ho,Ao,fa,Fa,dc,rc,xc,Tc],qc={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},textBoxHeight:R.MINI_MIN_TEXT_BOX_HEIGHT,showAutoHangupModal:!1,isScChat:!0,openedMenus:"",loginSuccess:!0,socketSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1},Wc=(0,tt.handleActions)(Vc(Vc(Vc(Vc(Vc(Vc(Vc(Vc(Vc({},{}),nc),kc),mc),jc),Oo),wo),_a),Ha),qc),Kc=function(e){return e.conversationReducer.conversationIds},zc=function(e){return e.conversationReducer.readRequestIds},Jc=function(e){return e.conversationReducer.missedReadNoticeCount},Xc=function(e){return e.conversationReducer.inlocation},$c=function(e){return e.conversationReducer.updateTimeNow},Zc=function(e){return e.conversationReducer.currentConversationId},es=function(e){return e.conversationReducer.currentConversationCanRead},ts=function(e){return e.conversationReducer.status},rs=function(e){return e.conversationReducer.direction},ns=(0,Zt.createSelector)(nr,Kc,(function(e,r){return((0,t.denormalize)(r,[s],{conversations:e})||[]).filter(Boolean)})),os=(0,Zt.createSelector)(ns,Zc,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),as=(0,Zt.createSelector)(ns,(function(e){return e.filter((function(e){return e.pinned}))})),cs=(0,Zt.createSelector)(ns,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),ss=(0,Zt.createSelector)(ns,Zc,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),is=(0,Zt.createSelector)(ns,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),us=function(e){return e.conversationReducer.keyword},ds=function(e){return e.conversationReducer.filter},ls=(0,Zt.createSelector)(ds,ns,os,as,cs,ss,(function(e,t,r,n,o,a){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:a}[e]})),ps=(0,Zt.createSelector)(ls,(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})).filter((function(e){return void 0===e.faking}))})),fs=(0,Zt.createSelector)(ns,Zc,In,Xc,rr,nr,(function(e,r,n,o,c,i){var u=e.find((function(e){return e.id===r}))||{};if(o&&!u.id&&(u=(0,t.denormalize)(r,s,{conversations:i})||{}),!n&&u.lack){var d=u.to_id,l=(0,t.denormalize)(d,a,{users:c})||{},p={to_shop_id:l.shop_id,to_status:l.status,to_name:l.name||"-",to_avatar:l.avatar};return Object.assign(u,p)}return u})),_s=(0,Zt.createSelector)(fs,(function(e){return(e||{}).to_id||null})),Es=(0,Zt.createSelector)(fs,fr,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),Ss=(0,Zt.createSelector)(Es,(function(e){return(null==e?void 0:e.country)||"SG"})),hs=(0,Zt.createSelector)(fs,(function(e){return e.shop_id})),Os=(0,Zt.createSelector)(fs,(function(e){return e.to_id})),vs=(0,Zt.createSelector)(fs,(function(e){return e.status})),Ts=(0,Zt.createSelector)(fs,(function(e){return e.auto_translation})),ms=(0,Zt.createSelector)(fs,(function(e){return e.max_general_option_hide_time})),gs=function(e){return(0,Zt.createSelector)(nr,(function(r){return(0,t.denormalize)(e,s,{conversations:r})||{}}))},bs=function(e){return(0,Zt.createSelector)(gs(e),(function(e){return e.shop_id}))},ys=function(e){return(0,Zt.createSelector)(ns,(function(t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean)}))},Rs=(0,Zt.createSelector)(fs,(function(e){return(e||{}).shop_id||null})),Cs=(0,Zt.createSelector)(rr,fs,(function(e,r){return r?(0,t.denormalize)(r.to_id,a,{users:e}):{}})),Ps=(0,Zt.createSelector)(fs,(function(e){return(e||{}).to_shop_id||null})),Ds=function(e){return e.conversationReducer.results},Is=function(e){return e.conversationReducer.searchStatus},As=(0,Zt.createSelector)(fs,(function(e){return e.translationAccess})),ws=function(e){return e.conversationReducer.listsHash},Ns=function(e){return e.conversationReducer.conversationBeenDeleted},xs=(0,Zt.createSelector)(fs,(function(e){return(e||{}).to_name})),ks=function(e){return e.conversationReducer.access},Us=function(e){return e.conversationReducer.isNavigateToUnreadMessage},Ms=function(e){return e.conversationReducer.navigateToUnreadMessageId},Ls=function(e){return e.conversationReducer.pendingOffersCount},js=(0,Zt.createSelector)(fs,Ls,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),Gs=function(e){return(0,Zt.createSelector)(gs(e),Ls,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0}))},Fs=function(e){return(0,Zt.createSelector)(bs(e),fr,(function(e,r){var n=(0,t.denormalize)(e,p,{shops:r})||{};return(null==n?void 0:n.country)||"SG"}))};!function(e){e.DELETE_CONVERSATION_REQUESTED="DELETE_CONVERSATION_REQUESTED",e.DELETE_CONVERSATION_SUCCEEDED="DELETE_CONVERSATION_SUCCEEDED",e.GET_CONVERSATION_DETAIL_REQUESTED="GET_CONVERSATION_DETAIL_REQUESTED",e.FAKE_CONVERSATION_SUCCEEDED="FAKE_CONVERSATION_SUCCEEDED",e.FETCH_CONVERSATIONS_REQUESTED="FETCH_CONVERSATIONS_REQUESTED",e.FETCH_CONVERSATIONS_SUCCEEDED="FETCH_CONVERSATIONS_SUCCEEDED",e.UPDATE_FETCH_CONVERSATIONS_STATUS="UPDATE_FETCH_CONVERSATIONS_STATUS",e.UPDATE_FETCH_CONVERSATIONS_DIRECTION="UPDATE_FETCH_CONVERSATIONS_DIRECTION",e.UPDATE_CONVERSATION_TIMESTAMP="UPDATE_CONVERSATION_TIMESTAMP",e.UPDATE_CONVERSATION_FILTER="UPDATE_CONVERSATION_FILTER",e.FORWARD_CONVERSATION_REQUESTED="FORWARD_CONVERSATION_REQUESTED",e.MASS_FORWARD_CONVERSATION_REQUESTED="MASS_FORWARD_CONVERSATION_REQUESTED",e.MARK_MESSAGES_REQUESTED="MARK_MESSAGES_REQUESTED",e.MARK_MESSAGES_SUCCEEDED="MARK_MESSAGES_SUCCEEDED",e.UPDATE_READ_REQUEST_DATA="UPDATE_READ_REQUEST_DATA",e.PIN_CONVERSATION_REQUESTED="PIN_CONVERSATION_REQUESTED",e.SEARCH_CONVERSATIONS_REQUESTED="SEARCH_CONVERSATIONS_REQUESTED",e.SEARCH_CONVERSATIONS_SUCCEEDED="SEARCH_CONVERSATIONS_SUCCEEDED",e.RESET_SEARCH_PARAMS="RESET_SEARCH_PARAMS",e.UPDATE_EXISTED_RESULT_ID_MAP="UPDATE_EXISTED_RESULT_ID_MAP",e.UPDATE_CURRENT_CONVERSATION_MODE="UPDATE_CURRENT_CONVERSATION_MODE",e.SET_CURRENT_CONVERSATION_MODE="SET_CURRENT_CONVERSATION_MODE",e.SEARCH_BY_COMBINED_API="SEARCH_BY_COMBINED_API",e.TOGGLE_MULTIPLE_SELECTION_MODE="TOGGLE_MULTIPLE_SELECTION_MODE",e.SET_SELECTED_CONVERSATION_LIST="SET_SELECTED_CONVERSATION_LIST",e.UPDATE_SELECTED_CONVERSATION_ID="UPDATE_SELECTED_CONVERSATION_ID",e.SELECTED_CONVERSATIONS_REQUESTED="SELECTED_CONVERSATIONS_REQUESTED",e.CONVERSATION_BATCH_OPERATE_REQUESTED="CONVERSATION_BATCH_OPERATE_REQUESTED",e.SET_CURRENT_CONVERSATION_CAN_READ="SET_CURRENT_CONVERSATION_CAN_READ",e.UPDATE_PREVIOUS_CONVERSATION_ID="UPDATE_PREVIOUS_CONVERSATION_ID",e.CLOSE_CONVERSATION_REQUESTED="CLOSE_CONVERSATION_REQUESTED",e.FETCH_GROUPS_REQUESTED="FETCH_GROUPS_REQUESTED",e.FETCH_MASS_GROUPS_REQUESTED="FETCH_MASS_GROUPS_REQUESTED",e.SHOW_CONVERSATION_REQUESTED="SHOW_CONVERSATION_REQUESTED",e.RESET_CONVERSATION_REQUESTED="RESET_CONVERSATION_REQUESTED",e.SHOW_CONVERSATION_SUCCEEDED="SHOW_CONVERSATION_SUCCEEDED",e.SHOW_NORMAL_CONVERSATION_SUCCEEDED="SHOW_NORMAL_CONVERSATION_SUCCEEDED",e.CHANGE_CONVERSATION_STATUS_REQUESTED="CHANGE_CONVERSATION_STATUS_REQUESTED",e.FETCH_DEGRADE_CONVERSATIONS_DETAIL="FETCH_DEGRADE_CONVERSATIONS_DETAIL",e.CONVERSATION_OPERATE_REQUESTED="CONVERSATION_OPERATE_REQUESTED",e.SEARCH_MORE_RESULTS="SEARCH_MORE_RESULTS",e.SEARCH_MORE_SUCCEED="SEARCH_MORE_SUCCEED",e.SET_SEARCH_STATUS="SET_SEARCH_STATUS",e.UPDATE_ACCESS="UPDATE_ACCESS",e.SHOW_SEARCHED_CONVERSATION_REQUESTED="SHOW_SEARCHED_CONVERSATION_REQUESTED",e.UPDATE_SEARCH_PARAMS="UPDATE_SEARCH_PARAMS",e.LOCATION_MESSAGE="LOCATION_MESSAGE",e.UPDATE_LOCATION_MODE="UPDATE_LOCATION_MODE",e.UPDATE_SYNC_TIME_NOW="UPDATE_SYNC_TIME_NOW",e.SET_CURRENT_CONVERSATION_TYPE="SET_CURRENT_CONVERSATION_TYPE",e.SET_CONVERSATION_BEEN_DELETED="SET_CONVERSATION_BEEN_DELETED",e.MUTE_CONVERSATION_REQUESTED="MUTE_CONVERSATION_REQUESTED",e.SET_NAVIGATE_TO_UNREAD_MESSAGE="SET_NAVIGATE_TO_UNREAD_MESSAGE",e.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID="SET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID="RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.GET_PENDING_OFFERS_COUNT_REQUESTED="GET_PENDING_OFFERS_COUNT_REQUESTED",e.GET_PENDING_OFFERS_COUNT_SUCCEED="GET_PENDING_OFFERS_COUNT_SUCCEED",e.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED="GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED"}(Bc||(Bc={}));var Hs=(0,tt.createActions)((e(Yc={},Bc.DELETE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Yc,Bc.DELETE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(Yc,Bc.GET_CONVERSATION_DETAIL_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Yc,Bc.FAKE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(Yc,Bc.FETCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.direction,r=void 0===t?"reset":t,n=e.noPending;return{direction:r,noPending:void 0!==n&&n,source:e.source}})),e(Yc,Bc.FETCH_CONVERSATIONS_SUCCEEDED,(function(e){var t=e.conversationIds,r=e.conversationIdsMap,n=e.oldestReceivedMessageId,o=e.latestReceivedMessageId,a=e.oldestTimestampNano,c=e.latestTimestampNano,s=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestReceivedMessageId:n,latestReceivedMessageId:o,direction:void 0===s?"reset":s,status:e.status,hasMore:e.hasMore,latestTimestampNano:c,oldestTimestampNano:a,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException}})),e(Yc,Bc.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e){return{status:e.status}})),e(Yc,Bc.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e){return{direction:e.direction}})),e(Yc,Bc.UPDATE_CONVERSATION_TIMESTAMP,(function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}})),e(Yc,Bc.UPDATE_CONVERSATION_FILTER,(function(e){return{filter:e.filter}})),e(Yc,Bc.FORWARD_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,forwardId:e.forwardId}})),e(Yc,Bc.MASS_FORWARD_CONVERSATION_REQUESTED,(function(e){return{type:e.type,forwardId:e.forwardId,conversationIds:e.conversationIds}})),e(Yc,Bc.MARK_MESSAGES_REQUESTED,(function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId}})),e(Yc,Bc.MARK_MESSAGES_SUCCEEDED,(function(e){return{conversationId:e.conversationId,markType:e.markType}})),e(Yc,Bc.UPDATE_READ_REQUEST_DATA,(function(e){return{requestId:e.requestId,requestIds:e.requestIds,count:e.count}})),e(Yc,Bc.PIN_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Yc,Bc.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.filter;return{keyword:r,filter:void 0===n?"all":n}})),e(Yc,Bc.RESET_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchFilter:e.searchFilter}})),e(Yc,Bc.UPDATE_EXISTED_RESULT_ID_MAP,(function(e){return{addedMap:e.addedMap}})),e(Yc,Bc.UPDATE_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode,conversationId:e.conversationId}})),e(Yc,Bc.SET_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode}})),e(Yc,Bc.SEARCH_BY_COMBINED_API,(function(){return{}})),e(Yc,Bc.TOGGLE_MULTIPLE_SELECTION_MODE,(function(e){return{mode:e.mode}})),e(Yc,Bc.SET_SELECTED_CONVERSATION_LIST,(function(e){return{list:e.list}})),e(Yc,Bc.UPDATE_SELECTED_CONVERSATION_ID,(function(e){return{id:e.id,selected:e.selected}})),e(Yc,Bc.SELECTED_CONVERSATIONS_REQUESTED,(function(e){return{type:e.type,id:e.id}})),e(Yc,Bc.CONVERSATION_BATCH_OPERATE_REQUESTED,(function(e){return{type:e.type}})),e(Yc,Bc.SET_CURRENT_CONVERSATION_CAN_READ,(function(e){return{canRead:e.canRead}})),e(Yc,Bc.SHOW_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation,previousId:e.previousId,messageId:e.messageId,sourceInfo:e.sourceInfo}})),e(Yc,Bc.RESET_CONVERSATION_REQUESTED,(function(){return{}})),e(Yc,Bc.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId;return{conversationId:t,previousId:void 0===r?null:r}})),e(Yc,Bc.CHANGE_CONVERSATION_STATUS_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Yc,Bc.FETCH_DEGRADE_CONVERSATIONS_DETAIL,(function(e){return{conversationIds:e.conversationIds}})),e(Yc,Bc.CONVERSATION_OPERATE_REQUESTED,(function(e){return{type:e.type,extra:e.extra}})),e(Yc,Bc.SEARCH_MORE_RESULTS,(function(e){return{type:e.type,reset:e.reset}})),e(Yc,Bc.SEARCH_MORE_SUCCEED,(function(e){return{type:e.type,total:e.total,results:e.results,isFromCache:e.isFromCache,hasMore:e.hasMore,nextOffset:e.nextOffset}})),e(Yc,Bc.SET_SEARCH_STATUS,(function(e){return{type:e.type,status:e.status}})),e(Yc,Bc.UPDATE_ACCESS,(function(e){return{access:e.access}})),e(Yc,Bc.SHOW_SEARCHED_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation}})),e(Yc,Bc.LOCATION_MESSAGE,(function(e){return{msgId:e.msgId,shopId:e.shopId}})),e(Yc,Bc.UPDATE_LOCATION_MODE,(function(e){return{inlocation:e.inlocation}})),e(Yc,Bc.UPDATE_SYNC_TIME_NOW,(function(e){return{timeNow:e.timeNow}})),e(Yc,Bc.SHOW_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId,n=void 0===r?null:r,o=e.type;return{conversationId:t,previousId:n,type:void 0===o?R.ConversationTypeEnum.Normal:o}})),e(Yc,Bc.SET_CURRENT_CONVERSATION_TYPE,(function(e){var t=e.type;return{type:void 0===t?R.ConversationTypeEnum.Normal:t}})),e(Yc,Bc.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e){return{isNavigateToUnreadMessage:e.isNavigateToUnreadMessage}})),e(Yc,Bc.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return{navigateToUnreadMessageId:e.navigateToUnreadMessageId}})),e(Yc,Bc.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(){})),e(Yc,Bc.SET_CONVERSATION_BEEN_DELETED,(function(e){return{conversationBeenDeleted:e.conversationBeenDeleted}})),e(Yc,Bc.MUTE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Yc,Bc.GET_PENDING_OFFERS_COUNT_REQUESTED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId}})),e(Yc,Bc.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}})),e(Yc,Bc.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{records:e.records}})),Yc)),Vs=Hs.deleteConversationRequested,Bs=Hs.deleteConversationSucceeded,Ys=Hs.getConversationDetailRequested,Qs=Hs.fakeConversationSucceeded,qs=Hs.fetchConversationsRequested,Ws=Hs.fetchConversationsSucceeded,Ks=Hs.updateFetchConversationsStatus,zs=Hs.updateFetchConversationsDirection,Js=Hs.updateConversationTimestamp,Xs=Hs.updateConversationFilter,$s=(Hs.forwardConversationRequested,Hs.massForwardConversationRequested,Hs.markMessagesRequested),Zs=Hs.markMessagesSucceeded,ei=Hs.updateReadRequestData,ti=Hs.pinConversationRequested,ri=(Hs.searchConversationsRequested,Hs.resetSearchParams),ni=(Hs.updateExistedResultIdMap,Hs.updateCurrentConversationMode,Hs.setCurrentConversationMode,Hs.searchByCombinedApi,Hs.toggleMultipleSelectionMode,Hs.setSelectedConversationList,Hs.updateSelectedConversationId,Hs.selectedConversationsRequested,Hs.conversationBatchOperateRequested,Hs.setCurrentConversationCanRead),oi=Hs.showConversationRequested,ai=Hs.resetConversationRequested,ci=Hs.showConversationSucceeded,si=Hs.changeConversationStatusRequested,ii=Hs.fetchDegradeConversationsDetail,ui=Hs.conversationOperateRequested,di=Hs.searchMoreResults,li=(Hs.searchMoreSucceed,Hs.setSearchStatus,Hs.updateAccess),pi=Hs.showSearchedConversationRequested,fi=Hs.locationMessage,_i=Hs.updateLocationMode,Ei=Hs.updateSyncTimeNow,Si=Hs.showNormalConversationSucceeded,hi=Hs.setNavigateToUnreadMessage,Oi=Hs.setNavigateToUnreadMessageId,vi=Hs.resetNavigateToUnreadMessageId,Ti=Hs.setConversationBeenDeleted,mi=Hs.muteConversationRequested,gi=Hs.getPendingOffersCountRequested,bi=Hs.getPendingOffersCountSucceed,yi=Hs.getBatchPendingOffersCountSucceed,Ri=N().mark(Pi),Ci=N().mark(Di);function Pi(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,c.prev=1,c.next=4,(0,Wt.select)(gs(t));case 4:return r=c.sent,n=r.shop_id,o=r.pinned,a={method:"PUT",parent:"conversations",parentId:t,resource:o?"unpin":"pin"},n&&(a.payload=JSON.stringify({shop_id:n})),c.next=11,(0,Wt.call)(it,a);case 11:c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(1),c.next=17,(0,Wt.put)(Kp({error:c.t0}));case 17:case"end":return c.stop()}}),Ri,null,[[1,13]])}function Di(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(ti,Pi);case 2:case"end":return e.stop()}}),Ci)}function Ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ai(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ii(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ni(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xi,ki=N().mark(Mi),Ui=(e(xi={},R.ConversationTypeEnum.Agent,"receiveAgentMessageRequested"),e(xi,R.ConversationTypeEnum.Normal,"receiveMessageRequested"),xi);function Mi(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.type,n=Ui[r],o.next=4,(0,Wt.spawn)(Vi,t.request_id);case 4:return o.next=6,Uo().put(Lo()[n]({payload:{message:t}}));case 6:case"end":return o.stop()}}),ki)}function Li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ji(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Li(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gi=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},Fi=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},Hi=N().mark(Vi);function Vi(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,R.getItem)(e);case 2:(t=o.sent)&&(r=new Date,n=+r-+t,Gt(Mt.MESSAGE_SOCKET,n),(0,R.removeItem)(e));case 4:case"end":return o.stop()}}),Hi)}var Bi=I(439).t,Yi=R.MessageTypes.MSG_TYPE_TEXT,Qi="mark_as_unreplied",qi=N().mark(Ki),Wi=N().mark(zi);function Ki(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.prev=1,n.next=4,(0,Wt.select)(bs(t));case 4:return r=n.sent,n.next=7,(0,Wt.call)(it,{method:"DELETE",resource:"conversations",id:t,params:{shop_id:r}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,(0,Wt.put)(Kp({error:n.t0}));case 13:case"end":return n.stop()}}),qi,null,[[1,9]])}function zi(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Vs,Ki);case 2:case"end":return e.stop()}}),Wi)}const Ji=e({},Bc.DELETE_CONVERSATION_SUCCEEDED,(function(t,r){var n=r.payload.conversationId,o=Ai(Ai({},t.conversationIdsMap),{},e({},n,!1)),a=new Set(t.conversationIds);a.delete(n);var c=Array.from(a),s=t.currentConversationId;return Ai(Ai({},t),{},{currentConversationId:s===n?null:s,conversationIds:c,conversationIdsMap:o})}));var Xi,$i=N().mark(ou),Zi=N().mark(au),eu=N().mark(cu),tu=N().mark(su);function ru(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ru(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ou(e){var t,r,n,o,a,c,s,i;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.conversation,r=e.sourceInfo,u.prev=1,u.next=4,(0,Wt.select)(In);case 4:return n=u.sent,o=t.id,a=t.to_id,u.next=8,(0,Wt.call)(it,{method:"POST",parent:"conversation",resource:"enter",payload:JSON.stringify(nu({conversation_id:o,to_id:a},r))});case 8:if(c=u.sent,s=c.faq_session_id,i=c.session_expiry_timestamp,n){u.next=14;break}return u.next=14,(0,Wt.put)(mO({conversationId:o,faqSessionId:s,sessionExpiryTime:i}));case 14:u.next=18;break;case 16:u.prev=16,u.t0=u.catch(1);case 18:case"end":return u.stop()}}),$i,null,[[1,16]])}function au(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,C,P,D,I,A,w,x,k;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,r=t.conversation,n=t.previousId,o=t.messageId,a=t.messageList,t.sourceInfo,N.prev=1,N.next=4,(0,Wt.select)(In);case 4:if(c=N.sent,i=(s=r).id,u=s.lack,c||!u){N.next=12;break}return N.next=9,(0,Wt.call)(wd,{payload:{conversationIds:[i]}});case 9:return N.next=11,(0,Wt.select)(gs(i));case 11:r=N.sent;case 12:if(l=(d=r).faking,p=d.status,f=d.to_id,_=d.shop_id,E=d.latest_message_id,S=d.to_shop_id,h=d.unread_count,O=d.last_read_message_id,_m({shopId:_,operation:R.TrackerOperation.IMPRESSION,trackerName:"impressionChatRoom",data:{convo_userid:f,conversation_id:i}}),c){N.next=24;break}return N.next=17,(0,Wt.call)(R.getItem,"mini-sc_redirect");case 17:return v=N.sent,T={},v&&(m=v.orderId,g=v.productId,b=v.conversationId,y=v.shopId,parseInt(i)===parseInt(b)&&(m?T={order_id:parseInt(m)}:g?T={product_id:parseInt(g)}:y&&(T={shop_id:parseInt(y)}))),N.next=22,(0,Wt.spawn)(ou,{conversation:r,sourceInfo:T});case 22:N.next=26;break;case 24:return N.next=26,(0,Wt.spawn)(ou,{conversation:r});case 26:return N.next=28,(0,Wt.select)(uh);case 28:if((C=N.sent)&&C[_]||!c){N.next=33;break}return N.next=33,(0,Wt.call)(Ch,mh({shopId:_}));case 33:return N.next=35,(0,Wt.put)(ic({userId:f,shopId:_,buyerShopId:S}));case 35:return N.next=37,(0,Wt.put)(ci({conversationId:i,previousId:n}));case 37:return N.next=39,(0,Wt.put)(vi());case 39:return P="number"==typeof h&&h>0&&!o,N.next=42,(0,Wt.put)(hi({isNavigateToUnreadMessage:P}));case 42:return N.next=44,Uo().put(Lo().fetchMessagesRequested({payload:{conversationId:i,messageId:o||(P?O:void 0),direction:o||P?"around":"older",messageList:a,reset:!0}}));case 44:return N.next=46,(0,Wt.put)(gi({shopId:_,buyerId:f}));case 46:return N.next=48,Uo().call(Lo().handleCurrentConversationChange({payload:i}));case 48:if(D=N.sent,!(!l&&"closed"!==p&&h>0||D)){N.next=54;break}return I=D||E,N.next=54,(0,Wt.put)($s({conversationId:i,isRead:!0,latestMessageId:I}));case 54:if(A={},!c){N.next=63;break}return N.next=58,(0,Wt.call)(Np,{payload:{shopId:_}});case 58:return w=N.sent,x=w.auth_names,k=void 0===x?[]:x,N.next=63,(0,Wt.put)(li({access:k}));case 63:return N.next=65,(0,Wt.select)(rp(_));case 65:if(A=N.sent){N.next=70;break}return N.next=69,(0,Wt.call)(Sp,{payload:{shopId:_}});case 69:A=N.sent;case 70:return N.next=72,(0,Wt.put)(yr({name:"shops",id:_,record:nu({},A)}));case 72:return N.next=76,Uo().put(Lo().messageSyncUpdate({payload:{conversation:r}}));case 76:return N.next=78,(0,Wt.put)(Ti({conversationBeenDeleted:!1}));case 78:N.next=83;break;case 80:N.prev=80,N.t0=N.catch(1),console.log("*** Show Conversation Failed: ",N.t0);case 83:case"end":return N.stop()}}),Zi,null,[[1,80]])}function cu(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=e.payload).type,r=t.conversationId,n=t.previousId,o.next=4,(0,Wt.put)(Si({conversationId:r,previousId:n}));case 4:case"end":return o.stop()}}),eu)}function su(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeLatest)(oi,au);case 2:return e.next=4,(0,Wt.takeEvery)(ci,cu);case 4:case"end":return e.stop()}}),tu)}const iu=(e(Xi={},Bc.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationId;return r.previousId,nu(nu({},e),{},{currentConversationId:n})})),e(Xi,Bc.RESET_CONVERSATION_REQUESTED,(function(e){return nu(nu({},e),{},{currentConversationId:null})})),e(Xi,Bc.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e,t){var r=t.payload.isNavigateToUnreadMessage;return nu(nu({},e),{},{isNavigateToUnreadMessage:r})})),e(Xi,Bc.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e,t){var r=t.payload.navigateToUnreadMessageId;return nu(nu({},e),{},{navigateToUnreadMessageId:r})})),e(Xi,Bc.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return nu(nu({},e),{},{navigateToUnreadMessageId:""})})),Xi),uu=e({},Bc.UPDATE_CONVERSATION_FILTER,(R.ConversationTypeEnum.Normal,function(e,t){var r=t.payload.filter;return Ai(Ai({},e),{},{filter:r})}));function du(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?du(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):du(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pu,fu=["id","name","region","shop_id","sold","stock","status","original_price","actual_price","image","image_hash","promotion_label","raw_discount"],_u={region:"country",status:"status",original_price:"original_prices",actual_price:"actual_prices",promotion_label:"promotion_label"},Eu={id:"item_id",region:"region",actual_price:"price"},Su=lu(lu({},Eu),{},{original_price:"price_before_discount",image_hash:"thumb_url"}),hu=lu(lu({},Eu),{},{original_price:"price_before_discount",shop_id:"shop_id"}),Ou=lu(lu({},Eu),{},{shop_id:"shop_id"}),vu=lu(lu({},Eu),{},{shop_id:"shop_id",original_price:"hidden_price_display"}),Tu={id:"item_id",name:"name",actual_price:"price"},mu=["asking_price","buyer_id","conversation_id","create_at","discount","id","model_id","model_name","offer_price","product","product_id","product_deleted","products_count","region","shop_id","status","tax_applicable","tax_value","total_price"],gu=["discount","total_price","region","disclaimer"],bu=["product","product_deleted"],yu={asking_price:"asking_price",create_at:"create_at",model_name:"model_name",offer_price:"offer_price",tax_value:"tax_value"},Ru=["claimed","code","country","type","id","is_used","name","expired","usage_progress","stock_out","rule_text","displayed_time","discount_text","show_usage_progress_bar","show_usage_progress_text","status","start_time","end_time","current_usage","total_usage"],Cu={rule_text:"rule_text",displayed_time:"displayed_time",expired:"expired",stock_out:"stock_out",discount_text:"discount_text",show_usage_progress_bar:"show_usage_progress_bar",show_usage_progress_text:"show_usage_progress_text"},Pu=I(439).t;function Du(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Iu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Du(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Du(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Au=R.ProductPromotionLabel.SHOW_DISCOUNT,wu=R.ProductPromotionLabel.FLASH_SALES,Nu=R.ProductPromotionLabel.CAMPAIGN,xu=R.ProductPromotionLabel.BUNDLE_DEAL,ku=R.ProductPromotionLabel.ADD_ON_DEAL,Uu=R.ProductPromotionLabel.GIFT_WITH_PURCHASE,Mu=[Au,wu,Nu,xu,ku,Uu],Lu=(e(pu={},R.ProductStatusUsingString.DELETED,R.ProductStatusUsingNumber.DELETED),e(pu,R.ProductStatusUsingString.NORMAL,R.ProductStatusUsingNumber.NORMAL),e(pu,R.ProductStatusUsingString.BANNED,R.ProductStatusUsingNumber.BANNED),e(pu,R.ProductStatusUsingString.SOLD_OUT,R.ProductStatusUsingNumber.SOLD_OUT),e(pu,R.ProductStatusUsingString.DELISTED,R.ProductStatusUsingNumber.DELISTED),pu),ju="???",Gu=function(e,t){if(!e)return e;var r=(0,R.formatPrice)(e,t);return r.includes("NaN")&&(r=r.replace("NaN",ju)),r},Fu=function(e){var t=e.original_price,r=e.actual_price;return(t===r||r.includes(ju))&&(e.original_price=""),e},Hu=function(e){var t={};return fu.forEach((function(r){var n=_u[r];switch(n){case"country":t[r]=e[n];break;case"status":t[r]=Lu[e[n]];break;case"original_prices":case"actual_prices":t[r]=function(e,t){var r=y(e,2),n=r[0],o=r[1];if(n===o)return Gu(n,t);var a=Gu(n,t),c=Gu(o,t);return a.includes(ju)?a:c.includes(ju)?c:"".concat(a," - ").concat(c)}(e[n],e.country);break;case"promotion_label":t[r]=function(e){var t=[];return Mu.forEach((function(r){if(e[r]){var n="common.label.".concat(r);r===Au?t.push({key:r,value:Pu(n,{discount:(0,R.formatDiscount)(e[r])})}):t.push({key:r,value:Pu(n)})}})),t}(e[n]);break;default:t[r]=e[r]}})),Fu(t)},Vu=function(e,t){var r={};return fu.forEach((function(n){var o=Su[n];switch(o){case"item_id":case"thumb_url":r[n]=e[o];break;case"region":r[n]=t;break;case"price_before_discount":case"price":r[n]=Gu(e[o],t);break;default:r[n]=e[n]}})),Fu(r)},Bu=function(e,t,r){var n={};return fu.forEach((function(o){var a=hu[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price_before_discount":case"price":n[o]=Gu(e[a],t);break;default:n[o]=e[o]}})),Fu(n)},Yu=1e5,Qu=function(e,t){var r=e.amount_spent;return e.amount_spent=Gu("".concat(r/Yu),t),e},qu=function(e,t,r){var n={};return fu.forEach((function(o){var a=Ou[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price":n[o]=Gu(e[a],t);break;default:n[o]=e[o]}})),Fu(n)},Wu=function(e,t){var r=e.rule_type,n=e.discount_percentage,o=e.discount_value,a=e.fix_price;if(1===r)e.fix_price=Gu("".concat(a/Yu),t);else if(2===r){var c=n/Yu;"tw"===(t||"SG").toLowerCase()&&(c=10-c/10,Number.isInteger(c)||(c=c.toFixed(1))),e.discount_percentage=c}else e.discount_value=Gu("".concat(o/Yu),t);return e},Ku=function(e,t,r){var n={};return fu.forEach((function(o){var a=vu[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"hidden_price_display":n[o]=(0,R.transPrice)(e[a],t);break;case"price":n[o]=Gu("".concat(e[a]/Yu),t);break;default:n[o]=e[o]}})),Fu(n)},zu=function(e){var t={};return fu.forEach((function(r){var n,o=Tu[r];switch(o){case"item_id":t[r]=e[o];break;case"name":t[r]=null!=e&&null!==(n=e.model)&&void 0!==n&&n.model_name?e.model.model_name:e[o];break;case"price":var a,c=null!=e&&null!==(a=e.model)&&void 0!==a&&a.price?e.model.price:e[o];t[r]=Gu(c,e.region);break;default:t[r]=e[r]}})),Fu(t)},Ju=function(e){var t=e.model_name;return t&&t.includes(",")&&(e.model_name=t.replace(/,/g," · ")),e},Xu=function(e,t,r,n,o,a){var c={};return gu.forEach((function(t){switch(t){case"discount":c[t]=function(e,t,r){var n=e.offer_price,o=e.asking_price,a=Number(n)/Number(o);if(function(e,t){return e&&(0,R.isVisitingCNSC)()||"TW"===(null==t?void 0:t.toUpperCase())}(t,r)){var c=(10*a).toFixed(a<.05?2:1),s=Number.isInteger(Number(c))?Number.parseInt(c):c;return"".concat(s,"折")}var i=(100*(1-a)).toFixed(1),u=Number.parseInt(i),d=[0,100].includes(u)?u:i;return"".concat(d).concat(Pu("message.offer.discount"))}(e,n,r);break;case"total_price":c[t]=Gu(function(e){var t=e.offer_price,r=e.tax_value,n=e.products_count;return((Number(t)-Number(r))*n).toString()}(e),r);break;case"region":c[t]=r;break;case"disclaimer":c[t]=function(e,t){var r=e.offer_disclaimer;return(r.find((function(e){return(0,R.getTranslationLocale)(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}))||r.find((function(e){return"en"===e.language}))||{}).disclaimer}(e,a)}})),bu.forEach((function(t){switch(t){case"product":c[t]=Iu(Iu({},o),{},{original_price:"",actual_price:Gu(e.asking_price,r)});break;case"product_deleted":c[t]=function(e){var t=e.id,r=e.status;return!(!t||r!==R.ProductStatusUsingNumber.DELETED)}(o)}})),mu.forEach((function(n){if(!gu.includes(n)&&!bu.includes(n)){var o=yu[n];switch(o){case"asking_price":case"offer_price":case"tax_value":c[n]=Gu(e[o],r);break;case"create_at":c[n]=(0,R.getFormattedTime)(e[o]);break;case"model_name":c[n]=function(e,t){if(t&&t.includes(",")){var r="detail"===e?" · ":" / ";return t.replace(/,/g,r)}return t}(t,e[o]);break;default:c[n]=e[n]}}})),c},$u="message.voucher.rule",Zu=function(e,t){return(0,R.formatPrice)(e,t,{withUnit:e>=1e4})},ed=function(e){var t=e.country,r=e.min_basket_size,n=e.reward.max_capped_amount,o=Zu(r,t),a=Pu("".concat($u,".min_spend"),{spend:o});return"number"==typeof n&&(a=Pu("".concat($u,".min_spend_max_cap"),{spend:o,cap:Zu(n,t)})),a},td=function(e){var t=e.country,r=e.reward,n=r.value,o=r.type,a=r.discount_type===R.DiscountType.PERCENTAGE?"".concat(n,"%").concat(" "+Pu("common.label.off")):(0,R.formatPrice)(n,t);return o===R.RewardType.COIN_CASHBACK&&(a="".concat(a," ").concat(Pu("conversation_detail.workstation.voucher_panel.coins_cashback"))),a},rd=function(e){return e.status===R.VoucherStatus.FINISHED},nd=function(e){return e.current_usage>=e.total_usage},od=function(e,t){var r=!t&&rd(e),n=e.status,o=e.start_time,a=e.end_time;return Pu("".concat("conversation_detail.workstation.voucher_panel",".").concat(r?R.VoucherStatus.ONGOING:n,"_time"),{time:n===R.VoucherStatus.SCHEDULED?(0,R.getFormattedTime)(o,"MM.DD.YYYY h:mm"):(0,R.getFormattedTime)(a,"MM.DD.YYYY")})},ad=function(e,t){var r=rd(e),n=nd(e),o=e.is_used,a=e.usage_progress,c=e.country,s=o||r||n;return(a>=50||"id"===c.toLowerCase()&&(t||a>=25))&&!s},cd=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},n=rd(e),o=nd(e);return Ru.forEach((function(a){switch(Cu[a]){case"rule_text":r[a]=ed(e);break;case"displayed_time":r[a]=od(e,t);break;case"expired":r[a]=n;break;case"stock_out":r[a]=o;break;case"discount_text":r[a]=td(e);break;case"show_usage_progress_bar":r[a]=ad(e,!0);break;case"show_usage_progress_text":r[a]=ad(e,!1);break;default:r[a]=e[a]}})),r},sd=function(e,t){var r=t.expired,n=t.stockOut,o=Iu({},e);return r?(o.status="finished",{status:"finished",expired:r,displayed_time:od(o,r),show_usage_progress_bar:ad(o,!0),show_usage_progress_text:ad(o,!1)}):n?(o.current_usage=o.total_usage,{current_usage:o.total_usage,stock_out:n,show_usage_progress_bar:ad(o,!0),show_usage_progress_text:ad(o,!1)}):{}};function id(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ud(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?id(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dd,ld=N().mark(fd),pd=N().mark(_d);function fd(e,t,r,n,o){var a,c,s,i,u,d,l,p,f,_,E,S,h,O,v;return N().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=T("conversations",e),m.next=3,(0,Wt.select)(fs);case 3:return c=m.sent,m.next=6,(0,Wt.select)((function(e){return e.entityReducer}));case 6:return s=m.sent,i=s.conversations,u=void 0===i?{}:i,d=s.shops,l=void 0===d?{}:d,p=[],c&&c.faking?(f=c.id,p=iT(t,a.result,n,f)):p=iT(t,a.result,n),_=p.length<R.persistLimit?null:ue(p).splice(0,R.persistLimit),m.next=16,(0,Wt.put)(br({entities:{persist:_}}));case 16:return m.next=18,(0,Wt.call)(sT,u,e,"conversations");case 18:return m.next=20,(0,Wt.spawn)(_d,e);case 20:if(!(E=o&&o.length)){m.next=26;break}return m.next=24,(0,Wt.call)(sT,l,o,"shops");case 24:return m.next=26,(0,Wt.put)(up({shopIds:o.map((function(e){return e.id}))}));case 26:return m.next=28,(0,Wt.put)(nt());case 28:if(!(S=lT(_,r,t))||!S.changed){m.next=40;break}if(O=S.lastConversationId,"older"!==n&&"reset"!==n){m.next=35;break}h=a.entities.conversations&&a.entities.conversations[O],m.next=39;break;case 35:return m.next=37,(0,Wt.select)(ns);case 37:v=m.sent,h=v.find((function(e){return e.id===O}));case 39:h&&(E?S.oldestReceivedMessageId=h.latest_message_id:S.oldestTimestampNano=h.last_msg_time_nano);case 40:return m.abrupt("return",{persistObj:S,resultConversationIds:p});case 41:case"end":return m.stop()}}),ld)}function _d(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_;return N().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(t=[],e.forEach((function(e){(0,R.hasTargetMessageOption)(e.last_message_option,R.MessageOption.MSG_OPT_RECALL)&&t.push({conversation_id:e.id,shop_id:e.shop_id})})),!t.length){E.next=27;break}return E.next=5,(0,Wt.call)(it,{method:"POST",parent:"conversation",resource:"last_msg_in_conversation_batch",payload:JSON.stringify({pairs:t})});case 5:if(r=E.sent,!(n=Object.keys(r)).length){E.next=27;break}o={};case 9:if(!n.length){E.next=24;break}if(!(a=n.shift())){E.next=22;break}return E.next=14,(0,Wt.select)(gs(a));case 14:if(c=E.sent,(0,R.hasTargetMessageOption)(c.last_message_option,R.MessageOption.MSG_OPT_RECALL)){E.next=17;break}return E.abrupt("continue",9);case 17:s=r[a],i=s.id,u=s.type,d=s.content,l=s.to_shop_id,p=s.created_at,f=(0,R.getChatBotParams)(s,{updateMaxGeneralOptionHideTime:c.shop_id!==l}),_=(0,R.getCrmPreviewParams)(s),o[a]=ud(ud({latest_message_id:i,latest_message_type:u,latest_message_content:d,last_message_time:p},f),_);case 22:E.next=9;break;case 24:if((0,R.checkEmptyObject)(o)){E.next=27;break}return E.next=27,(0,Wt.put)(Cr({name:"conversations",records:o}));case 27:case"end":return E.stop()}}),pd)}var Ed=N().mark(Dd),Sd=N().mark(Id),hd=N().mark(Ad),Od=N().mark(wd),vd=N().mark(Nd),Td=N().mark(xd);function md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?md(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bd=["pinned","unreplied"],yd=function(e,t,r,n,o){var a={},c="older"===e?t:"latest"===e?r:"",s=bd.includes(n);return a.resource=s?"conversation/list":"conversations",a.params={next_timestamp_nano:c,direction:"latest"===e&&c?"latest":"older"},"unread"===n&&(a.params.unread_only=!0),s&&(a.params.type=n),new Promise((function(e,t){it(a).then((function(t){var r=t.conversations,n=void 0===r?[]:r,o=t.page_result;e([n,void 0===o?{}:o])})).catch((function(e){t(e)}))}))},Rd=function(e,t,r,n,o,a,c){var s="older"===t?r:"latest"===t?n:"",i={direction:"latest"===t?"latest":"older"};if(s&&(i.last_received_message_id=s),a)return e&&(i.shop_id=e),o&&["unread","pinned"].includes(o)&&(i.type=o),new Promise((function(e,t){it({parent:"subaccount",resource:"conversations",params:i}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},Cd=function(e){return new Promise((function(t,r){it({subServer:"coreapi",parent:"conversation_list_by_ids",params:{conversation_ids:JSON.stringify(e)}}).then((function(e){var r=e.conversations;t(void 0===r?[]:r)})).catch((function(e){r(e)}))}))},Pd=function(e){return e=e.filter((function(e){return e})),new Promise((function(t){it({parent:"setting",resource:"auto_translations",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function Dd(t){var r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,R,C,P,D,I,A,w,x,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z;return N().wrap((function(J){for(;;)switch(J.prev=J.next){case 0:return r=t.list,n=t.needFetchOfferCount,o=void 0!==n&&n,a=t.conversationId,c=t.handleSave,J.next=3,(0,Wt.select)(In);case 3:s=J.sent,i=[],u=[],d=[],l=[],p={},f=0;case 7:if(!(f<r.length)){J.next=23;break}if(_=r[f],E=_.id,S=_.conversation_id,h=_.type,O=_.content,v=_.latest_message_type,T=_.latest_message_content,m=_.to_id,g=_.shop_id,b=v||h,y=T||O,R=S||E,o&&l.push({buyer_id:m,shop_id:g}),!["order","offer","voucher"].includes(b)){J.next=20;break}return J.next=16,(0,Wt.select)(bs(R));case 16:C=J.sent,P=!1,"order"===b&&s&&C!==y.shop_id&&(P=!0),P||(D="".concat(b,"_id"),I=y[D],A="order"===b?u:"offer"===b?i:d,0!==(w=y.shop_id)&&0!==parseInt(I)&&(A.push(e({shop_id:w},D,parseInt(I))),p[E]={type:b,itemId:I,conversationId:R}));case 20:f++,J.next=7;break;case 23:if(Object.keys(p).length||l.length){J.next=25;break}return J.abrupt("return");case 25:return x={},J.next=28,(0,Wt.select)(xn);case 28:if(k=J.sent){J.next=34;break}if(!a){J.next=34;break}return J.next=33,(0,Wt.select)(bs(a));case 33:k=J.sent;case 34:return k&&(x={params:{shop_id:k}}),J.prev=35,J.next=38,(0,Wt.call)(it,gd(gd({method:"POST",parent:"chat_preview",resource:"detail"},x),{},{payload:JSON.stringify({offer_preview_req:i,order_preview_req:u,voucher_preview_req:d,offer_count_req:l})}));case 38:U=J.sent,J.next=44;break;case 41:J.prev=41,J.t0=J.catch(35),U={};case 44:if(L=(M=U).vouchers,j=void 0===L?[]:L,G=M.offers,F=void 0===G?[]:G,H=M.orders,V=void 0===H?[]:H,B=M.buyer_offer_counts,Y=void 0===B?[]:B,j.length||F.length||V.length||Y.length){J.next=47;break}return J.abrupt("return");case 47:Q={},q=Object.keys(p),W=N().mark((function e(){var t,r,n,o,a,c,s,i,u;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z[K],r=void 0,n=p[t],o=n.type,a=n.itemId,c=n.conversationId,e.next=5,(0,Wt.select)(Fs(c));case 5:s=e.sent,e.t0=o,e.next="voucher"===e.t0?9:"offer"===e.t0?12:"order"===e.t0?15:17;break;case 9:return i=j.find((function(e){return e.id===a})),r=i?gd(gd({},i),cd(i)):i,e.abrupt("break",17);case 12:return u=F.find((function(e){return e.id===a})),r=u?gd(gd({},u),{},{offer_price:Gu(u.offer_price,s)}):u,e.abrupt("break",17);case 15:return r=V.find((function(e){return e.id===a})),e.abrupt("break",17);case 17:r&&(Q[t]=r);case 18:case"end":return e.stop()}}),e)})),K=0,z=q;case 51:if(!(K<z.length)){J.next=56;break}return J.delegateYield(W(),"t1",53);case 53:K++,J.next=51;break;case 56:c&&c({records:Q,buyerOfferCounts:Y});case 57:case"end":return J.stop()}}),Ed,null,[[35,41]])}function Id(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={},r={},n.next=3,(0,Wt.call)(Dd,{list:e,needFetchOfferCount:!0,handleSave:function(e){var n=e.records,o=e.buyerOfferCounts;Object.keys(n).forEach((function(e){t[e]={latest_message_content:n[e]}})),o.forEach((function(e){var t=e.shop_id,n=e.buyer_id,o=e.pending_count,a="".concat(t,"_").concat(n);r[a]=o}))}});case 3:return n.next=5,(0,Wt.put)(Cr({name:"conversations",records:t}));case 5:return n.next=7,(0,Wt.put)(yi({records:r}));case 7:case"end":return n.stop()}}),Sd)}function Ad(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,C,P,D,I,A,w,x,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z,J,X,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,de,le;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,r=t.direction,n=t.noPending,o=t.source,a="latest"===r,c=null,N.next=5,(0,Wt.select)(Bn);case 5:return s=N.sent,N.next=8,(0,Wt.select)(In);case 8:return i=N.sent,N.next=11,(0,Wt.select)(ds);case 11:if(u=N.sent.toLowerCase(),d=!i,l=o===R.ConversationSource.SYNC,"reset"!==r){N.next=19;break}return N.next=17,Uo().put(Lo().resetConversationQueue({isLazy:!0}));case 17:return N.next=19,(0,Wt.put)(Ws({conversationIds:[],oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:R.DataFetchStatus.SUCCEED,persist:null,shouldFetchByTimestamp:d}));case 19:return N.next=21,(0,Wt.select)((function(e){return e.conversationReducer}));case 21:if(p=N.sent,f=p.oldestTimestampNano,_=p.latestTimestampNano,E=p.maxLatestTimestampNano,S=p.oldestReceivedMessageId,h=p.latestReceivedMessageId,O=p.maxLatestReceivedMessageId,v=p.hasMore,T=p.persist,m=p.conversationIds,g=p.status,b=p.syncFetchException,C=p.currentConversationId,P="reset"===r||(d?!f:!S)&&"older"===r,N.prev=35,"older"===r&&(d?"0"===f:!v)){N.next=156;break}if(n){N.next=40;break}return N.next=40,(0,Wt.put)(Ks({status:P?R.DataFetchStatus.INIT_PENDING:R.DataFetchStatus.PENDING}));case 40:if(D=[],I={},!d){N.next=51;break}return N.next=45,(0,Wt.call)(yd,r,f,_,u,o);case 45:A=N.sent,w=y(A,2),D=w[0],I=w[1],N.next=54;break;case 51:return N.next=53,(0,Wt.call)(Rd,c,r,S,h,u,i,o);case 53:D=N.sent;case 54:if(!(x=D.length)){N.next=152;break}if("reset"===r&&(!d||bd.includes(u))){N.next=66;break}if(k=D[x-1],U="older"===r,d?(M=U?f:_,L=U?k.next_timestamp_nano:k.last_message_time_nano):(M=U?S:h,L=k.latest_message_id),!M||!L){N.next=66;break}if(U?L<M:L>M){N.next=66;break}return N.next=65,(0,Wt.put)(Ws({direction:r,status:R.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:h,maxLatestReceivedMessageId:h,conversationIds:m,oldestTimestampNano:f,latestTimestampNano:_,maxLatestTimestampNano:_,shouldFetchByTimestamp:d}));case 65:return N.abrupt("return");case 66:if(s||i){N.next=76;break}return N.next=69,(0,Wt.select)(w_);case 69:if("enabled"===N.sent){N.next=76;break}return j=Array.from(new Set(D.map((function(e){return e.to_shop_id})))),N.next=74,(0,Wt.call)(Pd,j);case 74:G=N.sent,D=D.map((function(e){var t=G.find((function(t){return t.shop_id===e.to_shop_id}));return gd(gd({},e),{},{translationAccess:!!t&&t.is_auto_translation})}));case 76:if(F={},D.forEach((function(e){F[e.id]=!0})),Gi(D),H=D[0],V=Fi(H,I.next_cursor),B=H.latest_message_id,Y={status:R.DataFetchStatus.SUCCEED,direction:r,conversationIdsMap:F,shouldFetchByTimestamp:d,maxLatestReceivedMessageId:!O||O<B?B:O},!d){N.next=98;break}return Q=V.oldestTimestampNano,q=V.latestTimestampNano,N.next=87,(0,Wt.select)((function(e){return e.conversationReducer}));case 87:return W=N.sent,K=W.conversationIds,z=W.persist,N.next=92,(0,Wt.call)(fd,D,K,z,r);case 92:J=N.sent,X=J.persistObj,$=J.resultConversationIds,Y=Object.assign({},Y,{oldestTimestampNano:Q,latestTimestampNano:q,persist:X,conversationIds:$,maxLatestTimestampNano:!E||E<q?q:E}),N.next=118;break;case 98:return Z=[],ee=[],N.next=102,(0,Wt.select)(np);case 102:if(te=N.sent,D.forEach((function(e){!te.includes(e.shop_id)&&ee.push(e.shop_id)})),!ee.length){N.next=108;break}return N.next=107,(0,Wt.call)(wp,{shopIds:ue(new Set(ee))});case 107:Z=N.sent;case 108:return N.next=110,(0,Wt.select)((function(e){return e.conversationReducer}));case 110:return re=N.sent,ne=re.conversationIds,oe=re.persist,N.next=115,(0,Wt.call)(fd,D,ne,oe,r,Z);case 115:ae=N.sent,ce=D[x-1].latest_message_id,Y=Object.assign({},Y,{hasMore:!0,conversationIdsMap:F,persist:ae.persistObj,oldestReceivedMessageId:ce,latestReceivedMessageId:B,conversationIds:ae.resultConversationIds});case 118:if(!l){N.next=130;break}if(!C||!F[C]){N.next=130;break}return se=D.find((function(e){return e.id===C})),ie=(se||{}).latest_message_id,N.next=124,(0,Wt.select)(l_);case 124:if(de=N.sent,le=de.length?de[de.length-1].id:"",ie===le){N.next=130;break}return N.next=130,Uo().put(Lo().fetchMessagesRequested({payload:{conversationId:null==se?void 0:se.id,reset:!0},isLazy:!0}));case 130:return N.next=132,(0,Wt.put)(Ws(Y));case 132:return N.next=134,(0,Wt.spawn)(Id,D);case 134:if(!a){N.next=147;break}if(!d){N.next=143;break}if("0"===V.nextTimestampNano){N.next=141;break}return N.next=139,(0,Wt.put)(qs({direction:r,noPending:!0}));case 139:N.next=141;break;case 141:N.next=145;break;case 143:return N.next=145,(0,Wt.put)(qs({direction:r,noPending:!0}));case 145:N.next=150;break;case 147:if(!(Y.conversationIds.length<=20)){N.next=150;break}return N.next=150,(0,Wt.put)(qs({direction:"older",noPending:!0}));case 150:N.next=154;break;case 152:return N.next=154,(0,Wt.put)(Ws({direction:r,status:R.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:h,maxLatestReceivedMessageId:O,oldestTimestampNano:f,latestTimestampNano:_,maxLatestTimestampNano:E,shouldFetchByTimestamp:d,syncFetchException:l?b+1:0}));case 154:N.next=159;break;case 156:if(g===R.DataFetchStatus.INIT_FAILED){N.next=159;break}return N.next=159,(0,Wt.put)(Ks({status:R.DataFetchStatus.SUCCEED}));case 159:N.next=170;break;case 161:if(N.prev=161,N.t0=N.catch(35),!(N.t0 instanceof $e||N.t0 instanceof Le)){N.next=168;break}return N.next=166,(0,Wt.put)(Ks({status:R.DataFetchStatus.TEMPORY_ERROR}));case 166:N.next=170;break;case 168:return N.next=170,(0,Wt.put)(Ks({status:P?R.DataFetchStatus.INIT_FAILED:R.DataFetchStatus.FAILED}));case 170:case"end":return N.stop()}}),hd,null,[[35,161]])}function wd(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload.conversationIds,r=void 0===t?[]:t,c.prev=1,r.length){c.next=6;break}return c.next=5,(0,Wt.select)(is);case 5:r=c.sent;case 6:if(!r.length){c.next=16;break}return c.next=9,(0,Wt.call)(Cd,r.slice(0,20));case 9:if(n=c.sent,!(o=n.filter((function(e){return!e.lack}))).length){c.next=16;break}return a={},o.forEach((function(e){a[e.id]=e})),c.next=16,(0,Wt.put)(Cr({name:"conversations",records:a}));case 16:c.next=20;break;case 18:c.prev=18,c.t0=c.catch(1);case 20:case"end":return c.stop()}}),Od,null,[[1,18]])}function Nd(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.shopId,n=t.buyerId,c.prev=1,c.next=4,(0,Wt.call)(it,{parent:"offer",resource:"count",params:{shop_id:r,buyer_id:n}});case 4:return o=c.sent,a=o.pending_count,c.next=8,(0,Wt.put)(bi({shopId:r,buyerId:n,count:a}));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,(0,Wt.put)(bi({shopId:r,buyerId:n,count:0}));case 14:case"end":return c.stop()}}),vd,null,[[1,10]])}function xd(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(qs,Ad);case 2:return e.next=4,(0,Wt.takeEvery)(ii,wd);case 4:return e.next=6,(0,Wt.takeEvery)(gi,Nd);case 6:case"end":return e.stop()}}),Td)}const kd=(e(dd={},Bc.FETCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationIds,o=r.conversationIdsMap,a=void 0===o?{}:o,c=r.oldestReceivedMessageId,s=r.latestReceivedMessageId,i=r.direction,u=void 0===i?"reset":i,d=r.status,l=r.hasMore,p=r.oldestTimestampNano,f=r.latestTimestampNano,_=r.persist,E=r.shouldFetchByTimestamp,S=r.maxLatestReceivedMessageId,h=r.maxLatestTimestampNano,O=r.syncFetchException,v=void 0===O?0:O,T=gd(gd({},e),{},{status:d,hasMore:l,persist:_,conversationIds:n||e.conversationIds,conversationIdsMap:"reset"===u?a:gd(gd({},e.conversationIdsMap),a),direction:"latest"===u?u:"older",maxLatestReceivedMessageId:S,maxLatestTimestampNano:h,syncFetchException:v});switch(u){case"reset":E?(T.latestTimestampNano=f,T.oldestTimestampNano=p):(T.oldestReceivedMessageId=c,T.latestReceivedMessageId=s);break;case"latest":E?T.latestTimestampNano=f>e.latestTimestampNano?f:e.latestTimestampNano:T.latestReceivedMessageId=s;break;case"older":E?T.oldestTimestampNano=p:T.oldestReceivedMessageId=c}return T})),e(dd,Bc.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e,t){var r=t.payload.status;return Ai(Ai({},e),{},{status:r})})),e(dd,Bc.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e,t){var r=t.payload.direction;return Ai(Ai({},e),{},{direction:r})})),e(dd,Bc.UPDATE_CONVERSATION_TIMESTAMP,(function(e,t){var r=t.payload,n=r.latestTimestampNano,o=r.oldestTimestampNano;return gd(gd({},e),{},{latestTimestampNano:n,oldestTimestampNano:o})})),e(dd,Bc.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(t,r){var n=r.payload,o=n.shopId,a=n.buyerId,c=n.count,s="".concat(o,"_").concat(a);return gd(gd({},t),{},{pendingOffersCount:gd(gd({},t.pendingOffersCount),{},e({},s,c))})})),e(dd,Bc.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e,t){var r=t.payload.records;return gd(gd({},e),{},{pendingOffersCount:gd(gd({},e.pendingOffersCount),r)})})),dd),Ud=e({},Bc.SET_CURRENT_CONVERSATION_CAN_READ,(function(e,t){var r=t.payload.canRead;return Ai(Ai({},e),{},{currentConversationCanRead:r})}));var Md,Ld=N().mark(Hd),jd=N().mark(Vd);function Gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Gd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hd(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O;return N().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.conversationId,n=t.isRead,o=t.latestMessageId,v.prev=1,a=Date.now()+"",c=n?"read":"unread",v.next=6,(0,Wt.select)(gs(r));case 6:if(s=v.sent,i=s.shop_id,u=s.last_read_message_id,!n){v.next=16;break}return v.next=12,(0,Wt.select)(gs(r));case 12:if(d=v.sent,l=d.unread_count,u!==o||l){v.next=16;break}return v.abrupt("return");case 16:if(p=n?{last_read_message_id:o}:{},i&&(p.shop_id=i),!n){v.next=21;break}return v.next=21,(0,Wt.put)(ei({requestId:a}));case 21:return v.next=23,(0,Wt.call)(it,{method:"PUT",parent:"conversations",parentId:r,resource:c,params:{request_id:a},payload:JSON.stringify(Fd({},p))});case 23:if(!n){v.next=41;break}return v.next=26,(0,Wt.select)((function(e){return e.conversationReducer}));case 26:return f=v.sent,_=f.conversationMark,E="socket"===_[r],v.next=31,(0,Wt.put)(Zs({conversationId:r,markType:E?"":"api"}));case 31:if(E){v.next=41;break}return v.next=34,(0,Wt.select)(gs(r));case 34:return S=v.sent,h=S.unread_count,O=S.shop_id,v.next=39,(0,Wt.put)(yr({name:"conversations",id:r,record:{last_read_message_id:o,unread_count:0}}));case 39:return v.next=41,(0,Wt.put)(tn({type:Wr.MARK_AS_READ,conversation:{id:r,shop_id:O,unread_count:h}}));case 41:v.next=47;break;case 43:return v.prev=43,v.t0=v.catch(1),v.next=47,(0,Wt.put)(Kp({error:v.t0}));case 47:case"end":return v.stop()}}),Ld,null,[[1,43]])}function Vd(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)($s,Hd);case 2:case"end":return e.stop()}}),jd)}const Bd=(e(Md={},Bc.MARK_MESSAGES_SUCCEEDED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.markType;return Fd(Fd({},t),{},{conversationMark:Fd(Fd({},t.conversationMark),{},e({},o,a))})})),e(Md,Bc.UPDATE_READ_REQUEST_DATA,(function(e,t){var r=t.payload,n=r.requestId,o=r.requestIds,a=r.count,c=Fd({},e);return n&&(c.readRequestIds=[n].concat(e.readRequestIds)),o&&(c.readRequestIds=o),a&&(c.missedReadNoticeCount=a),c})),Md);var Yd,Qd=N().mark(Wd),qd=N().mark(Kd);function Wd(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.conversationId,a.prev=1,a.next=5,(0,Wt.select)(Bn);case 5:if(!a.sent){a.next=10;break}return a.next=10,(0,Wt.put)(yv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 10:return a.next=12,(0,Wt.select)(gs(t));case 12:return r=a.sent,n=r.shop_id,o=r.status,a.next=17,(0,Wt.call)(it,{method:"PUT",resource:"conversations",id:t,suffix:"status",payload:JSON.stringify({shop_id:n,status:Yd[o]})});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(1),a.next=23,(0,Wt.put)(Kp({error:a.t0}));case 23:case"end":return a.stop()}}),Qd,null,[[1,19]])}function Kd(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(si,Wd);case 2:case"end":return e.stop()}}),qd)}!function(e){e.activated="closed",e.closed="activated"}(Yd||(Yd={}));var zd=N().mark(Xd),Jd=N().mark($d);function Xd(e){var t,r,n,o,a,c,s,i,u,d,l,p,f;return N().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.conversationId,_.prev=1,_.next=4,(0,Wt.select)(gs(t));case 4:return r=_.sent,n=r.id,o=r.unread_count,a=r.shop_id,_.next=8,(0,Wt.select)(Zc);case 8:return c=_.sent,_.next=11,(0,Wt.call)(it,{resource:"conversations",id:t,params:{shop_id:a}});case 11:if(s=_.sent,i=s.flag,u=s.entry_point,d=s.unread_count,l=s.latest_message_id,n){_.next=19;break}return p=T("conversations",s),f=p.entities,_.next=17,(0,Wt.put)(br({entities:f}));case 17:_.next=21;break;case 19:return _.next=21,(0,Wt.put)(yr({name:"conversations",id:t,record:{flag:i,entry_point:u,unread_count:d}}));case 21:if(o||o===s.unread_count){_.next=24;break}return _.next=24,(0,Wt.put)(tn({conversation:s,type:Wr.ACTIVE_CONVERSATION}));case 24:if(t!==c){_.next=28;break}if(!(d>0)){_.next=28;break}return _.next=28,(0,Wt.put)($s({conversationId:t,isRead:!0,latestMessageId:l}));case 28:return _.abrupt("return",s);case 31:return _.prev=31,_.t0=_.catch(1),_.abrupt("return",{});case 34:case"end":return _.stop()}}),zd,null,[[1,31]])}function $d(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Ys,Xd);case 2:case"end":return e.stop()}}),Jd)}function Zd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function el(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Zd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const tl=e({},Bc.FAKE_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload.conversationId;return el(el({},e),{},{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));var rl=N().mark(sl),nl=N().mark(il);function ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function al(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ol(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var cl={restart:si,delete:Vs,read:$s,unread:$s,pin:ti,unpin:ti,mute:mi,unmute:mi};function sl(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.type,n=t.extra,o=cl[r],a.next=4,(0,Wt.put)(o(al({},n)));case 4:case"end":return a.stop()}}),rl)}function il(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(ui,sl);case 2:case"end":return e.stop()}}),nl)}function ul(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ul(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}cl.close=si;var ll={hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"},pl=function(e){var t={},r=e.length;return Object.keys(ll).forEach((function(n){t[n]=!r||e.includes(ll[n])})),t};const fl=e({},Bc.UPDATE_ACCESS,(function(e,t){var r=pl(t.payload.access);return dl(dl({},e),{},{access:r})}));var _l=["combine","user","orderId","message","agent","agentMessage"];function El(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?El(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):El(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var hl=N().mark(Ol);function Ol(){var e,t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Wt.select)($c);case 2:return e=i.sent,i.prev=3,i.next=6,(0,Wt.call)(it,{subServer:"coreapi",parent:"conversation",resource:"updated_conversation_list",params:{last_update_time:e}});case 6:if(t=i.sent,r=t.conversations,n=t.page_result,!(r.length>0)){i.next=13;break}return o={},r.forEach((function(e){o[e.id]=e})),i.next=13,(0,Wt.put)(Cr({name:"conversations",records:o}));case 13:if(c=(a=n||{}).has_more,!(s=a.next_last_update_time)){i.next=17;break}return i.next=17,(0,Wt.put)(Ei({timeNow:s}));case 17:if(!(c&&r.length>0)){i.next=20;break}return i.next=20,(0,Wt.call)(Ol);case 20:i.next=29;break;case 22:if(i.prev=22,i.t0=i.catch(3),!(i.t0 instanceof Ve)){i.next=29;break}return i.next=27,(0,Wt.put)(Ei({timeNow:"0"}));case 27:return i.next=29,(0,Wt.call)(Ad,{payload:{direction:"reset"}});case 29:case"end":return i.stop()}}),hl,null,[[3,22]])}const vl=e({},Bc.UPDATE_SYNC_TIME_NOW,(function(e,t){var r=t.payload.timeNow;return Sl(Sl({},e),{},{updateTimeNow:r})}));var Tl,ml,gl=N().mark(yl),bl=N().mark(Rl);function yl(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.conversationId,i.prev=1,i.next=4,(0,Wt.select)(gs(t));case 4:return r=i.sent,n=r.shop_id,o=r.mute,i.next=9,(0,Wt.select)(In);case 9:return a=i.sent,c={biz_type:a?2:0},n&&(c.shop_id=n),s={method:"PUT",parent:"conversations",parentId:t,resource:o?"unmute":"mute",payload:JSON.stringify(c)},i.next=15,(0,Wt.call)(it,s);case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,(0,Wt.put)(Kp({error:i.t0}));case 21:case"end":return i.stop()}}),gl,null,[[1,17]])}function Rl(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(mi,yl);case 2:case"end":return e.stop()}}),bl)}var Cl=N().mark(kl),Pl=N().mark(Ul);function Dl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Il(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Al=(0,tt.createActions)((e(Tl={},Bc.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.shopId;return{keyword:r,shopId:void 0===n?"":n}})),e(Tl,Bc.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e){return{results:e.results,searchStatus:e.searchStatus}})),e(Tl,Bc.UPDATE_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}})),Tl)),wl=Al.searchConversationsRequested,Nl=Al.searchConversationsSucceeded,xl=Al.updateSearchParams;function kl(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.keyword,r=[],n=t.trim(),s.next=5,(0,Wt.put)(xl({keyword:n,searchStatus:R.DataFetchStatus.INIT_PENDING}));case 5:if(!n){s.next=15;break}return o=n.toLocaleLowerCase(),s.next=9,(0,Wt.select)((function(e){return e.entityReducer}));case 9:return a=s.sent,c=a.shops,s.next=13,(0,Wt.select)(ns);case 13:s.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(o)&&!e.faking&&r.push(Il(Il({},e),{},{shop_name:(c[e.shop_id]||{}).name}))}));case 15:return s.next=17,(0,Wt.put)(Nl({results:r,searchStatus:R.DataFetchStatus.SUCCEED}));case 17:case"end":return s.stop()}}),Cl)}function Ul(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeLatest)(wl,kl);case 2:case"end":return e.stop()}}),Pl)}const Ml=(e(ml={},Bc.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.results,o=r.searchStatus;return Il(Il({},e),{},{results:n,searchStatus:o})})),e(ml,Bc.UPDATE_SEARCH_PARAMS,(function(e,t){var r=t.payload,n=r.keyword,o=r.searchStatus;return Il(Il({},e),{},{keyword:n,searchStatus:o})})),ml);var Ll,jl=I(439).t;function Gl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Gl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Hl=N().mark(Yl),Vl=N().mark(Ql);function Bl(e,t){return it({parent:"conversation",resource:"conversation_info",params:{shop_id:t,message_id:e}})}function Yl(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O;return N().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.msgId,n=t.shopId,v.next=3,(0,Wt.select)(l_);case 3:return o=v.sent,a={},c=o.find((function(e){return e.id===r})),v.next=8,(0,Wt.put)(_i({inlocation:!0}));case 8:if(!c){v.next=16;break}return s=c.conversation_id,v.next=12,(0,Wt.select)(gs(s));case 12:return a=v.sent,v.next=15,(0,Wt.call)(au,{payload:{conversation:a,messageId:r,messageList:[]}});case 15:fT.emit("scrollToMessage",r);case 16:if(a.id){v.next=58;break}return v.prev=17,v.next=20,(0,Wt.all)([(0,Wt.call)(Bl,r,n),Uo().call(Lo().fetchConversationMessagesSaga({payload:{msgId:r,shopId:n}}))]);case 20:if(i=v.sent,u=y(i,2),d=u[0],l=u[1],p=(d||{}).conversation_info,f=void 0===p?[]:p,_=(l||{}).get_messages,0!==(E=void 0===_?[]:_).length&&E.find((function(e){return e.id===r}))){v.next=28;break}throw new Error("message_not_found");case 28:if(!(a=f[0])){v.next=39;break}return S=T("conversations",a),h=S.entities,v.next=33,Uo().put(Lo().deleteConversationMessageHash({payload:{conversationId:a.id}}));case 33:return v.next=35,(0,Wt.put)(br({entities:h}));case 35:return v.next=37,(0,Wt.delay)(300);case 37:return v.next=39,(0,Wt.call)(au,{payload:{conversation:a,messageId:r,messageList:E}});case 39:v.next=58;break;case 41:v.prev=41,v.t0=v.catch(17),O=jl("common.server_error.warning_tips"),v.t1=v.t0.message,v.next="message_not_found"===v.t1?47:"conversation_not_found"===v.t1?49:55;break;case 47:return O=jl("message.server_error.not_found"),v.abrupt("break",56);case 49:return O=jl("conversation.server_error.deleted"),v.next=52,(0,Wt.put)(Ti({conversationBeenDeleted:!0}));case 52:return v.next=54,(0,Wt.put)(ai());case 54:case 55:return v.abrupt("break",56);case 56:return v.next=58,(0,Wt.call)(ef,Kp({toast:{show:!0,type:"fail",message:O}}));case 58:case"end":return v.stop()}}),Hl,null,[[17,41]])}function Ql(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeLatest)(fi,Yl);case 2:case"end":return e.stop()}}),Vl)}const ql=(e(Ll={},Bc.UPDATE_LOCATION_MODE,(function(e,t){var r=t.payload.inlocation;return Fl(Fl({},e),{},{inlocation:r})})),e(Ll,Bc.SET_CONVERSATION_BEEN_DELETED,(function(e,t){var r=t.payload.conversationBeenDeleted;return Fl(Fl({},e),{},{conversationBeenDeleted:r})})),Ll);function Wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Wl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zl,Jl,Xl,$l,Zl=[zi,su,Di,Vd,Kd,xd,$d,il,Rl,Ul,Ql],ep=(zl={},_l.forEach((function(e){zl[e]={pageIndex:1,pageSize:20,hasMore:!0,nextOffset:"0"}})),Jl={},_l.forEach((function(e){Jl[e]={status:"",results:[],total:0}})),{conversationIds:[],conversationIdsMap:{},maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},status:"",hasMore:!0,persist:null,results:[],direction:"",searchStatus:"",inlocation:!1,conversationBeenDeleted:!1,syncFetchException:0,conversationMark:{},readRequestIds:[],missedReadNoticeCount:0,access:pl([]),updateTimeNow:"0",isNavigateToUnreadMessage:!1,navigateToUnreadMessageId:"",pendingOffersCount:{}}),tp=(0,tt.handleActions)(Kl(Kl(Kl(Kl(Kl(Kl(Kl(Kl(Kl(Kl(Kl({},Ji),iu),uu),Ud),kd),tl),Bd),fl),Ml),ql),vl),ep),rp=function(e){return(0,Zt.createSelector)(fr,(function(r){return(0,t.denormalize)(e,p,{shops:r})}))},np=function(e){return e.shopReducer.fetchedShopIds},op=(0,Zt.createSelector)(fs,fr,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),ap=(0,Zt.createSelector)(Ps,tr,(function(e,r){return(0,t.denormalize)(e,p,r)||{}}));!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}(Xl||(Xl={}));var cp=(0,tt.createActions)((e($l={},Xl.FETCH_SHOPS_REQUESTED,(function(){return{}})),e($l,Xl.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),e($l,Xl.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e($l,Xl.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),e($l,Xl.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),e($l,Xl.UPDATE_SHOP_FILTER,(function(e){return{filter:e.filter}})),e($l,Xl.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}})),e($l,Xl.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword}})),e($l,Xl.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),e($l,Xl.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e($l,Xl.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),$l)),sp=cp.fetchShopsRequested,ip=(cp.fetchShopsSucceed,cp.updateFetchShopsStatus,cp.fetchShopAuthRequested),up=cp.updateFetchedShopIds,dp=cp.updateShopFilter,lp=cp.visitShopSellerCenterRequested,pp=cp.searchShopsRequested,fp=(cp.searchShopsSucceed,cp.updateSearchShopsStatus,cp.fetchShopDetailInfo),_p=N().mark(Sp),Ep=N().mark(hp);function Sp(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,(0,Wt.select)(rp(t));case 4:return r=a.sent,a.next=7,(0,Wt.call)(it,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,n=T("shops",r),o=n.entities,a.next=11,(0,Wt.put)(br({entities:o}));case 11:return a.next=13,(0,Wt.put)(up({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),_p,null,[[1,16]])}function hp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(fp,Sp);case 2:case"end":return e.stop()}}),Ep)}function Op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Op(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Tp=e({},Xl.UPDATE_SHOP_FILTER,(function(e,t){var r=t.payload.filter;return vp(vp({},e),{},{shopFilter:r})}));var mp,gp=N().mark(yp),bp=N().mark(Rp);function yp(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,C;return N().wrap((function(P){for(;;)switch(P.prev=P.next){case 0:return t=e.payload,r=t.url,n=t.shopId,o=t.orderId,a=t.itemId,P.prev=1,P.next=4,(0,Wt.call)(it,{resource:"shop",id:n,suffix:"sc"});case 4:if(c=P.sent,s=c.sc_url,i=c.upgraded,u=c.region,!i){P.next=12;break}return d=window.open(),r?((l=r.split("/"))[2]=(0,R.getSellerCenterUrl)(u),p=l.join("/"),d.location=p.includes("?")?"".concat(p,"&cnsc_shop_id=").concat(n):"".concat(p,"?cnsc_shop_id=").concat(n)):d.location=o?"https://".concat((0,R.getSellerCenterUrl)(u),"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(n):a?"https://".concat((0,R.getSellerCenterUrl)(u),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(n):"https://".concat((0,R.getSellerCenterUrl)(u),"?cnsc_shop_id=").concat(n),P.abrupt("return");case 12:if(!s){P.next=25;break}if(f=s.split("?"),_=f[1].split("&").find((function(e){return e.startsWith("sig=")})),E=_.substring(4),S=f[0].split("."),h=S[S.length-1],O=window.open(),!r){P.next=22;break}return O.location=r.includes("?")?"".concat(r,"&sig=").concat(E):"".concat(r,"?sig=").concat(E),P.abrupt("return");case 22:o||a?o?(v="https://".concat((0,R.getSellerCenterUrl)(h),"/portal/sale/").concat(o,"?sig=").concat(E),O.location=v):a&&(T="https://".concat((0,R.getSellerCenterUrl)(h),"/portal/product/").concat(a,"?sig=").concat(E),O.location=T):(m="https://".concat((0,R.getSellerCenterUrl)(h),"?sig=").concat(E),O.location=m),P.next=28;break;case 25:return g=Qp(!1,{type:"permission-denied"}),P.next=28,(0,Wt.put)(Kp({toast:g}));case 28:P.next=38;break;case 30:return P.prev=30,P.t0=P.catch(1),P.next=34,(0,Wt.select)(rp(n));case 34:b=P.sent,y="https://".concat((0,R.getSellerCenterUrl)(b.country),"/portal/"),C=o?"sale/".concat(o):a?"product/".concat(a):"",window.open(y+C);case 38:case"end":return P.stop()}}),gp,null,[[1,30]])}function Rp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(lp,yp);case 2:case"end":return e.stop()}}),bp)}function Cp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Cp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dp=N().mark(Np),Ip=N().mark(xp),Ap=function(e){return new Promise((function(t){it({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},wp=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){it({resource:"shops",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function Np(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.shopId,n.prev=1,n.next=4,(0,Wt.call)(it,{parent:"shop",parentId:t,resource:"auth"});case 4:return r=n.sent,n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",{});case 11:case"end":return n.stop()}}),Dp,null,[[1,8]])}function xp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(ip,Np);case 2:case"end":return e.stop()}}),Ip)}const kp=(e(mp={},Xl.FETCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result;return Pp(Pp({},e),{},{fetchResult:Pp(Pp({},e.fetchResult),{},{pagination:n,result:o})})})),e(mp,Xl.SEARCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result,a=r.keyword;return Pp(Pp({},e),{},{searchResult:Pp(Pp({},e.searchResult),{},{pagination:n,result:o,keyword:a})})})),e(mp,Xl.UPDATE_FETCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Pp(Pp({},e),{},{status:r})})),e(mp,Xl.UPDATE_SEARCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Pp(Pp({},e),{},{searchStatus:r})})),e(mp,Xl.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return Pp(Pp({},e),{},{fetchedShopIds:ue(new Set(n.concat(r)))})})),mp);function Up(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Up(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Up(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Lp,jp,Gp={currentPage:0,perPage:20,hasMore:!0},Fp=[hp,xp,Rp],Hp={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:Mp({},Gp),result:[]},status:"",searchResult:{pagination:Mp({},Gp),result:[],keyword:""},searchStatus:""},Vp=(0,tt.handleActions)(Mp(Mp({},Tp),kp),Hp),Bp=function(e){return e.toastReducer.toast},Yp=I(439).t,Qp=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=Yp("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=Yp("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?Yp("settings.failed_to_enable"):Yp("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?Yp("settings.message.save_successfully"):"delete"===t.action?Yp("settings.message.delete_successfully"):Yp("settings.message.import_successfully"):"save"===t.action?Yp("settings.message.failed_to_save"):"delete"===t.action?Yp("settings.message.failed_to_delete"):Yp("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?Yp("settings.failed_to_enable"):Yp("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?Yp("forward.exception",{forwardName:""}):Yp("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=Yp("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=Yp("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=Yp("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=Yp("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=Yp(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"private-image":r.message=Yp("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=Yp(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(Lp||(Lp={}));var qp=(0,tt.createActions)((e(jp={},Lp.COPY_SUCCEED_FEEDBACK,(function(){return{}})),e(jp,Lp.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),e(jp,Lp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),jp)),Wp=qp.copySucceedFeedback,Kp=qp.setToastInformation,zp=qp.setToastInformationSucceeded;function Jp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Jp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $p=N().mark(ef),Zp=N().mark(tf);function ef(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.type,n=t.error,o=t.toast,c.next=3,(0,Wt.select)(Fn);case 3:if(!c.sent){c.next=11;break}return a=null,r&&(a=Qp(!1,{type:r})),void 0!==n&&(a=n instanceof Ve||n instanceof Qe?n.handler():Qp(!1,{type:"server-error-tips"})),o&&(a=o),c.next=11,(0,Wt.put)(zp({toast:a}));case 11:case"end":return c.stop()}}),$p)}function tf(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Kp,ef);case 2:case"end":return e.stop()}}),Zp)}const rf=e({},Lp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e,t){var r=t.payload.toast;return Xp(Xp({},e),{},{toast:r})}));var nf=I(439).t,of=N().mark(cf),af=N().mark(sf);function cf(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.put)(Kp({toast:Qp(!0,{message:nf("common.successful_copied")})}));case 2:case"end":return e.stop()}}),of)}function sf(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Wp,cf);case 2:case"end":return e.stop()}}),af)}function uf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var df=[tf,sf],lf=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?uf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},rf),{toast:{type:"",message:"",show:!1}});function pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ff(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}R.MessageTypes.MSG_TYPE_TEXT;var _f,Ef,Sf=R.MessageTypes.MSG_TYPE_OFFER,hf=R.MessageTypes.MSG_TYPE_ORDER,Of=R.MessageTypes.MSG_TYPE_PRODUCT,vf=R.MessageTypes.MSG_TYPE_IMAGE,Tf=R.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,mf=R.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,gf=R.MessageTypes.MSG_TYPE_VIDEO,bf=R.MessageTypes.MSG_TYPE_NOTIFICATION,yf=R.MessageTypes.MSG_TYPE_WEBVIEW,Rf=R.MessageTypes.MSG_TYPE_RATE_CARD,Cf=R.MessageTypes.MSG_TYPE_RATE_CARDS,Pf=R.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,Df=[hf,Of],If=function(e){return(e.messageReducer||{}).faqHistoryStatus},Af=function(e){return(e.messageReducer||{}).faqHistoryHash},wf=function(e){return(e.messageReducer||{}).faqId},Nf=(0,Zt.createSelector)(Af,wf,(function(e,t){return e&&t&&e[t]||{all:[]}})),xf=function(e){return(e.messageReducer||{}).status},kf=(0,Zt.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),Uf=function(e){return e.messageReducer.offlineMessages},Mf=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},Lf=function(e){return(0,Zt.createSelector)(Mf,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},jf=function(e){return(0,Zt.createSelector)(Mf,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},Gf=function(e){return(0,Zt.createSelector)(ar,(function(r){return(0,t.denormalize)(e,c,{messages:r})}))},Ff=function(e){return(0,Zt.createSelector)(ar,(function(r){return(0,t.denormalize)(e,[c],{messages:r})}))},Hf=(0,Zt.createSelector)(Zc,kf,(function(e,t){return t[e]||{all:[]}})),Vf=function(e){return(0,Zt.createSelector)(kf,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},Bf=function(e){return(e.messageReducer||{}).messageFillStatusMap||{}},Yf=Am((function(e){return(0,Zt.createSelector)(Vf(e),gs(e),ar,(function(e,r,n){return function(e,r,n){var o=e.all||[],a=e.sending||[],s=e.failed||[],i=o.length,u=null;if(i){for(var d=0,l=null;d<i&&!l;){var p=e.all[d];(l=(0,t.denormalize)(p,c,{messages:n}))&&(l.type===R.MessageTypes.MSG_TYPE_SECURITY_TIPS||l.isFaking)&&(l=null),d++}l&&l.created_timestamp>Math.floor(r.last_message_time_nano/Math.pow(10,9))&&(u=(0,R.fillMessagePreview)(l))}if(!u){var f=r.latest_message_id,_=r.latest_message_content,E=r.latest_message_type,S=r.last_message_option,h=r.latest_message_source,O=r.last_message_time_nano;(u={id:f,content:_,type:E,message_option:S,source:h,to_shop_id:r.latest_message_to_shop_id}).created_at=new Date(O/1e6)+""}var v=u,T=v.id,m=v.message_option,g=a.includes(T)?R.MessageSendStatus.SENDING:s.includes(T)?R.MessageSendStatus.FAILED:u.send_status?R.MessageSendStatus.SUCCEED:null;return(0,R.hasTargetMessageOption)(m,R.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(g=R.MessageSendStatus.FAILED,u.type=Yi,u.content={text:Bi("common.blacklist.replaced_text")}),(0,R.hasTargetMessageOption)(m,R.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(g=R.MessageSendStatus.FAILED),u.send_status=g,u}(e,r,n)}))})),Qf=(0,Zt.createSelector)(Hf,(function(e){var t=ue(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),qf=(0,Zt.createSelector)(Hf,(function(e){return e.sending||[]})),Wf=(0,Zt.createSelector)(Hf,(function(e){return e.failed||[]})),Kf=(0,Zt.createSelector)(Hf,(function(e){return e.hasMoreOlderMessage})),zf=(0,Zt.createSelector)(Hf,(function(e){return e.hasMoreLatestMessage})),Jf=(0,Zt.createSelector)(Hf,(function(e){return e.hasNext})),Xf=function(e){return e.messageReducer.entryPoint},$f=function(e){return e.messageReducer.toBottomHasConflict},Zf=(0,Zt.createSelector)(ar,Qf,(function(e,r){return((0,t.denormalize)(r,[c],{messages:e})||[]).filter(Boolean)})),e_=function(e){return(0,Zt.createSelector)(Vf(e),ar,(function(e,r){return((0,t.denormalize)(e.all,[c],{messages:r})||[]).filter((function(e){return null==e?void 0:e.isFaking}))}))},t_=(0,Zt.createSelector)(Zf,(function(e){return e.reverse()})),r_=(0,Zt.createSelector)(t_,fs,(function(e,t){var r=0,n=[];return e.forEach((function(e,o){var a=(0,R.getMessageIsSend)(e,t);e.warning&&!a&&(o-r<10&&n.pop(),n.push(e.id),r=o)})),n})),n_=(0,Zt.createSelector)(fs,t_,(function(e,t){if(!e)return[];var r=e.last_read_message_id;return t.filter((function(t){var n=(0,R.getMessageIsSend)(t,e);return t&&!n&&(0,R.greaterThan)(t.id,r)&&t.type!==bf}))})),o_=(0,Zt.createSelector)(tr,Nf,(function(e,r){var n=r.all;return(0,t.denormalize)(n,[c],e)})),a_=(0,Zt.createSelector)(o_,t_,(function(e,t){return(e&&e.length?e:t).filter((function(e){var t=(e||{}).type;return!(0,R.isDeletedMessage)(e)&&[vf,gf,Pf].includes(t)}))})),c_=(0,Zt.createSelector)(a_,fs,Es,Pn,Rs,(function(e,t,r,n,o){var a=r&&r.country||"sg",c=(0,R.getVideoServer)(a);return e.map((function(e){var r="",a=!1,s=(0,R.getMessageIsSend)(e,t);switch(e.type){case vf:var i=e.content;r=1!==i.file_server_id&&i.url_hash?"".concat((0,R.getFileServer)()).concat(i.url_hash):i.url||i.localUrl,a=i.unknown_qr_code&&!s;break;case gf:var u=e.content;r=u.video_url?"".concat(c).concat(u.video_url):u.localVideoUrl;break;case Pf:var d=e.content;r=d.thumb_url?"".concat((0,R.getFileServer)()).concat(d.thumb_url):d.image_url}var l=e.id,p=e.type,f=e.request_id,_=e.content;return{type:p,id:l,url:r,unknownQrCode:a,trackerData:{shopid:o,account_type:n.role||"shopee_user",message_id:l===f?0:l,conversation_id:t.id,account_id:n.id,is_sender:s,video_original_duration:_.duration_seconds}}}))})),s_=(0,Zt.createSelector)(n_,(function(e){return e.length?e.map((function(e){return e.id})):[]})),i_=(0,Zt.createSelector)(fs,t_,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var r=t.type,n=t.source_type,o=t.source_content,a=t.content;if(!n||r===Sf||[-1,0].includes(o["".concat(n,"_id")]))return e;if(Df.includes(r)&&o){var c="".concat(r,"_id");if(a[c]===o[c])return e}var s=e.lastSourceMessage,i=e.sourceList;if(!i.length)return{sourceList:i.concat(t),lastSourceMessage:t};if(n===Of){var u=null==o?void 0:o.product_id,d=s.source_content&&s.source_content.product_id;if(!u||d===u)return e}else if(n===hf){var l=null==o?void 0:o.order_id,p=s.source_content&&s.source_content.order_id;if(!l||[-1,0,p].includes(l))return e}return{sourceList:i.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),u_=(0,Zt.createSelector)(i_,(function(e){return e.map((function(e){return e.id}))})),d_=(0,Zt.createSelector)(tr,Zf,(function(e,r){var n=r.filter((function(e){return e&&e.type===Sf})).map((function(e){return e.content.offer_id}));return(0,t.denormalize)(n,[d],e)})),l_=(0,Zt.createSelector)(t_,u_,qf,Wf,fs,pr,d_,(function(e,t,r,n,o,a,c){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![Tf,mf].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?R.MessageSendStatus.SENDING:n.includes(e.id)?R.MessageSendStatus.FAILED:e.send_status?R.MessageSendStatus.SUCCEED:null,s=t.includes(e.id),i=Object.assign({},e,{send_status:o,hasMessageSource:s}),u=i,d=u.type,l=u.content,p=void 0===l?{}:l,f=u.message_option;switch(d){case Sf:var _=c.find((function(e){return e&&e.id===p.offer_id}));i=Object.assign({},i,{textContent:_});break;case Rf:var E=a[p.card_id];E&&(i=Object.assign({},i,{textContent:E}));break;case yf:var S=p,h=S.type,O=S.id,v=null;h===Cf&&(v=a[O]),v&&(i=Object.assign({},i,{textContent:v}))}return(0,R.hasTargetMessageOption)(f,R.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=ff(ff({},i),{},{send_status:R.MessageSendStatus.FAILED,errorCode:R.MessageErrorCode.BLACKLIST})),i})):[]})),p_=function(e){return(0,Zt.createSelector)(pr,(function(r){return(0,t.denormalize)(e,E,{rateCards:r})}))},f_=(0,Zt.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),__=(0,Zt.createSelector)(Zc,f_,(function(e,t){return t[e]||""})),E_=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.scrollToMessageId},S_=(0,Zt.createSelector)(__,ar,(function(e,r){return(0,t.denormalize)(e,c,{messages:r})})),h_=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.inScrollToMessage},O_=function(e){return e.messageShortcutGroupReducer},v_=function(e){return e.messageShortcutGroupReducer&&e.messageShortcutGroupReducer.currentGroupType},T_=(0,Zt.createSelector)(O_,v_,(function(e,t){return e&&e[t]||{groups:[],status:""}})),m_=(0,Zt.createSelector)(T_,(function(e){return e.status})),g_=(0,Zt.createSelector)(T_,(function(e){return e.currentGroupId})),b_=(0,Zt.createSelector)(T_,(function(e){var t=e.groups,r=void 0===t?[]:t,n=e.currentGroupId,o=(r.find((function(e){return e.id===n}))||{}).message_shortcuts;return void 0===o?[]:o})),y_=(0,Zt.createSelector)(O_,(function(e){var t=(e&&e[R.MessageShortcutGroupType.PERSONAL]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),R_=(0,Zt.createSelector)(O_,(function(e){var t=(e&&e[R.MessageShortcutGroupType.TEAM]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),C_=(0,Zt.createSelector)(y_,R_,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(ue(e),ue(t))})),P_=function(e){return e.settingsReducer.settings},D_=function(e){return e.settingsReducer.needForceUpdate},I_=function(e){return e.settingsReducer.status},A_=function(e){return e.settingsReducer.fetchStatus},w_=(0,Zt.createSelector)(P_,(function(e){return e.auto_translation_status||""})),N_=(0,Zt.createSelector)(P_,(function(e){return e.show_msg_time||"enabled"})),x_=(0,Zt.createSelector)(P_,(function(e){return e.message_shortcuts_status||""})),k_=(0,Zt.createSelector)(P_,(function(e){return e.legacy_message_shortcuts_count||0})),U_=(0,Zt.createSelector)(P_,(function(e){return e.distribution_account_status||"enabled"}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(_f||(_f={}));var M_,L_=(0,tt.createActions)((e(Ef={},_f.FETCH_SETTINGS_REQUESTED,(function(){return{}})),e(Ef,_f.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),e(Ef,_f.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),e(Ef,_f.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),e(Ef,_f.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),e(Ef,_f.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),e(Ef,_f.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),Ef)),j_=L_.fetchSettingsRequested,G_=L_.fetchSettingsSucceeded,F_=L_.fetchSettingsStatus;function H_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?H_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}L_.updateSettingStatus,L_.updateSettingsRequestedByType,L_.updateSettingsRequested,L_.updateSettingsSucceeded;var B_=N().mark(Q_),Y_=N().mark(q_);function Q_(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Wt.put)(F_({fetchStatus:R.DataFetchStatus.PENDING}));case 3:return t.next=5,(0,Wt.call)(it,{parent:"user",resource:"setting"});case 5:return e=t.sent,t.next=8,(0,Wt.put)(G_({settings:e,fetchStatus:R.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return t.abrupt("return",e);case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,(0,Wt.put)(F_({fetchStatus:R.DataFetchStatus.FAILED}));case 15:return t.abrupt("return",{});case 16:case"end":return t.stop()}}),B_,null,[[0,11]])}function q_(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeLatest)([j_],Q_);case 2:case"end":return e.stop()}}),Y_)}const W_=(e(M_={},_f.FETCH_SETTINGS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.settings,o=r.fetchStatus,a=r.timestamp,c=r.needForceUpdate;return V_(V_({},e),{},{settings:n,fetchStatus:o,timestamp:a,needForceUpdate:c})})),e(M_,_f.FETCH_SETTINGS_STATUS,(function(e,t){var r=t.payload.fetchStatus;return V_(V_({},e),{},{fetchStatus:r})})),M_);function K_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var z_,J_,X_=[q_],$_=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?K_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},W_),{settings:{},fetchStatus:""}),Z_={currentPage:0,perPage:20,total:0,hasMore:!0},eE=function(e){return e.offerReducer.status},tE=(0,Zt.createSelector)(tr,(function(e){return e.offers||{}})),rE=function(e,t,r,n){return(0,Zt.createSelector)(tE,(function(o){return Object.values(o).filter((function(o){return o.product_id===n&&o.model_id===t&&o.conversation_id===e&&o.id!==r&&o.status===R.OfferStatus.PENDING}))}))},nE=function(e){return(0,Zt.createSelector)(tr,(function(r){return(0,t.denormalize)(e,d,r)}))},oE=function(e){return e.offerReducer.fetchResult},aE=function(e,t){return(0,Zt.createSelector)(oE,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:Z_,result:[]}}))},cE=(0,Zt.createSelector)(oE,fs,(function(e,t){var r=t.shop_id,n=t.to_id,o=e["".concat(r,"_").concat(n)];return o?o.pagination:Z_})),sE=(0,Zt.createSelector)(oE,fs,tr,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[d],n).filter((function(e){return e}))})),iE=(0,tt.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;!function(e){e.REMOVE_SINGLE_DRAFT="REMOVE_SINGLE_DRAFT",e.REMOVE_ALL_DRAFT="REMOVE_ALL_DRAFT",e.BATCH_REMOVE_DRAFT="BATCH_REMOVE_DRAFT",e.SAVE_DRAFT="SAVE_DRAFT"}(z_||(z_={}));const uE=(e(J_={},z_.REMOVE_SINGLE_DRAFT,(function(e,t){var r=t.payload.conversationId,n=Ni({},e.draftHash);return delete n[r],Ni(Ni({},e),{},{draftHash:n})})),e(J_,z_.REMOVE_ALL_DRAFT,(function(e){return Ni(Ni({},e),{},{draftHash:{}})})),e(J_,z_.BATCH_REMOVE_DRAFT,(function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=Ni({},e.draftHash);return n.forEach((function(e){delete o[e]})),Ni(Ni({},e),{},{draftHash:o})})),J_),dE=e({},z_.SAVE_DRAFT,(function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,a=Ni({},e.draftHash);return a[n]=o,Ni(Ni({},e),{},{draftHash:a})}));var lE,pE=(0,tt.createActions)((e(lE={},z_.REMOVE_SINGLE_DRAFT,(function(e){return{conversationId:e.conversationId}})),e(lE,z_.REMOVE_ALL_DRAFT,(function(){return{}})),e(lE,z_.BATCH_REMOVE_DRAFT,(function(e){return{conversationIds:e.conversationIds}})),e(lE,z_.SAVE_DRAFT,(function(e){return{conversationId:e.conversationId,draft:e.draft}})),lE)),fE=pE.removeSingleDraft,_E=pE.removeAllDraft,EE=pE.batchRemoveDraft,SE=pE.saveDraft;function hE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function OE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?hE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vE=(0,tt.handleActions)(OE(OE({},dE),uE),{draftHash:{}}),TE=function(e){return e.draftReducer.draftHash},mE=function(e){return(0,Zt.createSelector)(TE,(function(t){return t[e]}))},gE=(0,Zt.createSelector)(Zc,TE,(function(e,t){return e&&t[e]}));function bE(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function yE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?yE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var CE,PE=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.exceptionType,a=e.reconnectCount,c=void 0===a?0:a,s=e.exceptionReason,i=void 0===s?"":s,u={status:-1,userId:t,userType:r};if(o===R.SocketConnectionStatus.DISCONNECT){var d=c<=5?"s":c<=10?"m":"l";u=RE(RE({},u),{},{reconnectType:d,exceptionReason:i,exceptionType:o})}else u=RE(RE({},u),{},{exceptionType:o});Gt(Mt[n?"SOCKET_FAILED":"CHATWS_SOCKET_FAILED"],0,u)};!function(e){e.FEEDBACK_REQUESTED="FEEDBACK_REQUESTED",e.FEEDBACK_SUCCEEDED="FEEDBACK_SUCCEEDED",e.UPDATE_RECONNECT_FLAG="UPDATE_RECONNECT_FLAG",e.UPDATE_NOTICES_COUNT="UPDATE_NOTICES_COUNT",e.UPDATE_C_S_SOCKET_STATUS="UPDATE_C_S_SOCKET_STATUS"}(CE||(CE={}));var DE=I(439).t,IE=["type"];function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?AE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var NE,xE,kE=N().mark(LE),UE=N().mark(jE),ME=function(e){return WE({feedback:{status:e,network:!0,content:DE("common.toast.".concat(e))}})};function LE(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__WEBCHAT_LOGIN__){e.next=19;break}return e.next=3,(0,Wt.select)(In);case 3:if(!e.sent){e.next=19;break}return e.next=7,(0,Wt.select)(Pn);case 7:if("working"!==(e.sent||{}).distribution_status){e.next=19;break}return e.prev=10,e.next=13,(0,Wt.call)(it,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_event",payload:JSON.stringify({event_type:"login"})});case 13:window.__WEBCHAT_LOGIN__=!1,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),window.__WEBCHAT_LOGIN__=!1;case 19:case"end":return e.stop()}}),kE,null,[[10,16]])}function jE(e,t){return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next=r.t0===R.ShareDataType.UNREAD?3:6;break;case 3:return r.next=5,(0,Wt.put)(rn({count:t.total_unread_count}));case 5:return r.abrupt("break",6);case 6:case"end":return r.stop()}}),UE)}var GE=(0,tt.createActions)(e({},CE.UPDATE_RECONNECT_FLAG,(function(e){return{flag:e.flag}}))).updateReconnectFlag;NE=N().mark((function e(t){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==(r=t.status)){e.next=8;break}return e.next=4,(0,Wt.put)(aa({socketSuccess:!0}));case 4:return e.next=6,(0,Wt.spawn)(LE);case 6:e.next=11;break;case 8:return Gt(Mt.SOCKET_FAILED,0,{status:r}),e.next=11,(0,Wt.put)(aa({socketSuccess:!1}));case 11:case"end":return e.stop()}}),e)})),xE=N().mark((function e(t){var r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.event,n=t.payload,"reportUPLPoint"!==r){e.next=9;break}return e.next=4,(0,R.getItem)("session");case 4:c=e.sent,s=c&&c.user,u=(i=s||{}).id,d=i.type,o=u,a=d;case 9:e.t0=r,e.next=e.t0===R.SocketConnectionStatus.CONNECT?12:e.t0===R.SocketConnectionStatus.DISCONNECT?38:e.t0===R.SocketConnectionStatus.RECONNECT_ERROR?43:e.t0===R.SocketConnectionStatus.RECONNECTING?49:e.t0===R.SocketConnectionStatus.RECONNECT?52:"emit"===e.t0?55:"close"===e.t0?60:"ack"===e.t0?63:"reportUPLPoint"===e.t0?65:"reportConnections"===e.t0?67:"setMainPage"===e.t0?69:"shareApiData"===e.t0?72:76;break;case 12:return e.next=14,(0,Wt.select)(FS);case 14:if(!e.sent){e.next=19;break}return l=1e3*Math.floor(30*Math.random()+1),e.next=19,(0,Wt.delay)(l);case 19:return e.next=21,(0,Wt.put)(KE({feedback:void 0}));case 21:return e.next=23,(0,R.getItem)("mini-session");case 23:if(p=e.sent,f=p&&p.p_token,_=p&&p.user,!f||!_){e.next=33;break}return e.next=29,(0,Wt.call)(X,{token:f,account_id:_.uid});case 29:if(E=e.sent,z){e.next=33;break}return e.next=33,(0,Wt.call)(NE,E);case 33:return e.next=35,(0,Wt.put)(GE({flag:!1}));case 35:return e.next=37,(0,Wt.put)(aa({socketSuccess:!0}));case 37:return e.abrupt("break",76);case 38:return e.next=40,(0,Wt.put)(GE({flag:!0}));case 40:return e.next=42,(0,Wt.put)(ME("error"));case 42:return e.abrupt("break",76);case 43:return e.next=45,(0,Wt.put)(ME("error"));case 45:return Gt(Mt.SOCKET_FAILED,0,{status:-1}),e.next=48,(0,Wt.put)(aa({socketSuccess:!1}));case 48:return e.abrupt("break",76);case 49:return e.next=51,(0,Wt.put)(ME("pending"));case 51:return e.abrupt("break",76);case 52:return e.next=54,(0,Wt.put)(ME("resolved"));case 54:return e.abrupt("break",76);case 55:if(h=(S=n).type,O=S.response,"login"!==h){e.next=59;break}return e.next=59,(0,Wt.call)(NE,O);case 59:return e.abrupt("break",76);case 60:return e.next=62,(0,Wt.call)(Gc,!1);case 62:return e.abrupt("break",76);case 63:return J.dispatch(R.CustomShareEvent.ACK),e.abrupt("break",76);case 65:return PE(n,o,a),e.abrupt("break",76);case 67:return Gt(Mt.SHARED_TABS,n),e.abrupt("break",76);case 69:return e.next=71,(0,Wt.put)(Sc({isMainPage:n.isMainPage}));case 71:return e.abrupt("break",76);case 72:return T=(v=n).type,m=bE(v,IE),e.next=75,(0,Wt.call)(jE,T,m);case 75:return e.abrupt("break",76);case 76:case"end":return e.stop()}}),e)}));const FE=e({},CE.UPDATE_RECONNECT_FLAG,(function(e,t){var r=t.payload.flag;return wE(wE({},e),{},{reconnectFlag:r})}));var HE;function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function BE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?VE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var YE=N().mark(zE),QE=N().mark(JE),qE=(0,tt.createActions)((e(HE={},CE.FEEDBACK_REQUESTED,(function(e){return{feedback:e.feedback}})),e(HE,CE.FEEDBACK_SUCCEEDED,(function(e){return{feedback:e.feedback}})),HE)),WE=qE.feedbackRequested,KE=qE.feedbackSucceeded;function zE(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.feedback,r.next=3,(0,Wt.put)(KE({feedback:t}));case 3:return r.next=5,(0,Wt.delay)(2500);case 5:return r.next=7,(0,Wt.put)(KE({feedback:void 0}));case 7:case"end":return r.stop()}}),YE)}function JE(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Wt.actionChannel)(WE);case 2:e=n.sent;case 3:return n.next=6,(0,Wt.take)(e);case 6:return t=n.sent,r=t.payload,n.next=10,(0,Wt.call)(zE,{payload:r});case 10:n.next=3;break;case 12:case"end":return n.stop()}}),QE)}const XE=e({},CE.FEEDBACK_SUCCEEDED,(function(e,t){var r=t.payload.feedback;return BE(BE({},e),{},{feedback:r})}));var $E=I(655);function ZE(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var eS=I(439).t,tS=N().mark(iS),rS=N().mark(uS);function nS(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return oS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function oS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?aS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sS=function(e,t){var r,n,o=t.conversation,a=t.read,c=t.pinned,s=t.offer,i=t.status,u=t.userId,d=t.flag,l=t.cardId,p=t.mute;switch(e){case"conversations":r=d?{flag:d}:i?{status:i}:a?{last_read_message_id:o.latest_message_id,unread_count:0}:{unread_count:o.unread_count+1},void 0!==c&&(r={pinned:c}),void 0!==p&&(r={mute:p}),n=o.id;break;case"offers":r={status:i},n=s.id;break;case"users":r={distribution_status:i},n=u;break;case"rateCards":r={status:i},n=l}return yr({name:e,id:n,record:r})};function iS(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,m,g,b,y,C,P,D,I,A,w,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z,J,X,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,de,le,pe,fe,_e,Ee,Se,he,Oe,ve,Te;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.type,r=e.payload,N.next=3,(0,Wt.select)(_n);case 3:return n=N.sent,N.next=6,(0,Wt.select)(Zc);case 6:if(o=N.sent,"notification"!==t){N.next=303;break}if(c=(a=r).type,s=a.user_id,i=a.from_id,u=a.content,d=u.flag,l=u.status,p=u.card_id,f=u.offer_id,_=u.shop_id,E=u.request_id,S=u.conversation_id,h=u.conversation_ids,O=void 0===h?[]:h,v=u.is_main_agent_change,m=u.msg_id,g=u.faq_session_id,b=u.expiry_time,y=u.is_auto_update,C={},P={},!S){N.next=17;break}return N.next=14,(0,Wt.select)(gs(S));case 14:C=N.sent,N.next=22;break;case 17:if(!f){N.next=22;break}return N.next=20,(0,Wt.select)(tE);case 20:D=N.sent,P=D[f];case 22:return I=C&&n===s,N.next=25,(0,Wt.select)(ds);case 25:A=N.sent,w="Unread"===A,N.t0=c,N.next="mark_as_read"===N.t0?30:"mark_as_unread"===N.t0?59:"delete_conversation"===N.t0?67:"update_offer_status"===N.t0?86:"update_conversation"===N.t0?100:"update_user_status"===N.t0?128:"update_conversation_flag"===N.t0?152:"force_logout"===N.t0?156:"update_rating_card_status"===N.t0?159:"pin_conversation"===N.t0?162:"unpin_conversation"===N.t0?165:"mass_read"===N.t0?171:"mass_unread"===N.t0?181:"mass_pin"===N.t0?191:"mass_unpin"===N.t0?197:"mass_activate"===N.t0?203:"mass_close"===N.t0?232:"video_upload"===N.t0?251:N.t0===Qi||"mark_as_replied"===N.t0?260:"chat_delete_msg"===N.t0?268:"faq_session_update"===N.t0?289:"mute_conversation"===N.t0?293:"unmute_conversation"===N.t0?297:301;break;case 30:if(!I){N.next=58;break}return N.next=33,(0,Wt.select)((function(e){return e.conversationReducer}));case 33:return k=N.sent,U=k.conversationMark,M="api"===U[S],N.next=38,(0,Wt.put)(Zs({conversationId:S,markType:M?"":"socket"}));case 38:return N.next=40,(0,Wt.select)(zc);case 40:if(L=N.sent,j=L.findIndex((function(e){return e===E})),-1===j){N.next=51;break}return Gt(Mt.READ_SOCKET,Date.now()-E),N.next=46,(0,Wt.select)(Jc);case 46:return G=N.sent,j>0&&(G+=j),L=L.slice(j+1),N.next=51,(0,Wt.put)(ei({requestIds:L,count:G}));case 51:if(M){N.next=58;break}if(!C.unread_count){N.next=58;break}return N.next=56,(0,Wt.put)(sS("conversations",{conversation:C,read:!0}));case 56:return N.next=58,(0,Wt.put)(tn({type:Wr.MARK_AS_READ,conversation:C}));case 58:return N.abrupt("break",301);case 59:if(w&&(I=C&&n===s),!I){N.next=66;break}if(0!==C.unread_count){N.next=64;break}return N.next=64,(0,Wt.put)(sS("conversations",{conversation:C,read:!1}));case 64:return N.next=66,(0,Wt.put)(tn({type:Wr.MARK_AS_UNREAD,conversation:C}));case 66:return N.abrupt("break",301);case 67:return N.next=69,Uo().put(Lo().deleteConversationMessageHash({payload:{conversationId:S},isLazy:!0}));case 69:return N.next=71,(0,Wt.put)(fE({conversationId:S}));case 71:return N.next=73,(0,Wt.put)(Bs({conversationId:S}));case 73:return N.next=75,(0,Wt.put)(Rr({name:"conversations",id:S}));case 75:return N.next=77,(0,Wt.select)(Kc);case 77:if(!(N.sent.length<20)){N.next=81;break}return N.next=81,(0,Wt.put)(qs({direction:"older"}));case 81:if(!C){N.next=85;break}return N.next=85,(0,Wt.put)(tn({type:Wr.DELETE_CONVERSATION,conversation:C}));case 85:return N.abrupt("break",301);case 86:if(!P||!l||l===R.OfferStatus.PENDING){N.next=99;break}return F=r.conversation_id,N.next=90,(0,Wt.select)(gs(F));case 90:return H=N.sent,N.next=93,(0,Wt.put)(sS("offers",{offer:P,status:l}));case 93:return N.next=95,(0,Wt.put)(gi({buyerId:P.buyer_id,shopId:P.shop_id}));case 95:if(V=H.latest_message_type,B=H.latest_message_content,V!==R.MessageTypes.MSG_TYPE_OFFER||(null==B?void 0:B.offer_id)!==f||(null==B?void 0:B.status)!==R.OfferStatus.PENDING){N.next=99;break}return N.next=99,(0,Wt.put)(yr({name:"conversations",id:F,record:{latest_message_content:cS(cS({},B),{},{status:l})}}));case 99:return N.abrupt("break",301);case 100:if(!I){N.next=127;break}return ZE(C),N.next=105,(0,Wt.put)(sS("conversations",{conversation:C,status:l}));case 105:if("closed"!==l){N.next=118;break}return N.next=108,(0,Wt.put)(XS({conversationId:S}));case 108:return N.next=110,(0,Wt.put)(fE({conversationId:S}));case 110:return N.next=112,Uo().call(Lo().deleteFakingMessages({payload:{conversationId:S}}));case 112:return N.next=114,(0,Wt.put)(tn({type:Wr.CLOSE_CONVERSATION,conversation:C}));case 114:return N.next=116,(0,Wt.put)(sS("conversations",{conversation:C,read:!0}));case 116:N.next=127;break;case 118:if("activated"!==l){N.next=127;break}return o===S&&Uo().put(Lo().fetchMessagesRequested({payload:{conversationId:S,reset:!0},isLazy:!0})),N.next=123,(0,Wt.select)(Kc);case 123:if(!N.sent.includes(S)){N.next=127;break}return N.next=127,(0,Wt.put)(Ys({conversationId:S}));case 127:return N.abrupt("break",301);case 128:return N.next=130,(0,Wt.select)(Kn);case 130:if(Y=N.sent,n!==s){N.next=149;break}if(!y){N.next=140;break}if(Y){N.next=138;break}return N.next=136,(0,Wt.put)(Vr({type:"CONFIRM_MODAL",title:eS("modal.title.auto_switch_to_hangup"),actions:{confirm:{label:eS("common.close"),handler:function(){x.store.dispatch(Br()),x.store.dispatch(Xo({showAutoHangupModal:!1}))}}},additions:{content:eS("modal.content.auto_switch_to_hangup")}}));case 136:return N.next=138,(0,Wt.put)(Xo({showAutoHangupModal:!0}));case 138:N.next=146;break;case 140:if("working"!==l){N.next=146;break}if(!Y){N.next=146;break}return N.next=144,(0,Wt.put)(Br());case 144:return N.next=146,(0,Wt.put)(Xo({showAutoHangupModal:!1}));case 146:if(!v){N.next=149;break}return N.next=149,(0,Wt.put)(Vr({type:"CONFIRM_MODAL",title:eS("common.confirm"),additions:{content:{key:"modal.content.switch_status",vars:{status:eS("common.".concat("working"===l?"online":"offline"))}}},actions:{confirm:{label:eS("common.ok")}}}));case 149:return N.next=151,(0,Wt.put)(sS("users",{userId:s,status:l}));case 151:return N.abrupt("break",301);case 152:if(!I){N.next=155;break}return N.next=155,(0,Wt.put)(sS("conversations",{conversation:C,flag:d}));case 155:return N.abrupt("break",301);case 156:return N.next=158,(0,Wt.call)(Fc);case 158:return N.abrupt("break",301);case 159:return N.next=161,(0,Wt.put)(sS("rateCards",{cardId:p,status:l}));case 161:return N.abrupt("break",301);case 162:return N.next=164,(0,Wt.put)(sS("conversations",{conversation:C,pinned:!0}));case 164:return N.abrupt("break",301);case 165:return N.next=167,(0,Wt.put)(sS("conversations",{conversation:C,pinned:!1}));case 167:if(o!==S||"Pinned"!==A){N.next=170;break}return N.next=170,(0,Wt.put)(ai());case 170:return N.abrupt("break",301);case 171:if(!(Q=O.length)){N.next=180;break}return q={},O.forEach((function(e){q[e]={unread_count:0}})),N.next=177,(0,Wt.put)(Cr({name:"conversations",records:q}));case 177:return W=Object.assign({},{count:Q,type:Wr.MASS_READ},_?{shopId:_}:{}),N.next=180,(0,Wt.put)(tn(W));case 180:return N.abrupt("break",301);case 181:if(K=O.length,!O.length){N.next=190;break}return z={},O.forEach((function(e){z[e]={unread_count:1}})),N.next=187,(0,Wt.put)(Cr({name:"conversations",records:z}));case 187:return J=Object.assign({},{count:K,type:Wr.MASS_UNREAD},_?{shopId:_}:{}),N.next=190,(0,Wt.put)(tn(J));case 190:return N.abrupt("break",301);case 191:if(!O.length){N.next=196;break}return X={},O.forEach((function(e){X[e]={pinned:!0}})),N.next=196,(0,Wt.put)(Cr({name:"conversations",records:X}));case 196:return N.abrupt("break",301);case 197:if(!O.length){N.next=202;break}return $={},O.forEach((function(e){$[e]={pinned:!1}})),N.next=202,(0,Wt.put)(Cr({name:"conversations",records:$}));case 202:return N.abrupt("break",301);case 203:return N.next=205,(0,Wt.put)(qs({direction:"latest"}));case 205:if(!O.length){N.next=231;break}Z={},ee=nS(O),N.prev=209,ee.s();case 211:if((te=ee.n()).done){N.next=219;break}if(re=te.value,Z[re]={status:"activated"},o!==re){N.next=217;break}return N.next=217,Uo().put(Lo().fetchMessagesRequested({payload:{conversationId:o,reset:!0},isLazy:!0}));case 217:N.next=211;break;case 219:N.next=224;break;case 221:N.prev=221,N.t1=N.catch(209),ee.e(N.t1);case 224:return N.prev=224,ee.f(),N.finish(224);case 227:return N.next=229,(0,Wt.put)(Cr({name:"conversations",records:Z}));case 229:return N.next=231,(0,Wt.call)(handleNotifyBatchConversation);case 231:return N.abrupt("break",301);case 232:if(!O.length){N.next=250;break}return ne={},oe=[],N.next=238,(0,Wt.select)(ys(O));case 238:return ae=N.sent,ce=ae.filter((function(e){return(null==e?void 0:e.unread_count)>0})),O.forEach((function(e){ne[e]={status:"closed",unread_count:0},oe.push((0,Wt.put)(XS({conversationId:e}))),Uo().call(Lo().deleteFakingMessages({payload:{conversationId:e}}))})),N.next=243,(0,Wt.all)(oe);case 243:return N.next=245,(0,Wt.put)(Cr({name:"conversations",records:ne}));case 245:return se=Object.assign({},{count:ce.length,type:Wr.MASS_CLOSE},_?{shopId:_}:{}),N.next=248,(0,Wt.put)(tn(se));case 248:return N.next=250,(0,Wt.put)(EE({conversationIds:O}));case 250:return N.abrupt("break",301);case 251:return ie=r.content,N.next=254,(0,Wt.select)(jf(ie.vid));case 254:return ue=N.sent,N.next=257,(0,Wt.select)(Lf(ue));case 257:return N.sent.status||(de=ie.status,le=ie.vid,"successful"===de&&(pe=performance.getEntriesByName("REPORT_UPLOAD_".concat(le),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(le)),fe=performance.getEntriesByName("SERVICE_DONE_".concat(le))[0].startTime-pe.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(le)),performance.clearMarks("SERVICE_DONE_".concat(le)),Gt(Mt.SERVICE_DONE,fe)),Uo().put(Lo().updateVideoInfo({payload:{id:ue,info:{status:de,uploadResult:ie}}}))),N.abrupt("break",301);case 260:if("Unreplied"!==A){N.next=267;break}return N.next=263,(0,Wt.select)(Kc);case 263:if(!N.sent.includes(S)){N.next=267;break}return N.next=267,(0,Wt.put)(yr({name:"conversations",id:S,record:{unreplied:c===Qi}}));case 267:return N.abrupt("break",301);case 268:return N.next=270,(0,Wt.select)(Gf(m));case 270:if(!(_e=N.sent)){N.next=283;break}return Ee=_e.message_option|R.MessageOption.MSG_OPT_DELETE,Se=T("messages",cS(cS({},_e),{},{message_option:Ee})),he=Se.entities,N.next=276,(0,Wt.put)(br({entities:he}));case 276:if(![R.MessageTypes.MSG_TYPE_VIDEO,R.MessageTypes.MSG_TYPE_IMAGE,R.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT].includes(_e.type)){N.next=283;break}return N.next=279,(0,Wt.select)((function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId}));case 279:if(N.sent!==m){N.next=283;break}return N.next=283,(0,Wt.put)(ch());case 283:if(!C||C.latest_message_id!==m){N.next=288;break}return Oe=C.last_message_option|R.MessageOption.MSG_OPT_DELETE,ve=T("conversations",cS(cS({},C),{},{last_message_option:Oe,latest_message_content:{text:""},latest_message_from_id:i})),Te=ve.entities,N.next=288,(0,Wt.put)(br({entities:Te}));case 288:return N.abrupt("break",301);case 289:if(!I){N.next=292;break}return N.next=292,(0,Wt.put)(mO({faqSessionId:g,sessionExpiryTime:b,conversationId:S}));case 292:return N.abrupt("break",301);case 293:if(!I){N.next=296;break}return N.next=296,(0,Wt.put)(sS("conversations",{conversation:C,mute:!0}));case 296:return N.abrupt("break",301);case 297:if(!I){N.next=300;break}return N.next=300,(0,Wt.put)(sS("conversations",{conversation:C,mute:!1}));case 300:return N.abrupt("break",301);case 301:N.next=306;break;case 303:if("message"!==t){N.next=306;break}return N.next=306,(0,Wt.call)(Mi,{payload:r,type:R.ConversationTypeEnum.Normal});case 306:case"end":return N.stop()}}),tS,null,[[209,221,224,227]])}function uS(e){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Wt.call)(iS,e);case 2:case"end":return t.stop()}}),rS)}function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pS=N().mark(hS),fS=N().mark(OS),_S=(0,tt.createActions)(e({},CE.UPDATE_NOTICES_COUNT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"add":t;return{type:r}}))),ES=_S.updateNoticesCount,SS=function(){return(0,$E.eventChannel)((function(e){return z?J.on("message",(function(t){var r=t.data,n=r.message_type,o=r.message_content,a=r.worker_event,c=r.payload;e(a?{event:a,payload:void 0===c?{}:c}:{pushedType:n,payload:JSON.parse(o)})})):(Object.values(R.SocketConnectionStatus).forEach((function(t){J.on(t,(function(){return e({event:t})}))})),J.on("message",(function(t){if(t){var r=t.message_type,n=t.message_content;e({pushedType:r,payload:JSON.parse(n)})}}))),function(){}}))};function hS(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.event,r=e.pushedType,n=e.payload,!t){o.next=6;break}return o.next=4,(0,Wt.call)(xE,{event:t,payload:n});case 4:o.next=11;break;case 6:if(!r){o.next=11;break}return o.next=9,(0,Wt.put)(ES());case 9:return o.next=11,(0,Wt.call)(uS,{type:r,payload:n});case 11:case"end":return o.stop()}}),pS)}function OS(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Wt.call)(SS);case 2:return e=t.sent,t.next=5,(0,Wt.takeEvery)(e,hS);case 5:case"end":return t.stop()}}),fS)}const vS=e({},CE.UPDATE_NOTICES_COUNT,(function(e,t){var r=t.payload.type;return lS(lS({},e),{},{noticesCount:"add"===r?e.noticesCount+1:0})}));function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?TS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gS=N().mark(DS),bS=N().mark(IS),yS=N().mark(AS),RS=!1,CS=(0,tt.createActions)(e({},CE.UPDATE_C_S_SOCKET_STATUS,(function(e){return{csSocketLogined:e.csSocketLogined,csSocketConnected:e.csSocketConnected}}))).updateCSSocketStatus,PS=function(e){return(0,$E.eventChannel)((function(t){return gT?e.on("message",(function(e){var r=e.data,n=r.worker_event,o=r.payload;n&&t({event:n,payload:void 0===o?{}:o})})):(Object.values(R.SocketConnectionStatus).forEach((function(r){e.on(r,(function(e){return t({event:r,payload:e})}))})),e.on("message",(function(e){e&&t({event:"message",payload:e})}))),function(){}}))};function DS(e){var t,r,n,o,a,c,s,i,u,d;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.event,r=e.payload,!t){l.next=36;break}l.t0=t,l.next=l.t0===R.SocketConnectionStatus.CONNECT?5:l.t0===R.SocketConnectionStatus.DISCONNECT?9:"ack"===l.t0?19:"reportUPLPoint"===l.t0?21:"message"===l.t0?28:36;break;case 5:return l.next=7,(0,Wt.put)(CS({csSocketConnected:!0}));case 7:return yT(),l.abrupt("break",36);case 9:return l.next=11,(0,Wt.put)(CS({csSocketConnected:!1}));case 11:if(RS){l.next=17;break}return l.next=14,(0,Wt.delay)(3e3);case 14:bT.connect(),l.next=18;break;case 17:RS=!1;case 18:return l.abrupt("break",36);case 19:return bT.dispatch("ack"),l.abrupt("break",36);case 21:return l.next=23,(0,R.getItem)("session");case 23:return n=l.sent,o=n&&n.user,c=(a=o||{}).id,s=a.type,PE(r,c,s,!1),l.abrupt("break",36);case 28:if("string"!=typeof r){l.next=36;break}if(i=r.indexOf("{"),"13"!==r.slice(0,i)){l.next=36;break}u=!1;try{d=JSON.parse(r.slice(i)),u=0===d.errcode}catch(e){}return l.next=36,(0,Wt.put)(CS({csSocketLogined:u}));case 36:case"end":return l.stop()}}),gS)}function IS(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Wt.call)(PS,bT);case 2:return e=t.sent,t.next=5,(0,Wt.takeEvery)(e,DS);case 5:case"end":return t.stop()}}),bS)}function AS(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e="mini-session";case 1:return t=60*Math.floor(10*Math.random()+20)*1e3,n.next=5,(0,Wt.delay)(t);case 5:return n.next=7,(0,R.getItem)(e);case 7:if(!(r=n.sent)||!r.user||r.user.type!==R.AccountType.SELLER){n.next=15;break}if(!bT){n.next=15;break}return RS=!0,bT.close(),n.next=14,(0,Wt.delay)(1e3);case 14:bT.connect();case 15:n.next=1;break;case 17:case"end":return n.stop()}}),yS)}const wS=e({},CE.UPDATE_C_S_SOCKET_STATUS,(function(e,t){var r=t.payload,n=r.csSocketLogined,o=r.csSocketConnected,a={};return void 0!==n&&(a.csSocketLogined=n),void 0!==o&&(a.csSocketConnected=o),mS(mS({},e),a)}));var NS=N().mark(xS);function xS(){var e,t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e="mini-session";case 1:return c.next=4,(0,Wt.delay)(6e4);case 4:return c.next=6,(0,R.getItem)(e);case 6:return t=c.sent,c.next=9,(0,Wt.select)(HS);case 9:return r=c.sent,c.next=12,(0,Wt.select)(Jc);case 12:return n=c.sent,c.next=15,(0,Wt.select)(VS);case 15:return o=c.sent,c.next=18,(0,Wt.select)(BS);case 18:if(a=c.sent,!t||!t.token){c.next=25;break}return $({noticesCount:r,readMissedCount:n,csSocketLogined:o,csSocketConnected:a}),c.next=23,(0,Wt.put)(ei({count:0}));case 23:return c.next=25,(0,Wt.put)(ES({type:"reset"}));case 25:c.next=1;break;case 27:case"end":return c.stop()}}),NS)}function kS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function US(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?kS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var MS,LS=[JE,xS,OS,IS,AS],jS=(0,tt.handleActions)(US(US(US(US({},FE),XE),vS),wS),{reconnectFlag:!1,feedback:null,noticesCount:0,csSocketLogined:!1,csSocketConnected:!1}),GS=function(e){return e.socketReducer.feedback},FS=function(e){return e.socketReducer.reconnectFlag},HS=function(e){return e.socketReducer.noticesCount},VS=function(e){return e.socketReducer.csSocketLogined},BS=function(e){return e.socketReducer.csSocketConnected};function YS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var QS,qS=function(e){return e.mediaPreviewerReducer.mediaMap},WS=(0,Zt.createSelector)(Zc,qS,(function(e,t){return t[e]||[]})),KS=(0,tt.createActions)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),zS=KS.addMediaFile,JS=KS.deleteMediaFile,XS=KS.clearMediaFile,$S=(e(MS={},zS,(function(t,r){var n=r.payload,o=n.medias,a=n.conversationId,c=t.mediaMap,s=(c[a]||[]).concat(Array.isArray(o)?o:[o]);return ji(ji({},t),{},{mediaMap:ji(ji({},c),{},e({},a,s))})})),e(MS,JS,(function(t,r){var n=r.payload,o=n.id,a=n.conversationId,c=t.mediaMap,s=ue(c[a])||[];return s.splice(o,1),ji(ji({},t),{},{mediaMap:ji(ji({},c),{},e({},a,s))})})),e(MS,XS,(function(t,r){var n=r.payload.conversationId,o=t.mediaMap;return ji(ji({},t),{},{mediaMap:ji(ji({},o),{},e({},n,[]))})})),MS),ZS=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?YS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},$S),{mediaMap:{}});function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var th,rh=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},nh=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},oh=(0,tt.createActions)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){return{}}}),ah=oh.showMediaPreviewModalRequested,ch=oh.closeMediaPreviewModalRequested,sh=(e(QS={},ah,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),e(QS,ch,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),QS),ih=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?eh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},sh),{showMediaPreviewModal:!1,currentPreviewMediaId:null}),uh=function(e){return e.translatePreferenceReducer.translationSettings},dh=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},lh=function(e){return e.translatePreferenceReducer.updateStatus};!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(th||(th={}));var ph,fh,_h=I(439).t;function Eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Eh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Eh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var hh=N().mark(Ch),Oh=N().mark(Ph),vh=N().mark(Dh),Th=(0,tt.createActions)((e(ph={},th.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),e(ph,th.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),e(ph,th.UPDATE_FETCH_STATUS,(function(e){return{status:e.status}})),e(ph,th.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{status:e.status}})),e(ph,th.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),ph)),mh=Th.fetchShopTranslationSettings,gh=Th.updateShopTranslationSettings,bh=Th.updateFetchStatus,yh=Th.updateSettingPreferenceStatus,Rh=Th.updateShopTranslationSettingsRecord;function Ch(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.shopId,s.prev=1,s.next=4,(0,Wt.put)(bh({status:"loading"}));case 4:return s.next=6,(0,Wt.call)(it,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:t}});case 6:return r=s.sent,n=r.source,o=r.translation_preference,a=r.auto_translation_status,c=r.in_translation_feedback_whitelist,s.next=13,(0,Wt.put)(bh({status:"succeed"}));case 13:return s.next=15,(0,Wt.put)(Rh({shopId:t,source:n,translationPreference:o,autoTranslationStatus:a,inTranslationFeedbackWhitelist:c}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,Wt.put)(bh({status:"failed"}));case 21:case"end":return s.stop()}}),hh,null,[[1,17]])}function Ph(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.settings,a.prev=1,a.next=4,(0,Wt.put)(yv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:return a.next=6,(0,Wt.put)(yh({status:""}));case 6:return r=t.shop_id,n=t.auto_translation_status,o=t.translation_preference,a.next=9,(0,Wt.call)(it,{method:"PUT",subServer:"workbenchapi",parent:"shop",resource:"setting",payload:JSON.stringify(t)});case 9:return a.next=11,(0,Wt.put)(Rh({shopId:r,translationPreference:o,autoTranslationStatus:n}));case 11:return a.next=13,(0,Wt.call)(ef,Kp({toast:{show:!0,type:"success",message:_h("tips.set_preference_succeed")}}));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),a.next=19,(0,Wt.put)(yh({status:"failed"}));case 19:return a.next=21,(0,Wt.call)(ef,Kp({toast:{show:!0,type:"fail",message:_h("tips.set_preference_failed")}}));case 21:case"end":return a.stop()}}),Oh,null,[[1,15]])}function Dh(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(mh,Ch);case 2:return e.next=4,(0,Wt.takeEvery)(gh,Ph);case 4:case"end":return e.stop()}}),vh)}var Ih=(0,tt.handleActions)((e(fh={},th.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,a=r.translationPreference,c=r.autoTranslationStatus,s=r.inTranslationFeedbackWhitelist,i=Sh({},e.translationSettings),u=i[n]||{};return i[n]=Sh(Sh({},u),{},{translationPreference:a,autoTranslationStatus:c}),o&&(i[n].source=o),s&&(i[n].inTranslationFeedbackWhitelist=s),Sh(Sh({},e),{},{translationSettings:i})})),e(fh,th.UPDATE_FETCH_STATUS,(function(e,t){var r=t.payload.status;return Sh(Sh({},e),{},{fetchSettingsStatus:r})})),e(fh,th.UPDATE_SETTING_PREFERENCE_STATUS,(function(e,t){var r=t.payload.status;return Sh(Sh({},e),{},{updateStatus:r})})),fh),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),Ah=[Dh];function wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xh=N().mark(Hh),kh=N().mark(Vh),Uh=N().mark(Bh),Mh=N().mark(Yh),Lh=N().mark(Qh),jh=N().mark(qh),Gh=N().mark(Wh),Fh=N().mark(Kh);function Hh(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.id,n=t.shopId,s.next=3,(0,Wt.call)(it,{resource:"products",id:r,params:{shop_id:n,need_cache:1,cache_expires:600},cleaner:Im});case 3:return o=s.sent,o=Hu(o),a=T("products",o),c=a.entities,s.next=8,(0,Wt.put)(br({entities:c}));case 8:return s.abrupt("return",o);case 9:case"end":return s.stop()}}),xh)}function Vh(e){var t,r,n,o,a,c,s,i,u,d,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,o=t.isChatbotOrder,p.next=3,(0,Wt.select)(Es);case 3:return a=p.sent,p.next=6,(0,Wt.call)(it,{resource:"order",id:r,params:{shop_id:n}});case 6:return c=p.sent,p.next=9,(0,Wt.select)(Bn);case 9:return i=p.sent,s=!i||o,u=(0,R.cleanOrder)(c,a,s),d=T("orders",u),l=d.entities,p.next=15,(0,Wt.put)(br({entities:l}));case 15:return p.abrupt("return",u);case 16:case"end":return p.stop()}}),kh)}function Bh(e,t,r,n,o){var a,c,s,i,u,d;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(a=Array.isArray(e),c=a?e:[e],s=Array.from(new Set(c.map((function(e){return e.product_id})))),i=[],!a){l.next=19;break}return l.prev=5,l.next=8,(0,Wt.call)(showProducts,{payload:{productIds:s,shopId:t}});case 8:i=l.sent,l.next=17;break;case 11:return l.prev=11,l.t0=l.catch(5),u=s.map((function(e){return(0,Wt.call)(Hh,{payload:{id:e,shopId:t}})})),l.next=16,(0,Wt.all)(u);case 16:i=l.sent;case 17:l.next=23;break;case 19:return l.next=21,(0,Wt.call)(Hh,{payload:{id:e.product_id,shopId:t}});case 21:d=l.sent,i=[d];case 23:return l.abrupt("return",c.map((function(e){var t=i.find((function(t){return t.id===e.product_id}))||{};return Xu(e,"list",r,n,t,o)})));case 24:case"end":return l.stop()}}),Uh,null,[[5,11]])}function Yh(e){var t,r,n,o,a,c,s,i,u,d,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,p.next=3,(0,Wt.select)(nE(r));case 3:return o=p.sent,p.next=6,(0,Wt.select)(Ss);case 6:return a=p.sent,p.next=9,(0,Wt.select)(An);case 9:return c=p.sent,p.next=12,(0,Wt.select)(Dn);case 12:if(s=p.sent,!o){p.next=15;break}return p.abrupt("return",o);case 15:return p.next=17,(0,Wt.call)(it,{resource:"offers",id:r,params:{shop_id:n}});case 17:return i=p.sent,p.next=20,(0,Wt.call)(Bh,i,n,a,c,s);case 20:return u=p.sent,d=T("offers",u),l=d.entities,p.next=24,(0,Wt.put)(br({entities:l}));case 24:return p.abrupt("return",u[0]);case 25:case"end":return p.stop()}}),Mh)}function Qh(e){var t,r,n,o,a,c,s,i,u;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.shopId,r=e.id,d.next=3,(0,Wt.select)(_n);case 3:return n=d.sent,d.next=6,(0,Wt.select)(In);case 6:return o=d.sent,a="vouchers_by_ids",d.next=10,(0,Wt.call)(it,{parent:"vouchers",resource:a,params:{ids:JSON.stringify([parseInt(r)]),shop_id:t,buyer_id:o?0:n}});case 10:if(c=d.sent,!(s=c[a])||!s.length){d.next=18;break}return s=s.map((function(e){return cd(e,!1)})),i=T("vouchers",s),u=i.entities,d.next=17,(0,Wt.put)(br({entities:u}));case 17:return d.abrupt("return",s[0]);case 18:case"end":return d.stop()}}),Lh)}function qh(e){var t,r,n,o,a,c,s,i,u;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.id,n=t.creatorId,d.next=3,(0,Wt.select)(fs);case 3:return o=d.sent,a=o.shop_id,d.next=7,(0,Wt.call)(it,{parent:"feed",resource:"stories",params:{ids:JSON.stringify([r]),creator:n,shop_id:a,need_cache:1,cache_expire:1800}});case 7:return c=d.sent,s=c.stories[0],i=T("feedStories",s),u=i.entities,d.next=12,(0,Wt.put)(br({entities:u}));case 12:return d.abrupt("return",s);case 13:case"end":return d.stop()}}),jh)}function Wh(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.cartItems,r=e.shopId,c.next=3,(0,Wt.call)(it,{parent:"product",resource:"get",method:"POST",payload:JSON.stringify({shop_id:r,items:t.slice(0,4)})});case 3:return n=c.sent,o=n.get,a=void 0===o?[]:o,c.abrupt("return",a.map(zu));case 7:case"end":return c.stop()}}),Gh)}function Kh(e){var t,r,n,o,a,c,s,i;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.ids,n=t.id,u.next=3,(0,Wt.select)(fs);case 3:return o=u.sent,a=o.shop_id,c=o.id,u.next=7,(0,Wt.call)(it,{parent:"conversation",resource:"messages",params:{ids:"[".concat(r.join(","),"]"),shop_id:a}});case 7:return s=u.sent,i=s.messages,u.next=11,(0,Wt.call)(Dd,{list:ue(i),conversationId:c,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var r=i.findIndex((function(t){return t.id===e}));if(r>=0){var n=i[r];i.splice(r,1,Nh(Nh({},n),{},{content:Nh(Nh({},n.content),t[e])}))}}))}});case 11:return u.abrupt("return",{id:n,messages:i});case 12:case"end":return u.stop()}}),Fh)}var zh,Jh,Xh=function(e){return e.chatbotReducer.imageUrl},$h=function(e){return e.chatbotReducer.faqSessions},Zh=(0,Zt.createSelector)(Zc,$h,(function(e,t){return t[e]||{}}));function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?eO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.SHOW_CHATBOT_IMAGE="SHOW_CHATBOT_IMAGE",e.CLOSE_CHATBOT_MEDIA_PREVIEW="CLOSE_CHATBOT_MEDIA_PREVIEW",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.FETCH_FAQ_SESSION_SUCCEED="FETCH_FAQ_SESSION_SUCCEED"}(zh||(zh={}));const rO=(e(Jh={},zh.SHOW_CHATBOT_IMAGE,(function(e,t){var r=t.payload;return tO(tO({},e),{},{imageUrl:r.url})})),e(Jh,zh.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(e){return tO(tO({},e),{},{imageUrl:""})})),Jh);var nO,oO=I(209),aO=I.n(oO),cO=I(411),sO=I(914),iO=I(770),uO=I(123),dO=aO()(),lO=null,pO=function(){var e=D(N().mark((function e(t,r){var n,o,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.shopId,o=r.conversationId,e.next=3,it({parent:"faqs",subServer:"workbenchapi",resource:"bot/orders",method:"POST",payload:JSON.stringify({data:JSON.stringify(t),shop_id:n,conversation_id:o})});case 3:return(a=e.sent).data=JSON.parse(a.data),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),fO={cid:(0,R.getRuntimeRegion)(),env:(0,R.getRuntimeServer)(),from:R.ChatbotFromType.LandingPage,initialization:1,auth:{accountType:1},getOrderList:pO},_O=function(){return lO||((lO=new dO.ChatbotSDK({root:"messageSection",config:fO})).use(cO.Message),lO.use(sO.RelatedIntent),lO.use(iO.OrderList),lO.use(uO.OptionSelector)),lO},EO=function(e){_O().updateConfig({from:e})},SO=dO.Provider,hO=(0,tt.createActions)((e(nO={},zh.SHOW_CHATBOT_IMAGE,(function(e){return{url:e.url}})),e(nO,zh.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(){return{}})),e(nO,zh.CHATBOT_INTENTS_REPORT_REQUEST,(function(e){return{reportTask:e.reportTask}})),e(nO,zh.FETCH_FAQ_SESSION_SUCCEED,(function(e){return{conversationId:e.conversationId,faqSessionId:e.faqSessionId,sessionExpiryTime:e.sessionExpiryTime}})),nO)),OO=hO.showChatbotImage,vO=hO.closeChatbotMediaPreview,TO=hO.chatbotIntentsReportRequest,mO=hO.fetchFaqSessionSucceed,gO=N().mark(xO),bO=N().mark(kO),yO=N().mark(UO),RO=N().mark(MO),CO=N().mark(LO);function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function DO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?PO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var IO,AO=function(){return(0,$E.eventChannel)((function(e){var t=_O();return t.init().then((function(){t.on("userAction",(function(t){e(t)}))})),function(){}}))};!function(e){e[e.MESSAGE=1001]="MESSAGE",e[e.SOLUTION=1002]="SOLUTION",e[e.NOT_CHATBOT=0]="NOT_CHATBOT"}(IO||(IO={}));var wO={message:IO.MESSAGE,solution:IO.SOLUTION},NO=function(e){if(!e)return IO.NOT_CHATBOT;var t=e.type;return wO[t]};function xO(e){var t,r,n,o,a,c,s,i,u,d;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.api,r=e.chatbotUserMessage,n=e.passThroughData.faqSessionId,o=NO(t),!r){l.next=14;break}return l.next=5,(0,Wt.select)(fs);case 5:return a=l.sent,c=r.type,s={interaction_type:o,bot_data:JSON.stringify(t?t.params:""),faq_session_id:n},"text"===c&&(u=r.text,s=DO(DO({},s),{},{text:u}),i=R.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE),"order"===c&&(s=DO(DO({},s),{},{bot_order_info:Rm(r)}),i=R.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE),l.next=12,(0,Wt.select)(Es);case 12:d=l.sent,Uo().put(Lo().sendMessagesRequested({payload:{conversationId:a.id,conversationUserId:a.to_id,messages:[{type:i,content:s,textContent:ym(r,d)}]}}));case 14:case"end":return l.stop()}}),gO)}function kO(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.urlInfo)&&(r=t.url,n=t.uri_key,o=t.uri_extra,n?window.open(mm(n,o)):r&&window.open(vm(r))),a.next=4,(0,Wt.call)(xO,e);case 4:case"end":return a.stop()}}),bO)}function UO(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.image)){r.next=4;break}return r.next=4,(0,Wt.put)(OO({url:t.url}));case 4:case"end":return r.stop()}}),yO)}function MO(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.actionType,r.t0=t,r.next="sendChatbotUserMessage"===r.t0?4:"redirect"===r.t0?7:"showImage"===r.t0?10:13;break;case 4:return r.next=6,(0,Wt.call)(xO,e.data);case 6:case 9:case 12:return r.abrupt("break",13);case 7:return r.next=9,(0,Wt.call)(kO,e.data);case 10:return r.next=12,(0,Wt.call)(UO,e.data);case 13:case"end":return r.stop()}}),RO)}function LO(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Wt.call)(AO);case 2:return e=t.sent,t.next=5,(0,Wt.takeEvery)(e,MO);case 5:case"end":return t.stop()}}),CO)}var jO=N().mark(FO),GO=N().mark(HO);function FO(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.reportTask,o.next=3,(0,Wt.select)(Zc);case 3:return r=o.sent,o.next=6,(0,Wt.select)(Ps);case 6:return n=o.sent,o.prev=7,o.next=10,(0,Wt.call)(it,{method:"POST",subServer:"workbenchapi",parent:"faqs",resource:"bot/report",payload:JSON.stringify({messages:t,conversation_id:r,shop_id:n})});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),jO,null,[[7,12]])}function HO(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(TO,FO);case 2:case"end":return e.stop()}}),GO)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function BO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?VO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const YO=e({},zh.FETCH_FAQ_SESSION_SUCCEED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.faqSessionId,c=n.sessionExpiryTime,s=t.faqSessions;return BO(BO({},t),{},{faqSessions:BO(BO({},s),{},e({},o,{faqSessionId:a,sessionExpiryTime:c}))})}));function QO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?QO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var WO,KO,zO=(0,tt.handleActions)(qO(qO({},rO),YO),{imageUrl:"",faqSessions:{}}),JO=[LO,HO],XO=function(e){return e.voucherReducer.status},$O=(0,Zt.createSelector)(ur,(function(e){return e.voucherReducer.voucherIds}),(function(e,r){return((0,t.denormalize)(r,[O],{vouchers:e})||[]).filter((function(e){return e}))})),ZO=function(e){return(0,Zt.createSelector)(ur,(function(r){return(0,t.denormalize)(e,O,{vouchers:r})}))},ev={currentPage:0,perPage:20,total:0,hasMore:!0},tv=function(e){return(0,Zt.createSelector)(sr,(function(r){return(0,t.denormalize)(e,i,{orders:r})}))},rv=function(e){return(e.orderReducer||{}).cancelReasons},nv=function(e){return e.orderReducer.status},ov=function(e){return e.orderReducer.fetchResult},av=function(e,t){return(0,Zt.createSelector)(ov,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:ev,result:[]}}))},cv=(0,Zt.createSelectorCreator)(Zt.defaultMemoize,(function(e,t){return e.id===t.id}))(fs,(function(e){return e})),sv=(0,Zt.createSelector)(ov,cv,sr,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[i],{orders:n})})),iv=function(e){return(0,Zt.createSelector)(ir,(function(r){return(0,t.denormalize)(e,u,{products:r})}))},uv=function(e){return(0,Zt.createSelector)(ir,(function(r){return(0,t.denormalize)(e,[u],{products:r})}))},dv={currentPage:0,perPage:20,total:0,hasMore:!0},lv=function(e){return e.productReducer.fetchResult},pv=function(e){return e.productReducer.allProductsSearchStatus},fv=function(e){return e.productReducer.sellerRecommendProducts},_v=function(e){return e.productReducer.systemRecommendProducts},Ev=function(e){return e.productReducer.groups},Sv=function(e){return e.productReducer.systemRecommendProductsFetchStatus},hv=function(e){return e.productReducer.sellerRecommendProductsFetchStatus},Ov=function(e){return e.productReducer.fetchGroupsStatus},vv=function(e){return(0,Zt.createSelector)(lv,(function(t){return t[e]||{pagination:dv,result:[]}}))},Tv=(0,Zt.createSelector)(lv,Rs,ir,(function(e,r,n){var o=e[r];if(!o)return[];var a=o.result||[];return(0,t.denormalize)(a,[u],{products:n})})),mv=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(WO||(WO={}));var gv,bv=(0,tt.createActions)((e(KO={},WO.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),e(KO,WO.CLEAR_REPORT_REQUESTED,(function(){return{}})),KO)),yv=bv.reportRequested,Rv=bv.clearReportRequested,Cv=N().mark(Av),Pv=N().mark(wv);function Dv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Iv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Av(){var e,t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Wt.select)(mv);case 2:if(!(e=r.sent).length){r.next=10;break}return t=ue(e),r.next=7,(0,Wt.put)(Rv());case 7:return t.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),r.next=10,(0,Wt.call)(it,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(Iv(Iv({},t[0]),{},{platform_id:(0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)()?2:1}))});case 10:case"end":return r.stop()}}),Cv)}function wv(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,Wt.delay)(6e4);case 3:return e.next=5,Av();case 5:e.next=0;break;case 7:case"end":return e.stop()}}),Pv)}const Nv=(e(gv={},WO.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(ue(e.beingReported),[{event_time:n,url:o}])}})),e(gv,WO.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),gv);function xv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var kv=[wv],Uv=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?xv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Nv),{beingReported:[]}),Mv=N().mark(Yv);function Lv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Lv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gv,Fv=48e4,Hv=6e4,Vv=!1,Bv="9223372036854775807";function Yv(){var e,t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S;return N().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=3,(0,Wt.delay)(Hv);case 3:return e=void 0,e="mini-session",h.next=7,(0,R.getItem)(e);case 7:if(!(t=h.sent)||!t.token){h.next=58;break}return h.prev=9,h.next=12,(0,Wt.select)((function(e){return e.conversationReducer}));case 12:return r=h.sent,n=r.maxLatestReceivedMessageId,o=r.maxLatestTimestampNano,h.next=17,(0,Wt.select)(In);case 17:return a=h.sent,h.next=20,(0,Wt.select)(ds);case 20:return c=h.sent.toLowerCase(),s=!a&&["all","unread"].includes(c),i=["pinned","unread"].includes(c),u={},s?u.last_timestamp_nano=o||Bv:u.last_message_id=n||Bv,u.last_unread_count_sync=Vv,h.next=28,(0,Wt.spawn)(it,{method:"POST",resource:"user",suffix:"sync",params:jv({},u)});case 28:return d=h.sent,h.next=31,(0,Wt.join)(d);case 31:if(l=h.sent,p=l.have_new_msg,f=l.unread_count,_=l.current_version,Vv=!1,!p){h.next=44;break}return h.next=39,(0,Wt.select)((function(e){return e.conversationReducer}));case 39:if(!(h.sent.syncFetchException<3)||i){h.next=44;break}return h.next=44,(0,Wt.put)(qs({direction:"latest",source:R.ConversationSource.SYNC}));case 44:if(!(f>-1)){h.next=53;break}return h.next=47,(0,Wt.select)(qr);case 47:if((E=h.sent)===f){h.next=52;break}return h.next=51,(0,Wt.put)(rn({count:f}));case 51:Vv=!0;case 52:a||(Hv=E!==f||p?6e4:Hv>=Fv?Fv:2*Hv);case 53:_&&_!==t.version&&(S=Object.assign({},t,{version:_}),(0,R.setItem)(e,S)),h.next=58;break;case 56:h.prev=56,h.t0=h.catch(9);case 58:h.next=0;break;case 60:case"end":return h.stop()}}),Mv,null,[[9,56]])}function Qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Qv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.REDIRECT_CONVERSATION_REQUESTED="REDIRECT_CONVERSATION_REQUESTED"}(Gv||(Gv={}));var Wv=N().mark($v),Kv=N().mark(Zv),zv=N().mark(eT),Jv=(0,tt.createActions)(e({},Gv.REDIRECT_CONVERSATION_REQUESTED,(function(e){var t=e.userId,r=e.shopId,n=e.orderId,o=e.productId,a=e.message;return{userId:t,shopId:r,orderId:n,productId:o,message:void 0===a?"":a,entryPointType:e.entryPointType}}))),Xv=Jv.redirectConversationRequested;function $v(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=T("conversations",e),r.next=3,(0,Wt.put)(br({entities:t.entities}));case 3:case"end":return r.stop()}}),Wv)}function Zv(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v;return N().wrap((function(T){for(;;)switch(T.prev=T.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.orderId,a=t.isFromSearch,c=void 0!==a&&a,s=t.productId,i=t.message,u=t.entryPointType,T.next=3,(0,Wt.select)(Kc);case 3:return d=T.sent,T.next=6,(0,Wt.call)(it,{method:"POST",resource:"conversation",suffix:"redirection",payload:JSON.stringify({user_id:parseInt(r),shop_id:n})});case 6:if(l=T.sent,p=l.id,f=l.faking,_=l.mask,E=l.to_name,h=qv(qv({userId:r,shopId:n},S={orderId:o,productId:s}),{},{conversationId:l.id}),O=d.length,v=f||!d.includes(p),u&&Uo().put(Lo().setEntryPoint({payload:{type:u,conversationId:p}})),!v){T.next=21;break}return T.next=16,(0,Wt.call)($v,l);case 16:if(!O){T.next=19;break}return T.next=19,(0,Wt.put)(Qs({conversationId:p}));case 19:T.next=23;break;case 21:return T.next=23,(0,Wt.put)(yr({name:"conversations",id:p,record:{to_name:E,mask:_}}));case 23:if(!i){T.next=26;break}return T.next=26,(0,Wt.put)(SE({draft:i,conversationId:p}));case 26:return T.next=28,(0,Wt.call)(R.setItem,"mini-sc_redirect",h);case 28:return T.next=30,(0,Wt.select)(Zc);case 30:if(T.sent===p&&!v){T.next=34;break}return T.next=34,(0,Wt.put)(oi({conversation:l,sourceInfo:S}));case 34:return T.next=36,(0,Wt.select)(Hn);case 36:if(T.sent){T.next=40;break}return T.next=40,(0,Wt.call)(la,{payload:{shouldShowWindow:!0}});case 40:if(O){T.next=43;break}return T.next=43,(0,Wt.put)(Qs({conversationId:p}));case 43:return T.next=45,(0,Wt.put)(ea({shouldShowConversationDetail:!0}));case 45:!c&&Uo().put(Lo().sendMessagesRequested({payload:{conversationId:l.id,messages:[{type:"text",content:{text:""},isFaking:!0}],more:{isFakingSource:!0}}}));case 46:case"end":return T.stop()}}),Kv)}function eT(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Wt.takeEvery)(Xv,Zv);case 2:case"end":return e.stop()}}),zv)}var tT=[Yv,eT],rT=N().mark(nT);function nT(e,t,r){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Wt.takeEvery)(e,N().mark((function e(n){var o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payload.id){e.next=5;break}return e.next=4,(0,Wt.call)(t,n);case 4:return e.abrupt("return");case 5:return e.next=7,(0,Wt.race)({task:(0,Wt.call)(t,n),cancel:(0,Wt.take)((function(e){return e.type===r.toString()&&e.payload.id===o}))});case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return n.stop()}}),rT)}var oT=N().mark(sT);function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?aT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sT(e,t,r){var n,o,a,c,s=arguments;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:[],o=e,a=[],c=[],Array.isArray(e)&&(o=(T(r,e).entities||{})[r]||{}),t.forEach((function(e){var t=e.id,s=o[t];s?["conversations","agentConversations"].includes(r)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(e=cT(cT({},s),e)).faking,delete e.latestMessageStatus,delete e.unreplied,c.push(e)):(n.length&&n.forEach((function(t){e[t]=s[t]})),a.push((0,Wt.put)(yr({name:r,id:t,record:cT({},e)})))):c.push(e)})),c.length&&a.push((0,Wt.put)(br({entities:T(r,c).entities}))),i.next=9,(0,Wt.all)(a);case 9:case"end":return i.stop()}}),oT)}var iT=function(e,t,r,n){switch(r){case"reset":if(n){var o=Array.isArray(t)?ue(t):[];return o.unshift(n),o}return t;case"latest":return t.concat(e.filter((function(e){return!t.includes(e)})));case"older":return e.concat(t.filter((function(t){return!e.includes(t)})));default:return t}};function uT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?uT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lT=function(e,t,r){if(e){var n={};return e.forEach((function(e){n[e]=!0})),(0,R.simpleEqualCheck)(r.slice(0,R.persistLimit),e)?dT(dT({},t),{},{changed:!1}):{changed:!0,conversationIds:e,conversationIdsMap:n,lastConversationId:e[e.length-1]}}return null},pT=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"number"!=typeof e.storedTimestamp)return!1;var r=18e4,n=18e5;return Date.now()<e.storedTimestamp+(t?r:n)},fT=new(I(187).EventEmitter),_T=!1,ET=null,ST=document.location,hT="".concat(ST.protocol,"//").concat(ST.host,"/favicon.ico");function OT(){var e="t=".concat(Date.now()),t=[hT,e].join("?");ET=setTimeout((function(){le()(t,{method:"GET"}).then((function(){clearTimeout(ET),_T=!1,window.dispatchEvent(new Event("judge-online"))})).catch((function(){OT()}))}),5e3)}function vT(){if(_T)return null;_T=!0,OT()}var TT=(0,R.checkIsScChat)(),mT=new(Y())({name:"".concat((0,R.getRuntimeRegion)(),"_").concat((0,R.getRuntimeServer)(),"_chat-ws"),shouldShared:TT}),gT=mT.isShared,bT=mT.socket,yT=function(){return bT.emit("message","13".concat(JSON.stringify({country:((0,R.getRuntimeRegion)()||"").toLocaleUpperCase(),source:"newwebchat"})))};function RT(){return RT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RT.apply(this,arguments)}var CT=["SPC_U","SPC_F","SPC_T_ID","SPC_T_IV"];function PT(e){var t={};if("function"==typeof e)for(var r=e(),n=0,o=CT;n<o.length;n++){var a=o[n];t[a]=r[a]}return t}const DT=JSON.parse('{"OB":{"test":"test.","stable":"test-stable.","staging":"staging.","liveish":"live-test.","live":"","sandbox":"sandbox.","uat":"uat."}}');var IT=[],AT=function(){function e(e,t){var r=this;this.context=e,this.methodName=t,this.originalMethodReference=e[t],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=function(){var e=r.boundMethodChain[r.boundMethodChain.length-1];return e.apply(void 0,arguments)},e[t]=this.wrappedMethod}e.add=function(e,t,r){(function(e,t){var r=wT(e,t);return r||(r=new AT(e,t),IT.push(r)),r})(e,t).add(r)},e.remove=function(e,t,r){var n=wT(e,t);n&&n.remove(r)};var t=e.prototype;return t.add=function(e){this.methodChain.push(e),this.rebindMethodChain()},t.remove=function(e){var t=this.methodChain.indexOf(e);t>-1&&(this.methodChain.splice(t,1),this.methodChain.length>0?this.rebindMethodChain():this.destory())},t.rebindMethodChain=function(){this.boundMethodChain=[];for(var e,t=0;e=this.methodChain[t];t++){var r=this.boundMethodChain[t-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(e(r))}},t.destory=function(){var e=IT.indexOf(this);e>-1&&(IT.splice(e,-1),this.context[this.methodName]=this.originalMethodReference)},e}();function wT(e,t){return IT.filter((function(r){return r.context===e&&r.methodName===t}))[0]}var NT=function(){function e(){}var t=e.prototype;return t.upgrade=function(t,r){if(r.oldVersion<e.DATABASE_VERSION&&(t.objectStoreNames.contains(e.OBJECT_STORE_EVENTS_V1)&&t.deleteObjectStore(e.OBJECT_STORE_EVENTS_V1),t.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS_V1)&&t.deleteObjectStore(e.OBJECT_STORE_SESSIONS_V1)),!t.objectStoreNames.contains(e.OBJECT_STORE_EVENTS)){var n=t.createObjectStore(e.OBJECT_STORE_EVENTS,{autoIncrement:!0});n.createIndex(e.INDEX_EVENTS_FETCHED,e.INDEX_EVENTS_FETCHED,{unique:!1}),n.createIndex(e.INDEX_EVENT_TIMESTAMP,e.INDEX_EVENT_TIMESTAMP,{unique:!1})}t.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS)||t.createObjectStore(e.OBJECT_STORE_SESSIONS)},t.init=function(){var t=D(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.openDB(e.DATABASE_NAME,e.DATABASE_VERSION);case 3:return this.idb=t.sent,t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(0),console.warn("[IndexedDBStorage]",t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),t.openDB=function(t,r){var n=this;return new Promise((function(o,a){var c=self.window.indexedDB.open(t,r);c.onblocked=function(){console.warn("[IndexedDBStorage] Upgrade is blocked since connection to old version exists.")},c.onerror=function(e){try{e.preventDefault()}catch(e){}a(e)},c.onsuccess=function(t){var r=t.target.result;r.objectStoreNames.contains(e.OBJECT_STORE_EVENTS)&&r.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS)?(r.onerror=function(e){console.warn("[IndexedDBStorage]",e.target.errorCode)},r.onversionchange=function(){r.close(),console.warn("[IndexedDBStorage] A new version of indexedDB is ready.")},o(r)):a("Required ObjectStore cannot be found.")},c.onupgradeneeded=function(e){var t=e.target.result;try{n.upgrade(t,e)}catch(e){a(e)}}}))},t.addEvent=function(t){var r=this;return new Promise((function(n,o){var a=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){n(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)},a.objectStore(e.OBJECT_STORE_EVENTS).add({data:JSON.stringify(t),timestamp:Date.now(),fetched:"f"})}))},t.getEvents=function(t){var r=this,n=[],o=[];return new Promise((function(a,c){var s=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");s.oncomplete=function(){a({keys:n,data:o})},s.onerror=function(e){c(e)},s.onabort=function(e){c(e)};var i=IDBKeyRange.only("f");s.objectStore(e.OBJECT_STORE_EVENTS).index(e.INDEX_EVENTS_FETCHED).openCursor(i).onsuccess=function(e){var r=e.target.result;r&&(n.push(r.primaryKey),o.push(JSON.parse(r.value.data)),r.update(RT({},r.value,{fetched:"t"})),(-1===t||t-- >1)&&r.continue())}}))},t.resetEvents=function(t,r){var n=this;return!t||t.length<=0?Promise.resolve(!0):new Promise((function(r,o){var a=n.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){r(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)};var c=IDBKeyRange.bound(t[0],t[t.length-1]);a.objectStore(e.OBJECT_STORE_EVENTS).openCursor(c).onsuccess=function(e){var t=e.target.result;t&&(t.update(RT({},t.value,{fetched:"f"})),t.continue())}}))},t.removeEvents=function(t){var r=this;return!t||t.length<=0?Promise.resolve(!0):new Promise((function(n,o){var a=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){n(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)};var c=IDBKeyRange.bound(t[0],t[t.length-1]);a.objectStore(e.OBJECT_STORE_EVENTS).delete(c)}))},t.getSession=function(t){var r=this;return new Promise((function(n,o){var a={},c=r.idb.transaction(e.OBJECT_STORE_SESSIONS,"readwrite");c.oncomplete=function(){n(a)},c.onerror=function(e){o(e)},c.onabort=function(e){o(e)};var s=c.objectStore(e.OBJECT_STORE_SESSIONS);s.get(e.KEY_SESSION).onsuccess=function(r){a=t(r.target.result),s.put(a,e.KEY_SESSION)}}))},t.getCurrentSessionId=function(){var t=this;return new Promise((function(r,n){var o={},a=t.idb.transaction(e.OBJECT_STORE_SESSIONS,"readwrite");a.oncomplete=function(){r(o.sessionId)},a.onerror=function(e){n(e)},a.onabort=function(e){n(e)},a.objectStore(e.OBJECT_STORE_SESSIONS).get(e.KEY_SESSION).onsuccess=function(e){o=e.target.result}}))},t.removeExpiredEvents=function(){var t=this;return new Promise((function(r,n){var o=t.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");o.oncomplete=function(){r(!0)},o.onerror=function(e){n(e)},o.onabort=function(e){n(e)};var a=IDBKeyRange.upperBound(Date.now()-e.RETENTION);o.objectStore(e.OBJECT_STORE_EVENTS).index(e.INDEX_EVENT_TIMESTAMP).openCursor(a).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())}}))},e}();NT.DATABASE_NAME="data-tracking",NT.DATABASE_VERSION=3,NT.OBJECT_STORE_EVENTS_V1="events",NT.OBJECT_STORE_EVENTS="events_v2",NT.OBJECT_STORE_SESSIONS_V1="sessions",NT.OBJECT_STORE_SESSIONS="session_v2",NT.INDEX_EVENTS_FETCHED="fetched",NT.INDEX_EVENT_TIMESTAMP="timestamp",NT.KEY_SESSION="current_session",NT.RETENTION=1728e5;var xT=function(){function e(e,t){this.storage=e,this.storageKey=t}var t=e.prototype;return t.get=function(){return this.storage.get(this.storageKey)||[]},t.set=function(e){return e=e||[],this.storage.set(this.storageKey,e)},t.enqueue=function(e){var t=this.get();t.push(e),this.set(t)},t.batchDequeue=function(e){var t=this.get(),r=t.slice(0,e),n=t.slice(e);return this.set(n),r},t.putBackBatchToQueue=function(e){return this.set(e.concat(this.get()))},e}(),kT=function(){function e(){var t=this;e.supportsLocalStorage()?this.storage={get:function(e){var t=self.window.localStorage.getItem(e);return t?JSON.parse(t):void 0},set:function(e,t){var r=JSON.stringify(t);self.window.localStorage.setItem(e,r)}}:(this.backStore={},this.storage={get:function(e){return t.backStore[e]},set:function(e,r){t.backStore[e]=r}}),this.queue=new xT(this.storage,e.QUEUE_STORAGE_KEY)}e.supportsLocalStorage=function(){if(!self.window)return!1;try{return self.window.localStorage.setItem(e.CHECK_STORAGE_KEY,e.CHECK_STORAGE_KEY),self.window.localStorage.removeItem(e.CHECK_STORAGE_KEY),!0}catch(e){return!1}};var t=e.prototype;return t.addEvent=function(e){return this.queue.enqueue(e),Promise.resolve(!0)},t.getEvents=function(e){var t=-1===e?this.queue.get():this.queue.batchDequeue(e);return Promise.resolve({data:t})},t.resetEvents=function(e,t){return this.queue.putBackBatchToQueue(t),Promise.resolve(!0)},t.removeEvents=function(e){return Promise.resolve(!0)},t.getSession=function(t){var r=this.storage.get(e.SESSION_STORAGE_KEY);return r=t(r=r&&"sessionId"in r&&"sequenceId"in r&&"timestamp"in r?r:null),this.storage.set(e.SESSION_STORAGE_KEY,r),Promise.resolve(r)},t.getCurrentSessionId=function(){var t=this.storage.get(e.SESSION_STORAGE_KEY),r=t&&"sessionId"in t?t.sessionId:Oa()();return Promise.resolve(r)},e}();kT.QUEUE_STORAGE_KEY="bi-tracking::events",kT.SESSION_STORAGE_KEY="bi-tracking::session",kT.CHECK_STORAGE_KEY="bi-tracking::check";var UT=null,MT=function(){function e(){}return e.initIndexedDB=function(){var e=D(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!self.window||!self.window.indexedDB){e.next=8;break}return t=new NT,e.next=4,t.init();case 4:if(!e.sent){e.next=8;break}try{t.removeExpiredEvents()}catch(e){console.warn("[TrackerStorage]",e)}return e.abrupt("return",t);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.get=(t=D(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(UT){t.next=5;break}return t.next=3,e.initIndexedDB();case 3:(UT=t.sent)||(UT=new kT);case 5:return t.abrupt("return",UT);case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),e;var t}(),LT="",jT="",GT=function(){function e(){}return e.getSession=function(){var t=D(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,MT.get();case 2:return r=t.sent,t.next=5,r.getSession((function(t){var r=Date.now();return null==t||r-t.timestamp>e.SESSION_DURATION?t={sessionId:Oa()(),timestamp:r,sequenceId:0}:(t.sequenceId+=1,t.timestamp=r),t}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.GetSessionId=function(){var e=D(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MT.get();case 2:return t=e.sent,e.next=5,t.getCurrentSessionId();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.setLatestEventId=function(e){LT=e},e.getLatestEventId=function(){return LT},e.setLatestViewPageType=function(e){jT=e},e.getLatestViewPageType=function(){return jT},e}();function FT(e){var t={},r=(e=e||"").indexOf("?");if(-1!==r){var n=e.substring(r+1);(n=n.split("#")[0]).split("&").forEach((function(e){if(e){var r=e.indexOf("="),n=r>-1?e.substring(0,r):e,o=r>-1?decodeURIComponent(e.substring(r+1)):"";t[n]=o}}))}return t}function HT(e){return Object.keys(e).length<=0}function VT(e,t){return!!e&&e.split("/")[2]===t}function BT(e){var t={};return e.hasOwnProperty("affiliate_trackid")&&(t.affiliate_trackid=e.affiliate_trackid),e.hasOwnProperty("utm_source")&&(t.utm_source=e.utm_source),e.hasOwnProperty("utm_medium")&&(t.utm_medium=e.utm_medium),e.hasOwnProperty("utm_campaign")&&(t.utm_campaign=e.utm_campaign),e.hasOwnProperty("utm_term")&&(t.utm_term=e.utm_term),e.hasOwnProperty("utm_content")&&(t.utm_content=e.utm_content),t}function YT(e){var t={};return e.hasOwnProperty("event_source")&&(t.event_source=e.event_source),t}function QT(e){if(!self.document||!self.location)return null;var t=null;try{t=FT(self.location.href)}catch(e){console.warn("[getParams]",e)}if(!t||HT(t))return null;var r={},n=VT(self.document.referrer,self.location.hostname);return(e&&n||!e)&&(r=YT(t)),e&&!n&&(r=BT(t)),HT(r)?null:r}function qT(e){if(e.hash&&e.hash.startsWith("#/")){var t=e.hash.lastIndexOf("#");return 0===t?e.hash.substring(1):e.hash.substring(1,t)}return e.pathname}function WT(){return location.pathname+location.hash+location.search}function KT(){return location.host+location.pathname+location.hash}GT.SESSION_DURATION=18e5;var zT=function(){function e(e){if(self.window&&self.window.addEventListener){var t={shouldTrackHistoryChange:this.shouldTrackHistoryChange,trackReplaceState:!1};this.opts=RT({},t,e),this.path=WT(),this.pathname=qT(location),this.eventId=Oa()(),GT.setLatestEventId(this.eventId),this.pushStateOverride=this.pushStateOverride.bind(this),this.replaceStateOverride=this.replaceStateOverride.bind(this),this.handlePopState=this.handlePopState.bind(this),this.handleHashChange=this.handleHashChange.bind(this),this.handleLoad=this.handleLoad.bind(this),self.history&&self.history.pushState?(AT.add(history,"pushState",this.pushStateOverride),AT.add(history,"replaceState",this.replaceStateOverride),window.addEventListener("popstate",this.handlePopState)):window.addEventListener("hashchange",this.handleHashChange),this.handleLoad()}else console.warn("[AutoTracker]","not work unsupporting browser")}var t,r=e.prototype;return r.pushStateOverride=function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleHistoryChange(!0)}},r.replaceStateOverride=function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleHistoryChange(!1)}},r.handlePopState=function(){this.handleHistoryChange(!0)},r.handleHashChange=function(){this.handleHistoryChange(!0)},r.handleLoad=function(){var e=this,t={isOnload:!0,referrer:self.document.referrer,eventId:this.eventId,href:self.location.href,hostname:self.location.hostname,pathname:this.pathname,absolutePath:KT()};setTimeout((function(){try{e.sendPageview(t)}catch(e){console.warn("[AutoTracker]",e)}}),300)},r.sendPageview=(t=D(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GT.getSession();case 2:return r=e.sent,n=Date.now(),o=FT(t.href),a={auto_mapped_view:GT.getLatestViewPageType(),auto_refer:t.referrer,auto_pathname:t.pathname,auto_url:t.href,start_time:n},HT(o)||(a.param_string=JSON.stringify(o)),c=VT(t.referrer,t.hostname),(t.isOnload&&c||!t.isOnload)&&!HT(s=YT(o))&&(a=RT({},a,s)),t.isOnload&&!c&&!HT(i=BT(o))&&(a=RT({},a,i)),u={civ_id:t.eventId,info:{auto_view_id:"browser-abs|"+t.absolutePath,data:{auto_pv_common:a},operation:"auto_view",usage_id:0},sequence_id:r.sequenceId,session_id:r.sessionId,timestamp:n,type:"v3"},e.next=13,MT.get();case 13:return d=e.sent,e.next=16,d.addEvent(u);case 16:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),r.shouldTrackHistoryChange=function(e,t){return!(!e||!t)},r.handleHistoryChange=function(e){var t,r=this,n=this.path,o=this.pathname,a=WT(),c=qT(location);if(n!==a&&this.opts.shouldTrackHistoryChange.call(this,a,n)&&(this.path=a,this.pathname=c,e||this.opts.trackReplaceState)){this.eventId=Oa()(),t=function(){GT.setLatestEventId(r.eventId)},"function"==typeof requestIdleCallback?requestIdleCallback((function(){return t()})):t();var s={isOnload:!1,referrer:o,eventId:this.eventId,href:self.location.href,hostname:self.location.hostname,pathname:this.pathname,absolutePath:KT()};setTimeout((function(){try{r.sendPageview(s)}catch(e){console.warn("[AutoTracker]",e)}}),300)}},e}(),JT=function(){function e(t){this.backoff=e.BACKOFF_PERIOD,this.isSyncing=!1,this.makePromise=t,this.sync=this.sync.bind(this)}return e.prototype.sync=(t=D(regeneratorRuntime.mark((function t(){var r,n,o,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isSyncing){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,MT.get();case 5:return r=t.sent,t.next=8,r.getEvents(-1);case 8:if(!((n=t.sent).data.length<=0)){t.next=11;break}return t.abrupt("return");case 11:return this.isSyncing=!0,t.next=14,this.makePromise(n.data).catch((function(e){console.warn("[Sender]",e)}));case 14:if(!(o=t.sent)||200!==o.status){t.next=22;break}return t.next=18,r.removeEvents(n.keys);case 18:this.backoff=e.BACKOFF_PERIOD,this.isSyncing=!1,t.next=26;break;case 22:return t.next=24,r.resetEvents(n.keys,n.data);case 24:this.backoff*=2,setTimeout((function(){a.isSyncing=!1,a.sync()}),this.backoff);case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(0),console.warn("[Sender]",t.t0),this.isSyncing=!1;case 32:case"end":return t.stop()}}),t,this,[[0,28]])}))),function(){return t.apply(this,arguments)}),e;var t}();JT.BACKOFF_PERIOD=200;var XT=function(){function e(t){this.syncPeriod=e.SYNC_PERIOD,this.isSyncing=!1,this.makePromise=t,this.sync=this.sync.bind(this),this.syncWhenIdle=this.syncWhenIdle.bind(this),this.setSyncThreadId=this.setSyncThreadId.bind(this),this.syncThreadId=setInterval(this.syncWhenIdle,this.syncPeriod)}var t=e.prototype;return t.setSyncThreadId=function(){this.syncThreadId&&clearInterval(this.syncThreadId),this.syncThreadId=setInterval(this.syncWhenIdle,this.syncPeriod)},t.syncWhenIdle=function(){window&&window.requestIdleCallback?window.requestIdleCallback(this.sync,{timeout:1e3}):this.sync()},t.sync=function(){var t=D(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isSyncing){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,MT.get();case 5:return r=t.sent,t.next=8,r.getEvents(e.BATCH_SIZE);case 8:if(!((n=t.sent).data.length<=0)){t.next=11;break}return t.abrupt("return");case 11:return this.isSyncing=!0,t.next=14,this.makePromise(n.data).catch((function(e){console.warn("[SenderWithInterval]",e)}));case 14:if(!(o=t.sent)||200!==o.status){t.next=21;break}return t.next=18,r.removeEvents(n.keys);case 18:this.syncPeriod>e.SYNC_PERIOD&&(this.syncPeriod=e.SYNC_PERIOD,this.setSyncThreadId()),t.next=25;break;case 21:return t.next=23,r.resetEvents(n.keys,n.data);case 23:this.syncPeriod*=2,this.setSyncThreadId();case 25:this.isSyncing=!1,t.next=32;break;case 28:t.prev=28,t.t0=t.catch(0),console.warn("[SenderWithInterval]",t.t0),this.isSyncing=!1;case 32:case"end":return t.stop()}}),t,this,[[0,28]])})));return function(){return t.apply(this,arguments)}}(),e}();XT.SYNC_PERIOD=2e3,XT.BATCH_SIZE=20;var $T,ZT=RT({},DT.OB,{liveish:""}),em=function(){function e(e){var t,r;this.options=e,this.endpoint=e.endpoint||(t=e.env.toLowerCase(),r=e.locale.toLowerCase(),"https://c-api-bit."+ZT[t]+"shopeemobile.com/"+r+"/tr"),this.pageId=Oa()(),this.isOnload=!0,void 0===e.appId&&(this.options.appId=0),(void 0===e.enableAutoTrack||e.enableAutoTrack)&&(this.autoTracker=new zT),e.sendEventByInterval?this.sender=new XT(this.post.bind(this)):this.sender=new JT(this.post.bind(this))}var t,r=e.prototype;return r.updatePageId=function(){this.pageId=Oa()()},r.track=function(e,t){console.warn("[TrackingV3SDK] TrackingV3SDK.track is deprecated"),this.sync({data:{type:e,timestamp:Date.now(),info:t}})},r.sync=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.prev=1,e.next=4,this.preProcess(r);case 4:return n=e.sent,e.next=7,MT.get();case 7:return o=e.sent,e.next=10,o.addEvent(n);case 10:if(this.options.sendEventByInterval){e.next=13;break}return e.next=13,this.sender.sync();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.warn("[TrackingV3SDK]",e.t0);case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),r.post=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertEvents(t);case 2:if(!((r=e.sent).length>0)){e.next=8;break}return e.next=6,this.addMeta(r);case 6:return n=e.sent,e.abrupt("return",this.options.fetch(this.endpoint,{method:"POST",headers:{"X-SPC-DF":n.uuid},body:JSON.stringify(n)}));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.addMeta=(t=D(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.options,n=r.platform,o=r.ua,a=r.source,c=r.meta,s=r.getCookies,!(i=PT(s)).SPC_F){e.next=6;break}e.t0=i.SPC_F,e.next=9;break;case 6:return e.next=8,GT.GetSessionId();case 8:e.t0=e.sent;case 9:return u=e.t0,e.abrupt("return",{uuid:u,events:t,meta:RT({},c,{platform:n,ua:o,source:a,locale:this.options.locale.toLowerCase(),cookies:i,userid:i.SPC_U&&"-"!==i.SPC_U?parseInt(i.SPC_U,10):null,pageid:this.pageId,app_id:this.options.appId})});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),r.convertEvents=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.v2ToV3ConverterPromise;case 2:r=e.sent,n=[],o=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}if(!(s>=a.length)){e.next=3;break}return e.abrupt("return","break");case 3:i=a[s++],e.next=10;break;case 6:if(!(s=a.next()).done){e.next=9;break}return e.abrupt("return","break");case 9:i=s.value;case 10:return t=i,e.next=13,r(t);case 13:e.sent.forEach((function(e){e.error||(u.postProcess(t,e),n.push(e))}));case 15:case"end":return e.stop()}}),e)})),a=t,c=Array.isArray(a),s=0,a=c?a:a[Symbol.iterator]();case 6:return e.delegateYield(o(),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",12);case 10:e.next=6;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.preProcess=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=GT.getLatestEventId(),n=this.options.preProcess(this,t),e.next=4,GT.getSession();case 4:return o=e.sent,n=RT({},n,{session_id:o.sessionId,sequence_id:o.sequenceId,civ_id:r}),"v3"===t.type?t.info&&"view"===t.info.operation&&(a=t.info.page_type||"",GT.setLatestViewPageType(a),n.params=QT(this.isOnload),this.isOnload=!1):"pageState"===t.type&&t.info&&(c=t.info.pageType||"",GT.setLatestViewPageType(c),n.params=QT(this.isOnload),this.isOnload=!1),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.postProcess=function(e,t){if(t.info&&void 0===t.info.usage_id&&(t.info.usage_id=0),t.session_id=e.session_id,t.sequence_id=e.sequence_id,t.civ_id=e.civ_id,t.info&&"auto_view"===t.info.operation&&this.options.matchRoutes){var r=this.options.matchRoutes,n=r(t.info.data.auto_pv_common.auto_pathname);n&&(t.info.auto_view_id="browser|"+n);var o=t.info.data.auto_pv_common.auto_refer;if(o&&o.startsWith("/")){var a=r(o);a&&(t.info.data.auto_pv_common.auto_refer="browser|"+a)}}if(e.params&&t.info.data){var c=t.info.data.view_common||{};c=RT({},c,e.params),t.info.data.view_common=c}return t},e}();function tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rm(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?tm(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nm=function(t){var r={};for(var n in t)for(var o in t[n])r=rm(rm({},r),{},e({},o,{section:n,type:t[n][o]}));return r}({buyer_information_dropdown:{clickViewProfile:"more_view_profile",clickMoreReport:"more_report",clickBlockInProfile:"more_block"},buyer_information:{clickProfileMenus:"username_more_button",impressionProfileMenus:""},chat_more_dropdown:{clickClosedInProfile:"chat_more_close",markAsPinned:"pin_chat",markAsUnpinned:"unpin_chat",markAsRead:"mark_as_read",markAsUnread:"mark_as_unread",markAsDelete:"delete",markAsClose:"close",markAsRestart:"restart",markAsMute:"mute",markAsUnmute:"unmute"},conversation_window:{replyIcon:"reply_icon",deleteIcon:"delete_icon",repliedMessageBar:"replied_message_bar",repliedMessageBarCloseButton:"replied_message_bar_close_button",actionDragVideoInMediaPreivew:"",deletePreviewMediaInMediaPreivew:"",closePreviewMediaInMediaPreivew:"",impressionMediaInMediaPreivew:"preview_media",clickAddMediaInMediaPreivew:"preview_add_media",clickResendVideo:"resend_video",impressionVideoMessage:"video_play_thumbnail",impressionImageMessage:"qrcode_alert",clickCancelVideo:"cancel_video",clickAcceptOffer:"accept_offer",clickRejectOffer:"reject_offer",clickViewProductInMall:"view_in_mall",clickViewProductInSellerCenter:"view_in_seller_center",clickViewDetailInSellerCenter:"order_view_detail_button",clickHandleStoryMessage:"story",clickPlayInVideoMessage:"video_play_thumbnail",impressionResendVideo:"resend_video",clickPreviewQrcode:"open_qrcode_alert",clickOrderMessage:"order_message",clickProductMessage:"product_message",clickProductItemMessage:"item_collection_message",clickClaimVoucher:"voucher_claim",impressionPopupOrderCard:"popup_order_card",impressionOrderMessage:"order_message",impressionProductMessage:"product_message",impressionBundleDealCard:"bundle_deal_card",impressionVoucherCard:"claim_card",impressionProductListCard:"product_list_card",impressionCartCard:"cart_card",impressionRateCard:"rate_card",impressionProductCategoryCard:"product_category_card",impressionFlashSaleCard:"flash_sale_card",impressionOrderFromSourceInSpecialMessage:"order_message_source",impressionProductFromSourceInSpecialMessage:"product_message_source",clickVisitProductInSellerCenter:"product_message_source",clickVisitOrderInSellerCenter:"order_message_source",impressionOrClickUnreadBriefMessage:"latest_message",clickFlashSaleItemsDetail:"flash_sale_items",clickViewFlashSaleInMall:"flash_sale_button",clickViewBundleDealInMall:"bundle_deal_button",clickBundleDealDetail:"bundle_deal_items",clickCartButton:"cart_button",clickCartProduct:"cart_product",clickProductListMessage:"product_list_items",clickRateButton:"rate_button",clickRateProduct:"rate_product",impressionVoucherForReceiverInMinichat:"claim_card",impressionPopupProductCard:"popup_product_card"},conversation_window_pop_up:{clickCloseMediaPreviewModalFromX:"close_pop_up",clickCloseMediaPreviewModalFromBackground:"close_pop_up_background",clickPreviewLeftMedia:"left",clickPreviewRightMedia:"right",impressionAfterSwipeMedia:""},conversation_window_qrcode_pop_up:{impressionUnknowQrcode:"qrcode_alert",clickQrcodeToLearnMore:"learn_more",clickBackToChat:"back_to_chat",clickOpenQrcode:"open_image",impressionQrcode:""},conversation_window_video_pop_up:{actionFinishVideo:"video_end",clickSlideBar:"slide_bar",clickDownloadVideo:"download",clickVideoMinimize:"minimize",clickVideoExpand:"expand",impressionReloadVideoError:"reload_video",clickReloadVideo:"reload_video",clickStopVideo:"stop_video",clickRestartVideo:"restart_video"},voucher_information_tab:{impressionVoucherInWorkStation:"voucher_card"},order_information_tab:{clickViewOrderDetail:"order_view_detail",clickSendOrderLink:"order_sendlink"},chat_list_dropdown:{clickFilter:"filter",clickFilterAll:"filter_all",clickFilterUnreplied:"filter_unreplied",clickFilterUnread:"filter_unread",clickFilterPinned:"filter_pinned",clickFilterClosed:"filter_closed"},chat_list:{clickChatMore:"chat_more",clickChatUser:"chat_user"},shop_head_status_dropdown:{clickStatusOnlineButton:"status_online_button",clickStatusHangup:"status_hangup"},delete_confirmation_popup:{deleteConfirm:"delete_confirmation",cancelConfirm:"cancel_confirmation"},error_popup:{error:"error_popup"},product_card_pop_up:{clickSendPopupProductCard:"send",clickClosePopupProductCard:"close"},order_card_pop_up:{clickSendPopupOrderCard:"send",clickClosePopupOrderCard:"close"},order_card:{clickCopyOrderSN:"copy"}}),om=(["message_shortcuts","auto_reply","notification","translation_assistant","timestamp","performance_data","login_status","faq_assistant","seller_recom"].reduce((function(t,r){return rm(rm({},t),{},e({},"click_".concat(r),{section:"",type:r}))}),{}),rm(rm({},nm),{},(e($T={impressionConversationCell:{section:"",type:"chat_conversation"},clickConversationCell:{section:"",type:"chat_conversation"},operateHints:{section:"message_toolbar",type:"shortcut_result_from_auto_popup"},clickEditShortcut:{section:"message_toolbar",type:"shortcut_button_draft"},operateSearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_available"},searchShortcutsFocus:{section:"message_toolbar",type:"shortcut_button"},impressionEmptySearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_empty"},selectShortcutFromShortcutButton:{section:"message_toolbar",type:"shortcut_result_from_shortcut_button"},clickMuteInProfile:{section:"personal_information_dropdown",type:"mute"},clickUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionMuteInProfile:{section:"personal_information_dropdown",type:"mute"},impressionUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionSafetyTip:{section:"conversation_window",type:"safety_tip"},clickSafetyTipLearnMore:{section:"safety_tip",type:"learn_more"},clickAddFromTemplate:{section:"message_shortcuts_detail_tab",type:"add_message_template"},actionAdjustMessageShortcuts:{section:"message_shortcuts_tab",type:""},actionAdjustMessageShortcutsDetail:{section:"message_shortcuts_detail_tab",type:""},impressionClickableCard:{section:"conversation_window",type:"clickable_message"},clickClickableCard:{section:"conversation_window",type:"clickable_message"},clickRateCardSubmit:{section:"evaluation_card",type:"evaluation_submit_button"},impressionRateCard:{section:"evaluation_card",type:""},impressionRateCardFeedback:{section:"evaluation_card_feedback",type:""},clickTranslationFeedback:{section:"",type:"translation_feedback"},impressionFeedbackPopup:{section:"feedback_popup_window",type:"translation_feedback"},clickFeedbackSubmit:{section:"feedback_popup_window",type:"feedback_submit_button"},impressionFeedbackMore:{section:"feedback_popup_window",type:"feedback_tell_us_more"},clickSendMessageButton:{section:"",type:"send_message_button"},clickRestartButton:{section:"",type:"restart_conversation"},clickStickerInToolbar:{section:"message_toolbar",type:"sticker_button"},clickImageInToolbar:{section:"message_toolbar",type:"image_button"},clickVideoInToolbar:{section:"message_toolbar",type:"video_button"},clickShortcutInToolbar:{section:"message_toolbar",type:"shortcut_button"},clickSendRatingCard:{section:"",type:"appraise_button"},clickVisitSellerCenterFromShopList:{section:"",type:"visit_seller_center"},clickBackChatFromShopList:{section:"",type:"view_message"},clickShopHeadStatus:{section:"",type:"shop_head_status"},viewPage:{section:"",type:""},impressionChatRoom:{section:"conversation_window",type:""},translationShowOriginal:{section:"",type:"show_original"},translationTryAgain:{section:"",type:"try_again"}},"clickShortcutInToolbar",{section:"message_toolbar",type:"shortcut_button"}),e($T,"clickOrdersInToolbar",{section:"message_toolbar",type:"orders_button"}),e($T,"clickProductsInToolbar",{section:"message_toolbar",type:"products_button"}),e($T,"clickSearchNameResult",{section:"",type:"search_name_result"}),e($T,"clickSearchName",{type:"search_name"}),e($T,"impressionChatIcon",{type:"chat_icon"}),e($T,"clickChatIcon",{type:"chat_icon"}),e($T,"clickToWebchatButton",{type:"to_webchat_button"}),e($T,"clickFoldButton",{type:"fold_button"}),e($T,"clickUnFoldButton",{type:"unfold_button"}),e($T,"clickCloseButton",{type:"close_button"}),e($T,"typeMessage",{type:"typing_message",section:"message_toolbar"}),$T)));function am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var cm,sm=null,im=function(e){e&&(sm=e)},um=null,dm=function(){var t,r;if(t=(0,R.checkIsScChat)(),window.BITrack)um=window.BITrack;else{var n={appId:t?1:0,fetch:le(),source:"pc",platform:"pc",ua:navigator?navigator.userAgent||navigator.vendor:"",getCookies:U().get,sendEventByInterval:!0,enableAutoTrack:!1};r=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?am(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):am(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({locale:(0,R.getRuntimeRegion)(),env:(0,R.getRuntimeServer)()},n),cm=new em(RT({},r,{v2ToV3ConverterPromise:function(e){return[e]},preProcess:function(e,t){return t}})),um=cm.sync.bind(cm)}},lm=function(e){var t=e.trackerName,r=e.data,n=e.operation,o=void 0===n?R.TrackerOperation.CLICK:n,a=e.page,c=e.shopId;um||dm();var s=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=om[e.trackerName],c=a.section,s=void 0===c?"":c,i=a.type,u=void 0===i?"":i,d=sm||{},l=d.shop_id,p=void 0===l?"":l,f=d.role,_=void 0===f?"":f,E=d.id,S=void 0===E?"":E,h=Object.assign({},{shopid:p||o,account_type:_||"shopee_user",account_id:S},t);return{operation:r,page_section:s,target_type:u,page_type:n||"minichat_page",data:r===R.TrackerOperation.IMPRESSION?{viewed_objects:[h]}:h}}({trackerName:t,data:r,operation:o,page:a,shopId:c});um({data:{type:"v3",timestamp:Date.now(),info:s}})},pm=[],fm=function e(t){for(;(t.timeRemaining()>5||t.didTimeout)&&pm.length;){var r=pm.shift();lm(r)}pm.length&&_t(e,{timeout:200})},_m=function(e){pm.push(e),_t(fm,{timeout:200})},Em=[];function Sm(e){if((e.timeRemaining()>5||e.didTimeout)&&Em.length){var t=ue(Em);Em=[],x.store.dispatch(TO({reportTask:t}))}Em.length&&_t(Sm,{timeout:200})}var hm,Om=function(e){var t;(t=Em).push.apply(t,ue(e)),_t(Sm,{timeout:200})},vm=function(e){return e.startsWith("https://")||e.startsWith("http://")?e:"https://".concat(e)},Tm=function(e){return"https://".concat((0,R.getMallUrl)((0,R.getRuntimeRegion)())).concat(e)},mm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.order_id,n=t.return_id;switch(e){case"order_detail_page":case"shipping_info_page":case"spl_landing_page":return Tm("/user/purchase/order/".concat(r));case"my_voucher_page":return Tm("/user/voucher-wallet");case"topay_order_detail_page":return Tm("/user/purchase?type=9");case"drc_discuss_page":return"https://".concat((0,R.getSellerCenterUrl)((0,R.getRuntimeRegion)()),"/portal/sale/return/").concat(n);case"change_mobile_number_page":return Tm("/user/account/profile");case"request_order_return_page":case"buyer_order_return_page":case"upload_evidence_page":return Tm("/user/purchase?type=8");case"return_refund_detail_page":return Tm("/return/detail/orderid/".concat(r,"?__mobile__=1"))}};function gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bm(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?gm(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e[e.unpaid=1]="unpaid",e[e.to_ship=2]="to_ship",e[e.shipping=3]="shipping",e[e.completed=4]="completed",e[e.cancelled=5]="cancelled"}(hm||(hm={}));var ym=function(e,t){return(0,R.cleanOrder)(bm(bm({},e),{},{status:hm[e.order_status],products_count:e.item_count,created_at:1e3*e.create_time,serial_number:e.order_sn,estimated_escrow:e.seller_estimated_escrow/1e5,total_price:e.buyer_pay_amount/1e5}),t,!0)},Rm=function(e){var t;return{checkout_id:e.checkout_id,order_sn:e.order_sn,total_price:e.default_price,currency:e.currency,order_status:String(e.order_status),item_image:(null===(t=e.items)||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.image[0]})))||[e.image],list_type:e.list_type,has_request_refund:e.has_request_refund,buyer_pay_amount:e.buyer_pay_amount,seller_estimated_escrow:e.seller_estimated_escrow,shop_id:e.shop_id,order_id:e.order_id}};function Cm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pm(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Cm(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SG",t=arguments.length>1?arguments[1]:void 0,r=void 0!==t&&!t;return"TW"!==e||r?R.Currencies[e]:"NT$"},Im=function(e,t){return Pm(Pm({},e),function(e,t){var r=e.original_prices,n=e.actual_prices,o=y(r.map((function(r){return(0,R.formatPrice)(r,e.country,{},t)})),2),a=o[0],c=o[1],s=y(n.map((function(r){return(0,R.formatPrice)(r,e.country,{},t)})),2),i=s[0],u=s[1],d=a===c?a:"".concat(a," - ").concat(c),l=i===u?i:"".concat(i," - ").concat(u),p=a.includes("NaN")||i.includes("NaN");return{original_price_string:p||d===l?"":d,actual_price_string:p?"".concat(Dm(e.country,t),"???"):l,storedTimestamp:Date.now()}}(e,t))};function Am(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}})(),A})(),e.exports=n(r(82677),r(26842),r(28366),r(36808),r(6222),r(99995),r(47190),r(94301),r(68214),r(52153),r(58518),r(53053),r(59065),r(67677),r(58397),r(98282),r(34857),r(20573),r(847),r(17311),r(46583),r(46811),r(31479),r(16392),r(94633),r(77217),r(87766))},26842:function(e,t,r){var n;n=(e,t,r,n)=>(()=>{var o={757:(e,t,r)=>{e.exports=r(666)},470:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,t:()=>u});var n=r(661),o=r.n(n),a=r(547),c=!1,s=function(e,t){c=!0;var r=t||(0,a.CE)();o().init({lng:r,fallbackLng:r,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";c||s({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,r,t,!0,!0)},u=o().t.bind(o())},547:(e,t,r)=>{"use strict";r.d(t,{An:()=>F,CE:()=>K,Db:()=>z,E3:()=>P,Ey:()=>D,Fy:()=>V,Ht:()=>R,I7:()=>U,I9:()=>J,IE:()=>Q,Jy:()=>N,L6:()=>W,Ll:()=>k,Od:()=>M,S1:()=>i,S8:()=>y,Vm:()=>C,X7:()=>q,Y8:()=>h,YH:()=>j,dV:()=>x,jz:()=>X,k2:()=>G,nr:()=>m,qk:()=>b,r:()=>Y,u7:()=>A,wK:()=>I,xC:()=>L,z$:()=>S});var n,o,a,c,s={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},i=function(e,t,r){n=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,a=r,c=s[n]||"en"},u=["my","br","mx","co","ar"],d=["id","th"],l=["us"],p=function(e){return u.includes(e)?"com.".concat(e):d.includes(e)?"co.".concat(e):l.includes(e)?"com":e},f=function(e){return"tw"===e?"xiapi":e.toLowerCase()},_=function(e){return p(e)},E=function(){return"live"===o?"shopee":"".concat(o,".shopee")},S=function(){return"cn"===n},h=function(){return"kr"===n};function O(){return v()&&!S()}function v(){var e=window.location.hostname;return e&&e.includes("cn")}var T=function(e,t){return"seller"===e?"vn"!==t||O()?"seller":"banhang":e},m=function(e,t){var r=t?t.toLowerCase():n;return"".concat(T(e,r),".").concat(f(r),".").concat(E(),".").concat("cn")},g=function(e,t){var r,a=t?t.toLowerCase():n;return O()?m(e,a):"".concat(T(e,a),".").concat((r=window.location.hostname,r&&r.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):E()),".").concat(_(a))},b=function(e){return g("seller",e)},y=function(){return"live"===o?"seller.shopee.cn":"seller.".concat(o,".shopee.cn")},R=function(){return"live"===o?"seller.shopee.kr":"seller.".concat(o,".shopee.kr")},C=function(){return"".concat(b(),"/webchat/api")},P=function(){return"".concat(b(),"/api")},D=function(){return g("seller-push-ws")},I=function(){return g("chat-ws")},A=function(e){var t=e?e.toLowerCase():n;return"cn"!==t&&"kr"!==t||(t="my"),v()?"".concat(f(t),".").concat("live"===o?"":"".concat(o,".")).concat("xiapibuy.com"):"".concat(E(),".").concat(_(t))},w=["sg","my","th","ph","vn","id","tw","br"],N=function(e){var t=e?e.toLowerCase():n;if(S())return"https://s-cf-sg.shopeesz.com/file/";if(h())return"https://cf.shopee.sg/file/";var r=w.includes(t);return O()&&r?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(p(t),"/file/")},x=function(e){var t=e?e.toLowerCase():n;return"tw"===t&&v()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(p(t),"/file/")},k=function(e){var t=e?e.toLowerCase():n,r="test-stable"===o?"staging":o;return"".concat(v()?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee").concat("live"===o?"":"/test","/shopee-sticker-").concat(r,"-").concat(t)},U=function(){return"https://subaccount.".concat(E(),".com/")},M=function(){return"https://deo.shopeemobile.com/shopee/shopee-seller-live-".concat(S()||h()?"sg":n,"/downloads/")},L=function(){return"https://".concat(g("seller"),"/webchat/conversations")},j=function(){return"https://".concat(g("seller"),"/webchat")},G=function(){var e="test-stable"===o?"stable":o;return"https://deo.".concat(O()?"shopeesz":"shopeemobile",".com/shopee/shopee-seller-").concat(e,"-").concat(n,"/")},F={sg:"https://help.shopee.sg/sg/s/article/What-happens-if-I-ve-accumulated-Penalty-Points-1542975961836",my:"https://help.shopee.com.my/my/s/article/What-is-Shopee-s-Seller-Penalty-Points-system-1542971633226",th:"https://help.shopee.co.th/th/s/article/%E0%B8%A3%E0%B8%B0%E0%B8%9A%E0%B8%9A%E0%B8%84%E0%B8%B0%E0%B9%81%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%9E%E0%B8%A4%E0%B8%95%E0%B8%B4%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3-1542967300368",tw:"https://help.shopee.tw/tw/s/article/%E5%A6%82%E6%9E%9C%E7%B4%AF%E7%A9%8D%E4%BA%86%E8%A8%88%E5%88%86-%E8%B3%A3%E5%AE%B6%E6%9C%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E7%9A%84%E9%99%90%E5%88%B6-1542986467060",vn:"https://banhang.shopee.vn/edu/article/237",ph:"https://help.shopee.ph/ph/s/article/How-does-the-Seller-Penalty-Points-system-work-1542963021404",id:"https://seller.shopee.co.id/edu/article/1762",in:"https://seller.shopee.in/edu/courseDetail/482"},H={sg:"7a48024995c847d9a4586bab9fde57a7",id:"888adc066bf3426a8c70227470281818",mx:"e58cb9c620f54aec9e18a01632c35c05",br:"d75e2dbb49594bd19d1ea83485339a45",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",my:"b7a7ff2afd484f1dbddb3a922c7e90e7",th:"38e4b86fd0c04ae3b2c9200c7ea9c89e",ph:"bafd4812311d417c981d2690cda870bf",vn:"9e0e87184cf14246aabe6af0d78b2aa9",tw:"1bfa4a9834204eccb62858d0e2d9e083",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t=H[e];return t?"https://help.shopee.".concat(p(e),"/portal/webform/").concat(t):"https://help.shopee.".concat(p(e),"/s/contactusform")},B={sg:"cc5c96e6af6140b6920f13c6fa67ddd1",my:"2e11e4a4fd554f4aaba90814987e8d3f",th:"fab4029ae0614fdd96021ba21bdd5d56",tw:"6331df0cc3e5409c85b5f3331e385a5c",vn:"1214504dda894592a1c7ef4236912f4d",ph:"bafd4812311d417c981d2690cda870bf",id:"13a6214dacf54eeb83cea7110c6adde6",br:"23b02efbc1254721ab69549e442a6466",mx:"e58cb9c620f54aec9e18a01632c35c05",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",ar:"16e6e483bc5244d9946daf570c954dc3",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t="";return t=["tw","vn"].includes(e)?"https://cs.shopee.".concat(p(e)):"https://help.shopee.".concat(p(e)),"".concat(t,"/portal/webform/").concat(B[e])},Q=function(){return o},q=function(){return n},W=function(){return a},K=function(){return c},z=function(e,t,r){var n=e||{},o=n.status,a=n.checkout_id,c=n.order_id,s=n.id,i=n.shop_id;return"unpaid"===o?"https://".concat(A(r),"/user/purchase/checkout/").concat(a,"/?shopid=").concat(i||t):"https://".concat(A(r),"/user/purchase/order/").concat(c||s,"/?shopid=").concat(i||t)},J=function(e,t,r,n){window.open("https://".concat(e?A(t):A(),"/product/").concat(n,"/").concat(r,"/"))},X=function(){return v()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new D(n||[]);return a._invoke=function(e,t,r){var n=l;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=d(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function h(){}function O(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=O.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=d(e[o],e,a);if("throw"!==i.type){var u=i.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(l).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=d(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=g.constructor=O,O.constructor=h,h.displayName=i(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},994:t=>{"use strict";t.exports=e},602:e=>{"use strict";e.exports=t},661:e=>{"use strict";e.exports=r},349:e=>{"use strict";e.exports=n}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";c.r(s),c.d(s,{AVAILABLE_IMAGE_TYPE:()=>Re,AVAILABLE_VIDEO_EXT:()=>Pe,AVAILABLE_VIDEO_TYPE:()=>Ce,AccountType:()=>le,AgentOnlineStatus:()=>y,AlertType:()=>Me,AllProductFilters:()=>oe,ApiMessageTypes:()=>Qn,BATCH_OPERATE_MAX_SELECTION:()=>Q,BatchOperates:()=>q,CHAT_MIN_TEXT_BOX_HEIGHT:()=>S,ChatBotInteractionType:()=>ke,ChatBotMessageContentSource:()=>Ue,ChatbotFromType:()=>W,ConversationSource:()=>X,ConversationTab:()=>J,ConversationTypeEnum:()=>U,Currencies:()=>r,CustomShareEvent:()=>Ve,DataFetchStatus:()=>P,DiscountType:()=>M,EvaluationErrorCode:()=>u,EvaluationStatus:()=>i,FeedbackInfo:()=>E,FetchMessageStatus:()=>v,HALF_HOUR:()=>ia,INVALID_PRICE:()=>_t,LS:()=>fr,LogisticsLog:()=>me,LogisticsStatus:()=>ge,MAX_IMAGE_SIZE:()=>Ie,MAX_MEDIA_NUM:()=>p,MAX_SHOWING_ITEM_COUNT:()=>ce,MAX_VIDEO_SIZE:()=>Ae,MINI_MIN_TEXT_BOX_HEIGHT:()=>h,MessageErrorCode:()=>a,MessageFillStatus:()=>O,MessageOption:()=>e,MessageSendStatus:()=>o,MessageShortcutGroupType:()=>f,MessageSource:()=>$,MessageStatus:()=>l,MessageTypes:()=>n,MessagesRelatedKey:()=>T,NO_ACCESS_KEY:()=>we,ONE_DAY:()=>ua,OfferStatus:()=>N,OperationStatus:()=>D,OrderCancelReason:()=>he,OrderItemStatus:()=>_e,OrderListTabs:()=>ee,OrderListType:()=>ve,OrderPayMethod:()=>Ee,OrderStatusExt:()=>Oe,OrderTabStatus:()=>pe,OrderTabStatusIndex:()=>fe,OrderType:()=>Te,PERMISSION_DELETE_MESSAGE:()=>_,PredictionType:()=>K,ProductFiltersMap:()=>ne,ProductPromotionLabel:()=>se,ProductStatusUsingNumber:()=>te,ProductStatusUsingString:()=>re,PromotionStatus:()=>d,ReportType:()=>z,RewardType:()=>L,SECOND_TO_MILLISECOND:()=>sa,SERVER_ERROR_CAPACITY:()=>ye,SERVER_ERROR_VALID_CONV_COUNT:()=>be,SPECIAL_VIDEO_MIME_TYPE:()=>De,SellerCancelOrderReason:()=>Se,ShareDataType:()=>Be,SocketConnectionStatus:()=>Y,SocketToAlertType:()=>Le,StorageKey:()=>He,SubAccountRole:()=>de,SubAccountShopStatus:()=>ue,SwitchStatus:()=>A,SystemProductFilters:()=>ae,TrackerOperation:()=>xe,TranslationFeedbackQuality:()=>t,TranslationStatus:()=>w,UnreadSource:()=>Z,UserLoginStatus:()=>I,VIEW_DETAIL_KEY:()=>Ne,VoucherOperateType:()=>B,VoucherStamp:()=>H,VoucherStatus:()=>F,VoucherTab:()=>j,VoucherTabIndex:()=>G,VoucherType:()=>V,WorkstationCommonKey:()=>je,WorkstationProductCommonKey:()=>Ge,WorkstationProductPanel:()=>ie,WorkstationVoucherCommonKey:()=>Fe,camelCase:()=>ot,cancelOrderPolicy:()=>Gn.An,capitalizeFirstLetter:()=>Yt,changeLanguage:()=>Pa.D,checkEmptyObject:()=>Qe,checkEntryGuide:()=>dr,checkHeaderGuide:()=>ur,checkIsScChat:()=>ze,checkMassToolGuide:()=>ar,checkObjectId:()=>qe,checkProductDeleted:()=>na,checkProductInvalid:()=>ca,checkRegionFilterGuide:()=>ir,checkReplyGuide:()=>sr,checkSearchGuilde:()=>cr,checkTranslationGuilde:()=>nr,checkTranslationSettingsGuide:()=>or,cleanOrder:()=>ea,convertBase64ToBlob:()=>at,countingDown:()=>la,customizeTime:()=>yt,debounce:()=>Xt,deepMerge:()=>ct,downloadVideoWithBlob:()=>jn,encode:()=>et,escapeRegex:()=>ao,fillMessagePreview:()=>Tn,fillWithZero:()=>pa,formatDiscount:()=>Sa,formatMessageTime:()=>Dt,formatPrice:()=>Et,formatTransifyKeyWithNumber:()=>Lt,getApiServer:()=>Gn.Vm,getBrowserInfo:()=>Gt,getCDNUrl:()=>Gn.jz,getCNSCSellerCenterUrl:()=>Gn.S8,getCSChatServer:()=>Gn.wK,getCancelOrderDisplayStatus:()=>Bo,getCancelReason:()=>Vo,getChatBotParams:()=>hn,getCrmPreviewParams:()=>On,getCurrentTimestampString:()=>fa,getCustomMessageText:()=>nn,getFileServer:()=>Gn.Jy,getFormattedData:()=>Un,getFormattedTime:()=>Ct,getHasSameSourceAndTarget:()=>En,getIsMessageShortcutKeywordValid:()=>ro,getIsMessageValidToDelete:()=>Kn,getItem:()=>_r,getKRSCSellerCenterUrl:()=>Gn.Ht,getLocaleText:()=>_n,getLogisticsLog:()=>Jo,getMallOrderUrl:()=>Gn.Db,getMallUrl:()=>Gn.u7,getMediaData:()=>wn,getMessageIsRatecard:()=>fn,getMessageIsSend:()=>zn,getMessageShortcutsKeywords:()=>no,getOrderPayment:()=>po,getOrderStatusTransifyKey:()=>lo,getPayMethod:()=>wo,getProductStatusTransifyKey:()=>ra,getPushServer:()=>Gn.Ey,getReplyTrackerMessageType:()=>qn,getRuntimeLocale:()=>Gn.CE,getRuntimeRegion:()=>Gn.X7,getRuntimeServer:()=>Gn.IE,getRuntimeVersion:()=>Gn.L6,getSCApiServer:()=>Gn.E3,getSellerCenterUrl:()=>Gn.qk,getServiceLocale:()=>zt,getShopeeCNUrl:()=>Gn.nr,getShopeeCustomerService:()=>Gn.Fy,getSpammerPolicyUrl:()=>Gn.r,getSystemMessageByLocale:()=>vn,getTimestampNano:()=>_a,getTranslateFileServer:()=>Gn.k2,getTranslationLocale:()=>Wt,getUrlParam:()=>jt,getVideoServer:()=>Gn.dV,getVoucherCondition:()=>ma,getVoucherTimeText:()=>ga,getWebChatPureUrl:()=>Gn.YH,getWebChatUrl:()=>Gn.xC,goToPcMall:()=>Gn.I9,greaterThan:()=>Ke,handleBigNumber:()=>st,handleDisplayTranslation:()=>ha,handleReportItem:()=>Ca,handleReportItems:()=>Ra,hasSelectShop:()=>Xe,hasTargetMessageOption:()=>dn,hasTargetMessageOptions:()=>pn,init:()=>Gn.S1,isAbnormalProduct:()=>oa,isDeletedMessage:()=>ln,isProductSoldout:()=>aa,isValidBrowser:()=>Je,isValidMessageStatusToReply:()=>Yn,isValidMessageTypeToReply:()=>Hn,isVisitingCNSC:()=>Gn.z$,isVisitingKRSC:()=>Gn.Y8,makeSecurityTipsMessage:()=>Sn,memFn:()=>Zt,persistLimit:()=>hr,previewMessage:()=>un,redirectionWithAccess:()=>Jt,removeItem:()=>Sr,removeItemFromArray:()=>it,searchMessageShortcuts:()=>oo,setItem:()=>Er,simpleEqualCheck:()=>We,stickersURI:()=>Gn.Ll,subAccountURL:()=>Gn.I7,throttle:()=>$t,transPrice:()=>St,transformVideoTime:()=>Pt,unifyLocale:()=>qt,updateTimeLocale:()=>mt,validateDuration:()=>Dn,validateMediaDuration:()=>Pn,validateTypeAndSize:()=>Ln,videoURL:()=>Gn.Od,voucherIsExpired:()=>va,voucherIsStockout:()=>Ta});var e,t,r={SG:"$",TH:"฿",VN:"₫",ID:"Rp",TW:"$",MY:"RM",PH:"₱",BR:"R$",IN:"₹",CN:"¥",MX:"$",CO:"$",CL:"$",AR:"$",PL:"zł",ES:"€",FR:"€",KR:"₩",US:"$"},n={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_WEBVIEW:"webview",MSG_TYPE_RATE_CARDS:"rate_cards",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_FEED_STORY:"feed_story",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips"},o={SENDING:1,FAILED:2,SUCCEED:3},a={FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,DEFAULT:-1},i={UNRATED:"unrated",RATED:"rated",EXPIRED:"expired",INVALID:"invalid"},u={RATED:"rating_card_rated",EXPIRED:"rating_card_expired"},d={UPCOMING:"upcoming",ONGOING:"ongoing",EXPIRED:"expired"},l={CENSORED_BLACKLIST:"censored_blacklist",NORMAL:"normal"},p=9,f={PERSONAL:1,TEAM:2},_=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT];!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(e||(e={})),function(e){e[e.bad=1]="bad",e[e.average=2]="average",e[e.good=3]="good"}(t||(t={}));var E={IMPROVED:1,WRONG:2,OFFENSIVE:4},S=156,h=88,O={FILLED:"filled",FILLING:"filling",FAILED:"failed"},v={PRELOADING:"preloading",FETCHING:"fetching"},T={TIME_NOW:"timeNow",PRELOADED:"preloaded"};function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y,R,C={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},P=b(b({},C),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),D=b(b({},C),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),I={SUCCEED:"succeed",FORBIDDEN_ERROR:"forbidden",INTERNAL_SERVER_ERROR:"internalServerError",LOGOUT:"logout"},A={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},w={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},N={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.OFFLINE=-1]="OFFLINE",e[e.ONLINE=0]="ONLINE",e[e.HANGUP=1]="HANGUP"}(y||(y={}));var U,M={AMOUNT:"amount",PERCENTAGE:"percentage"},L={DISCOUNT:"discount",COIN_CASHBACK:"coin_cashback"},j={ONGOING:"ongoing",SCHEDULED:"scheduled"},G=(m(R={},j.ONGOING,0),m(R,j.SCHEDULED,1),R),F=k(k({},j),{},{FINISHED:"finished"}),H={USED:"used",EXPIRED:"expired",REDEEM:"redeem"},V={ITEM:"item",SHOP:"shop"},B={DETAILS:"details",CLAIM:"claim",USE:"use"},Y={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"},Q=50,q={PIN:"pin",UNPIN:"unpin",MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",FORWARD:"forward"};!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(U||(U={}));var W,K,z,J={CUSTOMER:"customer",AGENT:"agent"},X={FILTER:1,SHOP:2,SHOP_LIST:3,SYNC:4,QUEUE:5,FAKING:6,LATEST:7,OLDER:8,DELETE:9,LOAD_MORE:10,SOCKET:11,PRELOAD:12},$={VIEW:1,FETCH:2,CLEAR_SEARCH:3,SHOW:4,SYNC:5,AUTO:6,SEND:7,UPDATE:8,CATCH:9},Z={PRELOAD:1,QUEUE:2,RECEIVE_TOTAL:3,RECEIVE_SINGLE:4,SYNC:5},ee={MINE:"mine",HIS:"his"},te={SOLD_OUT:-1,DELETED:0,NORMAL:1,REVIEWING:2,BANNED:3,INVALID:4,INVALID_HIDE:5,OFFENSIVE_HIDE:6,AUDITING:7,NORMAL_UNLIST:8,DELISTED:9},re={DELETED:"deleted",BANNED:"banned",NORMAL:"normal",SOLD_OUT:"sold_out",DELISTED:"delisted"},ne={sales:"sold",recent:"mtime"},oe={SALES:"sales",RECENT:"recent"},ae={RELATED:"related",TOP_RATED:"top_rated",FREQUENTLY_BOUGHT_TOGETHER:"frequently_bought_together"},ce=4,se={ADD_ON_DEAL:"add_on_deal",BUNDLE_DEAL:"bundle_deal",CAMPAIGN:"campaign",FLASH_SALES:"flash_sales",GIFT_WITH_PURCHASE:"gift_with_purchase",SHOW_DISCOUNT:"show_discount"},ie={ALL:"All",SELLER_RECOMMENDATION:"Seller_Recommendation",SYSTEM_RECOMMENDATION:"System_Recommendation"},ue={UNACCESSIBLE:"unaccessible",NONE:"none",UNALLOCATED:"unallocated"},de={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},le={SELLER:"seller",SUBACCOUNT:"subaccount"},pe={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},fe={all:0,unpaid:1,to_ship:2,shipping:3,completed:4,cancelled:5,refund:6},_e={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5},Ee={PAY_CREDIT_CARD:1,PAY_BANK_TRANSFER:2,PAY_OFFLINE_PAYMENT:3,PAY_IPAY88:4,PAY_FREE:5,PAY_COD:6,PAY_ESUN:7,PAY_BILL_PAYMENT:8,PAY_INDOMARET:13,PAY_KREDIVO:14,PAY_NICEPAY_CC:15,PAY_AIRPAY:18,PAY_SHOPEE_WALLET:20,PAY_SHOPEE_WALLET_V2:27,PAY_AKULAKU:21,PAY_INSTALLMENT:23,PAY_IBANKING:29},Se=[{cancel_reason_code:1,transify_key:"common.order.cancel_reason.out_of_stock"},{cancel_reason_code:3,transify_key:"common.order.cancel_reason.undeliverable_area"}],he={NONE:0,OUT_OF_STOCK:1,CUSTOMER_REQUEST:2,UNDELIVERABLE_AREA:3,CANNOT_SUPPORT_COD:4,LOST_PARCEL:5,SYSTEM_UNPAID:100,SYSTEM_UNDERPAID:101,SYSTEM_PAYMENT_REJECTED:102,LOGISTICS_REQUEST_CANCELED:200,LOGISTICS_PICKUP_FAILED:201,LOGISTICS_DELIVERY_FAILED:202,LOGISTICS_COD_REJECTED:203,BACKEND_LOGISTICS_NOT_STARTED:204,BACKEND_ESCROW_TERMINATED:300,BACKEND_INACTIVE_SELLER:301,BACKEND_SELLER_DID_NOT_SHIP:302,RULE_ENGINE_AUTO_CANCEL:400},Oe={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},ve={PAID:1,UNPAID:2,COMPLETED:3,CANCELLED:4,SHIPPED:5,ALL:6,TOSHIP:7,TORECEIVE:8,TOPAY:9,TOSHIP_UNPROCESSED:10,TOSHIP_PROCESSED:11,RETURN:12,GROUP_BUY_ALL:13,GROUP_BUY_ONGOING:14,GROUP_BUY_COMPLETED:15,GROUP_BUY_INVALID:16},Te={UNKNOWN:0,SIMPLE:1,ESCROW:2},me={ORDER_DETAIL_SHIPPING_CONFIRMED:2,ORDER_DETAIL_SHIPPED:4,ORDER_DETAIL_RECEIVED:5,ORDER_DETAIL_CANCELED:6,ORDER_DETAIL_NOTIFY_SHIP:7},ge={LOGISTICS_NOT_STARTED:0,LOGISTICS_REQUEST_CREATED:1,LOGISTICS_PICKUP_DONE:2,LOGISTICS_PICKUP_RETRY:3,LOGISTICS_PICKUP_FAILED:4,LOGISTICS_DELIVERY_DONE:5,LOGISTICS_DELIVERY_FAILED:6,LOGISTICS_REQUEST_CANCELED:7,LOGISTICS_COD_REJECTED:8,LOGISTICS_READY:9,LOGISTICS_INVALID:10,LOGISTICS_LOST:11,LOGISTICS_PENDING_ARRANGE:12},be=-1,ye=0,Re=["image/png","image/jpeg","image/jpg"],Ce=["video/*",".flv",".3gp",".rm",".rmvb",".asf",".mp4",".webm"],Pe=["MP4","TS","FLV","WMV","ASF","RM","RMVB","MPG","MPEG","3GP","MOV","WEBM","AVI"],De=["application/vnd.rn-realmedia","application/vnd.rn-realmedia-vbr"],Ie=2097152,Ae=31457280,we="common.no_sc_access",Ne="conversation_detail.workstation.order_panel.manage",xe={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",ACTION_FINISH_VIDEO:"action_finish_video",VIEW:"view",ACTION_ADJUST_MESSAGE_SHORTCUT:"action_adjust_message_shortcut",ACTION_SELECT:"action_select",ACTION_SEARCH:"action_search"},ke={MESSAGE:1001,SOLUTION:1002},Ue={HEAD_HOTQUESTION_SOURCE:1,SHORTCUT_SOURCE:2,CATEGORY_HOTQUESTION_SOURCE:3,FAQ_RECOMMEND_SOURCE:4,KB_INTENT_SOURCE:5,LIVEAGENT_RECOMMENDER_SOURCE:6};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(W||(W={})),function(e){e[e.Faq=0]="Faq",e[e.Intent=1]="Intent"}(K||(K={})),function(e){e[e.Categories=0]="Categories",e[e.OtherFaqType=1]="OtherFaqType",e[e.Intent=2]="Intent",e[e.Question=3]="Question",e[e.ChatWithSeller=4]="ChatWithSeller"}(z||(z={}));var Me={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},Le={pending:Me.warn,error:Me.error,resolved:Me.success},je="conversation_detail.workstation.panel",Ge="".concat(je,".product"),Fe="conversation_detail.workstation.voucher_panel",He={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert"},Ve={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},Be={UNREAD:"unread",UPDATE_SETTING:"updateSetting",UPDATE_OFFLINE_SETTING:"updateOfflineSetting"};function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}var Qe=function(e){return!e||0===Object.keys(e).length},qe=function(e,t){return null===e&&null===t||(null==e?void 0:e.id)===(null==t?void 0:t.id)},We=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},Ke=function(e,t){if(!e)return!1;if(!t)return!0;var r=(e+="").length,n=(t+="").length;if(r!==n)return r>n;var o=e.split(""),a=null;return o.forEach((function(e,r){"boolean"!=typeof a&&(a=parseInt(e)>parseInt(t[r])||parseInt(e)===parseInt(t[r])&&null)})),!!a},ze=function(){var e=window.location.hostname;return["seller","banhang","localhost"].some((function(t){return e.includes(t)}))},Je=function(){try{return!("undefined"!=typeof window&&"object"===Ye(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===Ye(process.versions)&&process.versions.electron||"object"===("undefined"==typeof navigator?"undefined":Ye(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}catch(e){return!0}}(),Xe=function(e){return!(null==e||!e.id)};function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ze(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$e(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,r,n){n[r]=e.charCodeAt(r)})),window.encodeURIComponent(window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.buffer))))}var tt,rt,nt,ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))},at=function(e){for(var t=window.atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new window.Blob([o],{type:r})},ct=function e(t,r){var n=JSON.parse(JSON.stringify(t));for(var o in r)n[o]=n[o]&&"[object Object]"===n[o].toString()?e(n[o],r[o]):r[o];return n},st=function(e){return e>=1e3?"999+":e},it=function(e,t){var r=Ze(e),n=r.indexOf(t);return n>-1&&r.splice(n,1),r},ut=c(994),dt=["PL","ES","FR"],lt=function(e){return e?e.toUpperCase():"SG"},pt=function(e){var t=e.price,r=e.country,n=function(e,t){return"TW"!==e||void 0!==t&&!t?"CL"===e?"$":(0,ut.getCurrencyConfig)(e).symbol||"":"NT$"}(r,e.isSCChat);if(dt.includes(r))return"".concat(n).concat(t).concat(n);var o=(0,ut.getCurrencyConfig)(r).symbolPosition===ut.SYMBOL_POSITION.BACK?"".concat(t).concat(n):"".concat(n).concat(t);return"MX"===r?"".concat(o," MXN"):o},ft=function(e){for(var t="",r=+e,n=["K","M","B"];r>1e3&&(t=n.shift()||"");)r/=1e3;var o=parseInt(100*+r+"")/100;return{value:r=Number.isInteger(o)?o:o.toFixed(2),unit:t}},_t="NaN",Et=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=r.withSpaces,a=void 0!==o&&o,c=r.withMinus,s=void 0!==c&&c,i=r.withUnit,u=void 0!==i&&i,d=r.withComma,l=void 0===d||d,p=lt(t),f=Number(e);if(Number.isNaN(f))return pt({price:_t,country:p,isSCChat:n});var _="",E="";if(u){var S=ft(f);_=S.unit,f=S.value}return s&&(E="-"),f=(0,ut.formatCurrency)(p,f,{symbol:"",spaceBetweenSymbol:a,noSeparator:!l}),f=pt({price:f,country:p,isSCChat:n}),"".concat(E).concat(f).concat(_)},St=function(e,t,r){return t=lt(t),pt({price:e,country:t,isSCChat:r})},ht=c(602),Ot=c.n(ht),vt=c(470).t,Tt=new(Ot()),mt=function(e){return Tt.locale.set(e)};!function(e){e.Today="today",e.Yesterday="yesterday"}(tt||(tt={})),function(e){e[e.Time=0]="Time"}(rt||(rt={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(nt||(nt={}));var gt,bt=function(e){var t=e.value,r=e.date,n=e.suffix,o=e.prefix,a="",c="";if(o&&(a=vt("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),n){var s=n.type===rt.Time?function(e){return e.format("hh:mm")}(r):"";c=(void 0===n.separator?", ":n.separator)+s}return a+t+c};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(gt||(gt={}));var yt=function(e,t){var r=t||{},n=r.noTodayFlag,o=r.noTimeFlag,a=r.needFullFormat,c=r.onlyKeepDate,s=r.isConvPreview,i=Tt.create(e);if(a)return bt({value:i.format("LHD"),date:i,suffix:{type:rt.Time}});if(c)return i.format("LHD");var u=["tw","cn"].includes(Tt.locale.current),d=function(e,t){var r=new Date,n=new Date(e);if(t){var o=r-n,a=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=r.getTime()-a+864e5)return gt.ThisWeek}if(r.getFullYear()===n.getFullYear()){if(r.getMonth()===n.getMonth()){var c=r.getDate(),s=n.getDate();return c===s?gt.Today:c-1===s?gt.Yesterday:gt.ThisMonth}return gt.ThisYear}return gt.NONE}(e,s);switch(d){case gt.Today:var l=n?void 0:{type:tt.Today},p={type:rt.Time,separator:""};return bt({value:"",date:i,prefix:l,suffix:p});case gt.Yesterday:var f={type:tt.Yesterday},_=o?void 0:{type:rt.Time,separator:""};return bt({value:"",date:i,prefix:f,suffix:_});case gt.ThisWeek:return vt("common.".concat(nt[new Date(e).getDay()]));case gt.ThisMonth:case gt.ThisYear:var E=o?void 0:{type:rt.Time};return bt({value:i.format(s?u?"MM/DD":"DD/MM":"LHDS"),date:i,suffix:E});default:var S=o?void 0:{type:rt.Time};return bt({value:i.format(s?u?"YY/MM/DD":"DD/MM/YY":"LHD"),date:i,suffix:S})}},Rt="YYYY-MM-DD hh:mm",Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Tt.create(e);return r.format(t||Rt)},Pt=function(e){var t=Math.ceil(e),r=t/3600<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=t/60%60<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=t%60<10?"0"+t%60:t%60;return t>=3600?"".concat(r,":").concat(n,":").concat(o):"".concat(n,":").concat(o)},Dt=function(e){var t=e.created_at,r=e.created_timestamp;return yt(t||1e3*r,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},It=c(661),At=c.n(It),wt=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},Nt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},xt=function(e){return e<=1?"one":"other"},kt={fr:wt,pl:Nt,default:xt},Ut={fr:function(e,t){return"".concat(wt(e),".").concat(wt(t))},pl:function(e,t){return"".concat(Nt(e),".").concat(Nt(t))},default:function(e,t){return"".concat(xt(e),"_").concat(xt(t))}},Mt=["fr","pl"],Lt=function(e,t,r){var n=At().language||"en",o=Mt.includes(n)?n:"default";return void 0!==r?"".concat(e,"_").concat(Ut[o](t,r)):"".concat(e,"_").concat(kt[o](t))},jt=function(e,t){var r=t||window.location.search,n=null;if(r){var o=r.indexOf("?")+1,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");n=r.substr(o).match(a)}return n?unescape(n[2]):null},Gt=function(){var e=navigator.userAgent.toLowerCase(),t=null;return e.indexOf("msie")>0&&(t=e.match(/msie [\d.]+;/gi)),e.indexOf("firefox")>0&&(t=e.match(/firefox\/[\d.]+/gi)),e.indexOf("safari")>0&&e.indexOf("chrome")<0&&(t=e.match(/safari\/[\d.]+/gi)),e.indexOf("chrome")>0&&(t=e.match(/chrome\/[\d.]+/gi)),t?t.toString():"unknown"};function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ht,Vt=["hans","hant"],Bt=["en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr"],Yt=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},Qt=function(e){if(e.includes("-")){var t=e.split("-");return Vt.includes(t[1])?"".concat(t[0],"-").concat(Yt(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},qt=function(e){var t,r=(e||"en").toLowerCase(),n="en",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(Bt);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.includes(r)){n=Qt(a);break}}}catch(e){o.e(e)}finally{o.f()}return n},Wt=function(e){var t=qt(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},Kt={en:"default","ms-MY":"ms-my","th-TH":"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn","id-ID":"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar"},zt=function(e){var t=qt(e);return Kt[t]||"default"},Jt=function(e){var t=e.access,r=e.isSubAccount,n=e.action,o=e.url,a=void 0===o?"":o;t&&(r?n():window.open().location=a)},Xt=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];t&&(clearTimeout(t),t=null);var i=Date.now();i-o>n?(e.apply(void 0,c),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,c),o=Date.now()}),r)}},$t=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null,s=0,i=function(){s=!1===a.leading?0:(new Date).getTime(),c=null,o=e.apply(r,n),c||(r=n=null)},u=function(){var u=(new Date).getTime();s||!1!==a.leading||(s=u);var d=t-(u-s);r=this;for(var l=arguments.length,p=new Array(l),f=0;f<l;f++)p[f]=arguments[f];return n=p,d<=0||d>t?(c&&(clearTimeout(c),c=null),s=u,o=e.apply(r,n),c||(r=n=null)):c||!1===a.trailing||(c=window.setTimeout(i,d)),o};return u},Zt=function(e,t){var r=0;return{check:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(void 0,Ze(o))?r+=1:this.reset(),r>=t&&(this.reset(),!0)},reset:function(){r=0}}},er="Auto-Translation",tr="modal",rr=function(e,t){var r=t.superType,n=t.secondaryType,o=e.find((function(e){return e.name===r}));if(o){var a=o.children;if(a.length){var c=a.find((function(e){return e.name===n}));return c||!1}return!1}return!1},nr=function(e){return rr(e,{superType:er,secondaryType:tr})},or=function(e){return rr(e,{superType:er,secondaryType:"settings"})},ar=function(e){return rr(e,{superType:"Mass-Tool",secondaryType:tr})},cr=function(e){return rr(e,{superType:"SearchV3",secondaryType:tr})},sr=function(e){return rr(e,{superType:"Reply",secondaryType:tr})},ir=function(e){return rr(e,{superType:"Region-Filter",secondaryType:tr})},ur=function(e){return rr(e,{superType:"MiniChat-Header",secondaryType:tr})},dr=function(e){return rr(e,{superType:"MiniChat-Entry",secondaryType:tr})},lr=c(349),pr=c.n(lr),fr={getItem:function(e,t){try{var r=window.localStorage.getItem(e);return null==r?r:t?JSON.parse(r):r}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,r){try{var n=r?JSON.stringify(t):t;window.localStorage.setItem(e,n)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},_r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?fr.getItem(e):pr().getItem(e)},Er=function(e,t){return pr().setItem(e,t)},Sr=function(e,t){return t?fr.removeItem(e):pr().removeItem(e)},hr=pr().supports(pr().INDEXEDDB)||pr().supports(pr().WEBSQL)?1e3:100,Or=c(470).t;function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mr=n.MSG_TYPE_TEXT,gr=n.MSG_TYPE_IMAGE,br=n.MSG_TYPE_OFFER,yr=n.MSG_TYPE_PRODUCT,Rr=n.MSG_TYPE_ORDER,Cr=n.MSG_TYPE_STICKER,Pr=n.MSG_TYPE_NOTIFICATION,Dr=n.MSG_TYPE_WEBVIEW,Ir=n.MSG_TYPE_VOUCHER,Ar=n.MSG_TYPE_ITEM_LIST,wr=n.MSG_TYPE_FAQ,Nr=n.MSG_TYPE_FAQ_QUESTION,xr=n.MSG_TYPE_FAQ_LIVEAGENT,kr=n.MSG_TYPE_FAQ_FEEDBACK,Ur=(n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_FAQ_UNSUPPORTED),Mr=n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Lr=n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,jr=(n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_BUNDLE_MESSAGE),Gr=(n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OPTION_PACK),Fr=n.MSG_TYPE_SELECTED_OPTION,Hr=n.MSG_TYPE_VIDEO,Vr=n.MSG_TYPE_RATE_CARDS,Br=n.MSG_TYPE_IMAGE_WITH_TEXT,Yr=n.MSG_TYPE_RATE_CARD,Qr=n.MSG_TYPE_NEW_FAQ,qr=n.MSG_TYPE_FAQ_CATEGORY_CHOICE,Wr=n.MSG_TYPE_FAQ_QUESTION_LIST,Kr=n.MSG_TYPE_FAQ_TYPE_CHOICE,zr=n.MSG_TYPE_FAQ_CATEGORY_LIST,Jr=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,Xr=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,$r=n.FAQ_TYPE_BOT_RESPONSE_MESSAGE,Zr=N.PENDING,en=(N.ACCEPTED,N.REJECTED),tn=(N.CANCELLED,"common.unsupported_message"),rn=(m(Ht={},n.MSG_TYPE_FAQ_LIVEAGENT,"faq.live_agent"),m(Ht,n.MSG_TYPE_FAQ_UNSUPPORTED,"faq.new_unsupport_input"),m(Ht,n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,"faq.feedback_prompt"),m(Ht,n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,"faq.new_live_agent_prompt"),m(Ht,n.MSG_TYPE_VIDEO,"conversation_detail.input_field.toolbar.video.tip"),m(Ht,n.MSG_TYPE_IMAGE_WITH_TEXT,"conversation_list.conversation_cell.new_image_message"),Ht),nn=function(e){return Or(rn[e]||tn)},on=[Ar],an=[Hr,Ur,Mr,Lr,Br],cn=[gr,jr,Xr,br,yr,Rr,Ir,Yr,Cr],sn=[Wr,Kr,zr],un=function(t){var r=t.message,n=t.enableTranslation,o=t.locale,a=t.conversationShopId;if(!r)return{text:Or(tn)};var c=r.type,s=r.content,i=void 0===s?{}:s,u=r.crm_message_preview,d=void 0===u?{}:u,l=r.message_option,p=r.source,f=r.send_status;if(d.text)return{text:d.text};if(null!=i&&i.preview_text&&c===$r)return{text:i.preview_text};if(dn(l,e.MSG_OPT_CENSORED_BLACKLIST))return{text:Or("common.blacklist.replaced_text")};if(c){var _,E,S=i||{},h=S.text,O=void 0===h?"":h,v=S.title,T=S.opening,m=S.caption,g=S.translation,b=S.product_name,y=S.sticker_name,R=S.chat_product_infos,C=void 0===R?[]:R,P=S.products,D=void 0===P?[]:P,I=zn(r,{isAgent:!1,shop_id:a}),A=function(e,t,r,n){var o,a=t||{},c=a.live_agent_text,s=void 0===c?[]:c,i=a.fixed_title,u=a.faq_type_choice_translation;if(an.includes(e))o=s.length?_n(s,r):nn(e);else if(sn.includes(e))o=_n(e===Kr?u:i,r);else{var d=cn.includes(e)?"conversation_list.conversation_cell.new_".concat(e,"_message"):on.includes(e)?"common.tips.recommended".concat(n?"":"_for_you"):"";o=d?"[".concat(Or(d),"]"):Or(tn)}return o}(c,i,o,I);switch(c){case Qr:case wr:E=T||Or("faq.no_set.chat_bot_title");break;case mr:var w=En(i);E=!n||w||l===e.MSG_OPT_SOCIAL_MESSAGE||["crm","proactive_update"].includes(p)||2===f?O:(null==g?void 0:g.text)||O;break;case xr:case Nr:case kr:case Fr:case Gr:case qr:case Jr:E=O||v;break;case Hr:E="[".concat(A,"]");break;case Br:E="[".concat(A,"] ").concat(m||v||O);break;case Ur:case Mr:case Lr:case Wr:case Kr:case zr:E=A;break;case yr:E="".concat(A," ").concat(b);break;case Cr:E=y?"[".concat(y,"]"):A;break;case Ar:var N=C.map((function(e){return e.name})).join("; ");E="".concat(A," ").concat(N);break;case Pr:var x=vn(i||{},o),k=x.notification_for_sender,U=x.notification_for_receiver;E=I?k:U;break;case Yr:E="".concat(A," ").concat(Or(I?"conversation_list.preview.rate_card_sender":"rate_card.rate_out_service"));break;case br:var M=i||{},L=M.status,j=M.products_count,G=M.offer_price;if(L)if(L===Zr){var F=Or("conversation_list.preview.offer_pending_".concat(I?"sender":"receiver"));E="".concat(A," ").concat(F,": ").concat(G," x ").concat(j),I||(_=!0)}else{var H=L===en?"declined":L;E="".concat(A," ").concat(Or("conversation_detail.workstation.offer_panel.".concat(H)))}else E=A;break;case Rr:E="".concat(A," ").concat(D.map((function(e){return e.title})).join("; "));break;case Ir:var V=i||{},B=V.type,Y=V.rule_text,Q=V.discount_text;if(B){var q="[".concat(Or("conversation_detail.workstation.voucher_panel.".concat(B,"_voucher")),"]");E="".concat(q," ").concat(Q,", ").concat(Y)}else E=A;break;default:E=A}return{text:E,isPendingReceivedOffer:_}}return{text:Or(tn)}},dn=function(e,t){return(e&t)===t},ln=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dn(t.message_option,e.MSG_OPT_DELETE)},pn=function(e,t){return t.some((function(t){return dn(e,t)}))},fn=function(e,t){return e===Dr&&t.type===Vr||e===Yr},_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.find((function(e){return Wt(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(r||{}).text},En=function(e){var t=e||{},r=t.translation,n=t.mid;if(!r)return!0;var o=(void 0===n?{}:n).source_language,a=void 0===o?"":o,c=r||{},s=c.final,i=c.mid,u=c.target_language,d=void 0===u?"":u,l=c.source_language,p=void 0===l?"":l,f=s?s.target_language:d,_=s?s.source_language:p,E=i?i.source_language:a;return E?E===f:_===f&&"unknown"!==_},Sn=function(e,t){return{type:n.MSG_TYPE_SECURITY_TIPS,content:{text:""},id:e,conversation_id:t,to_id:"",from_id:"",shop_id:"",created_timestamp:Math.floor((new Date).getTime()/1e3)}},hn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,o=t.updateMessageOption,a=void 0===o||o,c=e||{},s=c.created_timestamp,i=c.message_option,u=n?{max_general_option_hide_time:s}:{},d=a?{last_message_option:i}:{};return Tr(Tr({},u),d)},On=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}},vn=function(e,t){var r=e.noti_text_of_all_languages,n=void 0===r?[]:r;if(!n.length)return e;var o=n.find((function(e){return Wt(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}));if(o)return o;var a=n.find((function(e){return"en"===e.language}));return a||e},Tn=function(e){var t=e.type,r=e.textContent,n=e.content,o={};switch(t){case Rr:o={products:(r||{}).products};break;case Ir:var a=r||{};o={rule_text:a.rule_text,discount_text:a.discount_text,type:a.type};break;case br:var c=r||{};o={status:c.status,products_count:c.products_count,offer_price:c.offer_price};break;case yr:o={product_name:n.product_name||(null==r?void 0:r.name)}}return Tr(Tr({},e),{},{content:Tr(Tr({},n),o)})};function mn(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function gn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){mn(a,n,o,c,s,"next",e)}function s(e){mn(a,n,o,c,s,"throw",e)}c(void 0)}))}}var bn,yn=c(757),Rn=c.n(yn),Cn=c(470).t,Pn=function(e){return Dn(e)?Cn(Lt("label.exceed_media_limit.video_duration",180),{max:180}):null},Dn=function(e){var t=e.type,r=e.duration,n=void 0===r?0:r;return"video"===t&&(n<0||n>180)},In=function(){return window.createObjectURL||window.URL.createObjectURL},An=function(e){return{type:"video",cover:"",file:e,duration:0}},wn=function(e,t){return new Promise((function(r){"image"===t?function(e,t){var r=In()(e),n=new Image;n.onload=function(){var o=n.width,a=n.height;t({type:"image",cover:r,file:e,width:o,height:a})},n.src=r}(e,r):"video"===t&&function(e,t){var r;try{r=In()(e)}catch(r){return void t(An(e))}var n=document.createElement("video");n.setAttribute("crossOrigin","anonymous"),n.setAttribute("autoplay","autoplay"),n.muted=!0,n.src=r,n.addEventListener("loadeddata",(function(){n?function(e,t,r,n){var o=document.createElement("canvas"),a=e,c=a.videoWidth,s=a.videoHeight,i=a.duration;o.width=c,o.height=s,o.getContext("2d").drawImage(e,0,0,c,s);var u={type:"video",file:t,duration:Math.ceil(i),width:c,height:s,videoUrl:r};o.toBlob?o.toBlob((function(t){u.cover=t?In()(t):"",n(u),e=null}),"image/png",.5):(u.cover=o.toDataURL?o.toDataURL("image/png"):"",n(u))}(n,e,r,t):t(An(e))})),n.addEventListener("error",(function(){t(An(e))}))}(e,r)}))},Nn=function(e){return e.size},xn=function(e){return e.type},kn=function(e){var t=xn(e);return function(e){return e.includes("video")||De.includes(e)}(t)?"video":function(e){return e.includes("image")}(t)?"image":null},Un=function(){var e=gn(Rn().mark((function e(t){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(){var e=gn(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,kn(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mn="common.toast.file_unsupport",Ln=function(e,t,r,n){var o=kn(e);if("all"===r&&!o||"all"!==r&&o!==r)return Cn(Mn);if("video"===o){if(!t)return Cn(Mn);if(!function(e){return Nn(e)<=Ae}(e))return Cn("label.exceed_media_limit.video_size",{max:30});if(!function(e){var t=function(e){return e.name}(e),r=(t.substr(t.lastIndexOf(".")+1)||"").toUpperCase();return Pe.includes(r)}(e))return Cn(Mn)}else if("image"===o){if(!function(e,t){return Nn(e)<=(t||Ie)}(e,n))return n?Cn("ps_feedback_upload_img_size_error"):Cn("common.toast.file_size_exceeds",{maxFileSize:"2MB"});if(!function(e){return Re.includes(xn(e))}(e))return Cn("feedback_modal.error.upload_image_failed.format")}return null},jn=function(e,t){var r=new XMLHttpRequest;r.open("get",e),r.responseType="blob",r.onload=function(){t(r.response)},r.send()},Gn=c(547),Fn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER],Hn=function(e){return Fn.includes(e)},Vn=[e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND],Bn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ITEM_LIST,n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_ADD_ON_DEAL,n.MSG_TYPE_VOUCHER,n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OFFER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT,n.MSG_TYPE_IMAGE_WITH_TEXT],Yn=function(e,t){var r=e.type,c=e.send_status,s=e.errorCode,i=e.status,u=e.message_option;if(!t){var d=Bn.includes(r)&&!Vn.find((function(e){return dn(u,e)})),p=c!==o.SENDING&&c!==o.FAILED&&i!==l.CENSORED_BLACKLIST&&s!==a.BLACKLIST;if(d&&p){var f=(e||{}).textContent,_=void 0===f?{}:f;if(r===n.MSG_TYPE_ORDER)return!(!_||!_.id);if(r===n.MSG_TYPE_PRODUCT){var E=_,S=E.id,h=E.actual_price;return!(!S||!h)}return!0}}return!1},Qn=(m(bn={},n.MSG_TYPE_TEXT,0),m(bn,n.MSG_TYPE_IMAGE,1),m(bn,n.MSG_TYPE_OFFER,3),m(bn,n.MSG_TYPE_PRODUCT,4),m(bn,n.MSG_TYPE_ORDER,5),m(bn,n.MSG_TYPE_STICKER,6),m(bn,n.MSG_TYPE_VIDEO,18),m(bn,n.MSG_TYPE_ITEM_LIST,1011),m(bn,n.MSG_TYPE_VOUCHER,1013),m(bn,n.MSG_TYPE_SHOPPING_CART,1014),m(bn,n.MSG_TYPE_UNTATED_ORDER_REMINDER,1015),m(bn,n.MSG_TYPE_BUNDLE_DEAL,1016),m(bn,n.MSG_TYPE_FLASH_SALE,1017),m(bn,n.MSG_TYPE_ADD_ON_DEAL,1018),bn),qn=function(e){return void 0!==Qn[e]?Qn[e]:-1},Wn=[e.MSG_OPT_AUTO_REPLY,e.MSG_OPT_BLOCKED,e.MSG_OPT_CENSORED_BLACKLIST,e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER,e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER,e.MSG_OPT_INVISIBLE_FOR_RECEIVER,e.MSG_OPT_INVISIBLE_FOR_SENDER,e.MSG_OPT_ADS,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_OFFWORK_AUTOREPLY,e.MSG_OPT_CANCELORDER_WARNING_RETRACT,e.MSG_OPT_CHATBOT_SESSION,e.MSG_OPT_TRIGGER_CHATBOT,e.MSG_OPT_PRIVATE_MESSAGE,e.MSG_OPT_SILENT_FOR_SENDER],Kn=function(e,t,r){var n=e.type,a=e.send_status,c=e.created_timestamp,s=e.message_option,i=!0;return t&&_.includes(n)&&![o.SENDING,o.FAILED].includes(a)&&!pn(s,Wn)||(i=!1),(!r||Math.floor((new Date).getTime()/1e3)-c>=r)&&(i=!1),i},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isAgent,n=t.to_tob_user_id,o=t.shop_id,a=e.from_id,c=e.to_shop_id;return r?a!==n:c!==o};function Jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $n,Zn,eo,to=function(e,t){return t.map((function(t){return function(e,t){var r=function(e,t){var r=t.trim().toLocaleLowerCase();return e.filter((function(e){return e.trim().toLocaleLowerCase().startsWith(r)})).length}(e.tags,t),n=function(e,t){var r=ao(t),n=new RegExp(r,"gi");return(e.match(n)||[]).length}(e.content,t);return 1e4*r+1*n}(e,t)})).reduce((function(e,t){return e+t}),0)},ro=function(e){return e.trim().length>=1},no=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return e.trim()?[e]:[];var r=e.split(",").filter((function(e){return e.trim()})),n=Ze(new Set(r));return n.sort((function(e,t){return e.length>t.length?-1:1}))},oo=function(e,t){return t.length?function(e){return e.sort((function(e,t){return e.weight>t.weight?-1:1}))}(function(e){return e.filter((function(e){return e.weight}))}(e.map((function(e){return Xn(Xn({},e),{},{weight:to(e,t)})})))):e},ao=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},co=c(470).t;function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function io(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var uo,lo=function(e){return"common.order.status.".concat(e)},po=function(e){var t=e.order,r=e.region,n=e.isOwnOrder,o=e.isNewPrice,a=t.products,c=void 0===a?[]:a,s=t.estimated_escrow,i=void 0===s?0:s,u=t.total_price,d=void 0===u?0:u,l=t.voucher_price,p=void 0===l?0:l,f=t.price_before_discount,_=void 0===f?0:f,E=t.credit_card_promotion,S=void 0===E?0:E,h=c.reduce((function(e,t){return e+(t.coin_offset||0)}),0);return{shopeeCoin:h,payment:Et(o?i||d?n?i:d:_||d:_-p-S-h,r)}},fo=Ee.PAY_CREDIT_CARD,_o=Ee.PAY_BANK_TRANSFER,Eo=Ee.PAY_OFFLINE_PAYMENT,So=Ee.PAY_IPAY88,ho=Ee.PAY_FREE,Oo=Ee.PAY_COD,vo=Ee.PAY_ESUN,To=Ee.PAY_BILL_PAYMENT,mo=Ee.PAY_INDOMARET,go=Ee.PAY_KREDIVO,bo=Ee.PAY_NICEPAY_CC,yo=Ee.PAY_AIRPAY,Ro=Ee.PAY_SHOPEE_WALLET,Co=Ee.PAY_SHOPEE_WALLET_V2,Po=Ee.PAY_AKULAKU,Do=Ee.PAY_INSTALLMENT,Io=Ee.PAY_IBANKING,Ao=(m($n={},fo,"cc"),m($n,_o,"bank_transfer"),m($n,Eo,"offline"),m($n,So,"online"),m($n,ho,"waived"),m($n,Oo,"cod"),m($n,vo,"esun"),m($n,To,"bill_payment"),m($n,mo,"indomaret"),m($n,go,"kredivo"),m($n,bo,"cc_installment"),m($n,yo,"airpay"),m($n,Ro,"shopee_wallet"),m($n,Co,"shopee_wallet_v2"),m($n,Po,"akulaku"),m($n,Do,"installment"),m($n,Io,"ibanking"),$n),wo=function(e){var t=Ao[e];return t?co("common.order.pay_method.".concat(t)):""},No=he.NONE,xo=he.OUT_OF_STOCK,ko=he.CUSTOMER_REQUEST,Uo=he.UNDELIVERABLE_AREA,Mo=he.CANNOT_SUPPORT_COD,Lo=he.LOST_PARCEL,jo=he.SYSTEM_UNPAID,Go=he.SYSTEM_UNDERPAID,Fo=he.SYSTEM_PAYMENT_REJECTED,Ho=(m(Zn={},No,"none"),m(Zn,xo,"out_of_stock"),m(Zn,ko,"customer_request"),m(Zn,Uo,"undeliverable_area"),m(Zn,Mo,"cannot_support_cod"),m(Zn,Lo,"lost_parcel"),m(Zn,jo,"system_unpaid"),m(Zn,Go,"underpaid"),m(Zn,Fo,"payment_rejected"),Zn),Vo=function(e){return co("common.order.cancel_reason.".concat(Ho[e]||"system"))},Bo=function(e,t){var r=e.list_type,n=e.status_ext,o=e.order_type,a=e.payment_method,c=e.shipping_method,s=e.logistics_status,i=e.pickup_cutoff_time;if(n===Oe.ORDER_EXT_CANCEL_PENDING)return!1;var u=["MY","TW","VN","PH"].includes(t),d=!!i&&Date.now()>=new Date(i).getTime(),l=!0;switch(r){case ve.TOPAY:if(a===Ee.PAY_OFFLINE_PAYMENT)return l;break;case ve.TOSHIP:return d&&u&&a===Ee.PAY_COD&&s===ge.LOGISTICS_REQUEST_CREATED||(o===Te.ESCROW?(n===Oe.ORDER_EXT_RETURN_PROCESSING||c>0&&s===ge.LOGISTICS_REQUEST_CREATED&&d)&&(l=!1):o===Te.SIMPLE&&(l=!1)),l}},Yo=me.ORDER_DETAIL_SHIPPING_CONFIRMED,Qo=me.ORDER_DETAIL_SHIPPED,qo=me.ORDER_DETAIL_RECEIVED,Wo=me.ORDER_DETAIL_CANCELED,Ko=me.ORDER_DETAIL_NOTIFY_SHIP,zo=(m(eo={},Yo,"detail_received"),m(eo,Qo,"shipped"),m(eo,qo,"received_by_buyer"),m(eo,Wo,"cancelled"),m(eo,Ko,"notify_ship"),eo),Jo=function(e,t,r){if(2===t)return r;var n=zo[e];return n?co("common.order.logistics_log.".concat(n)):""},Xo=["created_at","pay_time","delivery_time","complete_time","cancel_time"],$o=["price_before_discount","receivables","amount","shipping_fee","tax_amount","credit_card_promotion","coin_offset","voucher_price","refund_amount","wallet_discount","local_shopee_coin"],Zo=["coin_offset","voucher_price","wallet_discount","local_shopee_coin"],ea=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.id,o=t.country,a=io({},e),c=n===e.id,s=po({order:e,region:o,isOwnOrder:c,isNewPrice:r}),i=s.shopeeCoin,u=s.payment;return a.seller_note=(a.seller_note||"").trim(),a.local_shopee_coin=i,a.local_payment=u,a.local_amount_price=Et(e.price_before_discount-e.shipping_fee-e.tax_amount,o),a.local_ship_by_date=yt(e.ship_by_date,{needFullFormat:!0}),Xo.forEach((function(e){var t=a[e];t&&(a[e]=yt(t,{needFullFormat:!0}))})),$o.forEach((function(e){var t=a[e]||0;a[e]=Et(t,o,{withMinus:Zo.includes(e)})})),a},ta=(m(uo={},te.DELETED,re.DELETED),m(uo,te.BANNED,re.BANNED),m(uo,te.SOLD_OUT,re.SOLD_OUT),m(uo,te.DELISTED,re.DELISTED),uo),ra=function(e){return e===te.NORMAL?"conversation_detail.conversation_origin.product_origin.product_stock":"common.product.".concat(ta[e])},na=function(e,t){return!(!e||t!==te.DELETED)},oa=function(e){return void 0!==e&&e!==te.NORMAL},aa=function(e){return void 0!==e&&e<=0},ca=function(e,t){return oa(e)||aa(t)},sa=1e3,ia=1800,ua=86400,da=[ua,3600,60],la=function(e){var t=e,r=da.map((function(e){var r=t>e?Math.floor(t/e):0;return t-=r*e,r}));return r.push(t),r},pa=function(e){return"".concat(e>=10?"":"0").concat(e)},fa=function(){return Math.ceil(Date.now()/1e3).toString()},_a=function(e){return e*Math.pow(10,9)+""},Ea=["zh-CN","zh-Hant","zh-Hans"],Sa=function(e){var t=At().language||"en",r=qt(t);return Ea.includes(r)?((100-e)/10).toFixed(e%10?1:0):"".concat(e,"%")},ha=function(e,t,r,n,o){return n||t?e:e||o&&!!r},Oa=c(470).t,va=function(e){return e===F.FINISHED},Ta=function(e,t){return e===t},ma=function(e,t){return Et(e,t,{withUnit:e>=1e4})},ga=function(e,t,r,n){return Oa("conversation_detail.workstation.voucher_panel.".concat(n?F.ONGOING:e,"_time"),{time:e===F.SCHEDULED?Ct(t,"MM.DD.YYYY h:mm"):Ct(r,"MM.DD.YYYY")})};function ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ra=function(e,t,r){var n=e.categories,o=void 0===n?[]:n,a=e.other_faq_types,c=void 0===a?[]:a,s=e.intents,i=void 0===s?[]:s,u=e.questions,d=void 0===u?[]:u,l=[];return o.length&&o.forEach((function(e,r){l.push(Ca({item:e,index:r,type:z.Categories,isNewFaq:t}))})),c.length&&c.forEach((function(e,n){l.push(Ca({item:e,index:n+o.length,type:z.OtherFaqType,isNewFaq:t,locale:r}))})),i.length&&i.forEach((function(e,r){l.push(Ca({item:e,index:r+o.length+c.length,type:z.Intent,isNewFaq:t}))})),d.length&&d.forEach((function(e,r){l.push(Ca({item:e,index:r,type:z.Question,isNewFaq:t}))})),l},Ca=function(e){var t=e.item,r=e.index,n=e.type,o=e.isNewFaq,a=e.locale,c={};switch(n){case z.Categories:c={content:t.title,location:r};break;case z.OtherFaqType:c={content:_n(t.faq_type_choice_translation,a),location:r};break;case z.Intent:var s=t;c=ya(ya({},JSON.parse(s.pass_through_data)),{},{content:s.text,location:r});break;case z.Question:c={content:t.text,location:r};break;case z.ChatWithSeller:c={content:t.content}}return{data:JSON.stringify(ya(ya({},c),{},{is_intent_prediction:n===z.Intent?K.Intent:K.Faq,is_default_hq:o?1:0})),type:1}},Pa=c(470)})(),s})(),e.exports=n(r(37725),r(14906),r(58518),r(69483))}}]);